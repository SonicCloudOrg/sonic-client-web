{"version":3,"file":"StylePropertyEditor.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/elements/components/StylePropertyEditor.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {\n  getEventPromise,\n  renderElementIntoDOM,\n} from '../../../testing/DOMHelpers.js';\nimport {describeWithLocale} from '../../../testing/EnvironmentHelpers.js';\n\nimport * as ElementsComponents from './components.js';\n\ndescribeWithLocale('StylePropertyEditor', () => {\n  function assertValues(component: HTMLElement, values: string[]) {\n    const propertyElements = component.shadowRoot!.querySelectorAll('.property');\n    const properties = [];\n    for (const propElement of propertyElements) {\n      properties.push(propElement.textContent?.trim());\n    }\n    assert.deepEqual(properties, values);\n  }\n\n  describe('FlexboxEditor', () => {\n    it('renders the editor', async () => {\n      const component = new ElementsComponents.StylePropertyEditor.FlexboxEditor();\n      renderElementIntoDOM(component);\n      component.data = {\n        authoredProperties: new Map([\n          ['flex-direction', 'row'],\n          ['flex-wrap', 'wrap'],\n          ['align-content', 'flex-end'],\n          ['justify-content', 'flex-start'],\n          ['align-items', 'flex-start'],\n        ]),\n        computedProperties: new Map(),\n      };\n      assertValues(component, [\n        'flex-direction: row',\n        'flex-wrap: wrap',\n        'align-content: flex-end',\n        'justify-content: flex-start',\n        'align-items: flex-start',\n      ]);\n      component.data = {\n        authoredProperties: new Map(),\n        computedProperties: new Map([\n          ['flex-direction', 'row'],\n          ['flex-wrap', 'wrap'],\n          ['align-content', 'flex-end'],\n          ['justify-content', 'flex-start'],\n          ['align-items', 'flex-start'],\n        ]),\n      };\n      assertValues(component, [\n        'flex-direction: row',\n        'flex-wrap: wrap',\n        'align-content: flex-end',\n        'justify-content: flex-start',\n        'align-items: flex-start',\n      ]);\n      component.data = {\n        authoredProperties: new Map(),\n        computedProperties: new Map(),\n      };\n      assertValues(component, ['flex-direction:', 'flex-wrap:', 'align-content:', 'justify-content:', 'align-items:']);\n    });\n\n    it('allows selecting a property value', async () => {\n      const component = new ElementsComponents.StylePropertyEditor.FlexboxEditor();\n      renderElementIntoDOM(component);\n      component.data = {\n        authoredProperties: new Map([\n          ['flex-direction', 'row'],\n        ]),\n        computedProperties: new Map(),\n      };\n      assertValues(\n          component, ['flex-direction: row', 'flex-wrap:', 'align-content:', 'justify-content:', 'align-items:']);\n      const eventPromise =\n          getEventPromise<ElementsComponents.StylePropertyEditor.PropertySelectedEvent>(component, 'propertyselected');\n      const flexDirectionColumnButton = component.shadowRoot!.querySelector('.row .buttons .button:nth-child(2)');\n      assert.instanceOf(flexDirectionColumnButton, HTMLButtonElement);\n      flexDirectionColumnButton.click();\n      const event = await eventPromise;\n      assert.deepEqual(event.data, {name: 'flex-direction', value: 'column'});\n    });\n\n    it('allows deselecting a property value', async () => {\n      const component = new ElementsComponents.StylePropertyEditor.FlexboxEditor();\n      renderElementIntoDOM(component);\n      component.data = {\n        authoredProperties: new Map([\n          ['flex-direction', 'column'],\n        ]),\n        computedProperties: new Map(),\n      };\n      assertValues(\n          component, ['flex-direction: column', 'flex-wrap:', 'align-content:', 'justify-content:', 'align-items:']);\n      const eventPromise = getEventPromise<ElementsComponents.StylePropertyEditor.PropertyDeselectedEvent>(\n          component, 'propertydeselected');\n      const flexDirectionColumnButton = component.shadowRoot!.querySelector('.row .buttons .button:nth-child(2)');\n      assert.instanceOf(flexDirectionColumnButton, HTMLButtonElement);\n      flexDirectionColumnButton.click();\n      const event = await eventPromise;\n      assert.deepEqual(event.data, {name: 'flex-direction', value: 'column'});\n    });\n  });\n\n  describe('GridEditor', () => {\n    it('renders the editor', async () => {\n      const component = new ElementsComponents.StylePropertyEditor.GridEditor();\n      renderElementIntoDOM(component);\n      component.data = {\n        authoredProperties: new Map([\n          ['align-content', 'end'],\n          ['justify-content', 'start'],\n          ['align-items', 'start'],\n          ['justify-items', 'center'],\n        ]),\n        computedProperties: new Map(),\n      };\n      assertValues(component, [\n        'align-content: end',\n        'justify-content: start',\n        'align-items: start',\n        'justify-items: center',\n      ]);\n      component.data = {\n        authoredProperties: new Map(),\n        computedProperties: new Map([\n          ['align-content', 'end'],\n          ['justify-content', 'start'],\n          ['align-items', 'start'],\n          ['justify-items', 'center'],\n        ]),\n      };\n      assertValues(component, [\n        'align-content: end',\n        'justify-content: start',\n        'align-items: start',\n        'justify-items: center',\n      ]);\n      component.data = {\n        authoredProperties: new Map(),\n        computedProperties: new Map(),\n      };\n      assertValues(component, ['align-content:', 'justify-content:', 'align-items:', 'justify-items:']);\n    });\n\n    it('allows selecting a property value', async () => {\n      const component = new ElementsComponents.StylePropertyEditor.GridEditor();\n      renderElementIntoDOM(component);\n      component.data = {\n        authoredProperties: new Map(),\n        computedProperties: new Map([\n          ['justify-items', 'normal'],\n        ]),\n      };\n      assertValues(component, ['align-content:', 'justify-content:', 'align-items:', 'justify-items: normal']);\n      const eventPromise =\n          getEventPromise<ElementsComponents.StylePropertyEditor.PropertySelectedEvent>(component, 'propertyselected');\n      const justifyItemsButton = component.shadowRoot!.querySelector('.row:nth-child(4) .buttons .button:nth-child(1)');\n      assert.instanceOf(justifyItemsButton, HTMLButtonElement);\n      justifyItemsButton.click();\n      const event = await eventPromise;\n      assert.deepEqual(event.data, {name: 'justify-items', value: 'center'});\n    });\n\n    it('allows deselecting a property value', async () => {\n      const component = new ElementsComponents.StylePropertyEditor.GridEditor();\n      renderElementIntoDOM(component);\n      component.data = {\n        authoredProperties: new Map([\n          ['justify-items', 'center'],\n        ]),\n        computedProperties: new Map(),\n      };\n      assertValues(component, ['align-content:', 'justify-content:', 'align-items:', 'justify-items: center']);\n      const eventPromise = getEventPromise<ElementsComponents.StylePropertyEditor.PropertyDeselectedEvent>(\n          component, 'propertydeselected');\n      const justifyItemsButton = component.shadowRoot!.querySelector('.row:nth-child(4) .buttons .button:nth-child(1)');\n      assert.instanceOf(justifyItemsButton, HTMLButtonElement);\n      justifyItemsButton.click();\n      const event = await eventPromise;\n      assert.deepEqual(event.data, {name: 'justify-items', value: 'center'});\n    });\n  });\n});\n"]}