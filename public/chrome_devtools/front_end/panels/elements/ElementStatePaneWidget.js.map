{"version":3,"file":"ElementStatePaneWidget.js","sourceRoot":"","sources":["../../../../../../front_end/panels/elements/ElementStatePaneWidget.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {ElementsPanel} from './ElementsPanel.js';\nimport elementStatePaneWidgetStyles from './elementStatePaneWidget.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of a section in the Element State Pane Widget of the Elements panel. The\n   * controls in this section allow users to force a particular state on the selected element, e.g. a\n   * focused state via :focus or a hover state via :hover.\n   */\n  forceElementState: 'Force element state',\n  /**\n   * @description Tooltip text in Element State Pane Widget of the Elements panel. For a button that\n   * opens a tool that toggles the various states of the selected element on/off.\n   */\n  toggleElementState: 'Toggle Element State',\n  /**\n   * @description The name of a checkbox setting in the Element & Page State Pane Widget of the Elements panel.. This setting\n   * emulates/pretends that the webpage is focused.\n   */\n  emulateFocusedPage: 'Emulate a focused page',\n  /**\n   * @description Explanation text for the 'Emulate a focused page' setting in the Rendering tool.\n   */\n  emulatesAFocusedPage: 'Keep page focused. Commonly used for debugging disappearing elements.',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/elements/ElementStatePaneWidget.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class ElementStatePaneWidget extends UI.Widget.Widget {\n  private readonly inputs: HTMLInputElement[];\n  private readonly inputStates: WeakMap<HTMLInputElement, string>;\n  private cssModel?: SDK.CSSModel.CSSModel|null;\n  constructor() {\n    super(true);\n    this.contentElement.className = 'styles-element-state-pane';\n    this.contentElement.setAttribute('jslog', `${VisualLogging.pane('element-states')}`);\n    const inputs: HTMLInputElement[] = [];\n    this.inputs = inputs;\n    this.inputStates = new WeakMap();\n    const createSectionHeader = (title: string): HTMLDivElement => {\n      const sectionHeaderContainer = document.createElement('div');\n      sectionHeaderContainer.classList.add('section-header');\n      UI.UIUtils.createTextChild(sectionHeaderContainer.createChild('span'), title);\n\n      return sectionHeaderContainer;\n    };\n    const clickListener = (event: MouseEvent): void => {\n      const node = UI.Context.Context.instance().flavor(SDK.DOMModel.DOMNode);\n      if (!node || !(event.target instanceof HTMLInputElement)) {\n        return;\n      }\n      const state = this.inputStates.get(event.target);\n      if (!state) {\n        return;\n      }\n      node.domModel().cssModel().forcePseudoState(node, state, event.target.checked);\n    };\n    const createElementStateCheckbox = (state: string): Element => {\n      const td = document.createElement('td');\n      const label = UI.UIUtils.CheckboxLabel.create(':' + state);\n      const input = label.checkboxElement;\n      this.inputStates.set(input, state);\n      input.addEventListener('click', (clickListener as EventListener), false);\n      input.setAttribute('jslog', `${VisualLogging.toggle().track({click: true}).context(state)}`);\n      inputs.push(input);\n      td.appendChild(label);\n      return td;\n    };\n    const createEmulateFocusedPageCheckbox = (): Element => {\n      const div = document.createElement('div');\n      div.classList.add('page-state-checkbox');\n      const label = UI.UIUtils.CheckboxLabel.create(i18nString(UIStrings.emulateFocusedPage));\n      UI.SettingsUI.bindCheckbox(\n          label.checkboxElement, Common.Settings.Settings.instance().moduleSetting('emulate-page-focus'), {\n            enable: Host.UserMetrics.Action.ToggleEmulateFocusedPageFromStylesPaneOn,\n            disable: Host.UserMetrics.Action.ToggleEmulateFocusedPageFromStylesPaneOff,\n          });\n      UI.Tooltip.Tooltip.install(label.textElement, i18nString(UIStrings.emulatesAFocusedPage));\n\n      const link = UI.XLink.XLink.create(\n          'https://goo.gle/devtools-emulate-focused-page', undefined, undefined, undefined, 'learn-more');\n      link.textContent = '';\n      link.style.setProperty('display', 'inline-flex');\n\n      const icon = new IconButton.Icon.Icon();\n      icon.data = {iconName: 'help', color: 'var(--icon-default)', width: '16px', height: '16px'};\n      link.prepend(icon);\n\n      div.appendChild(label);\n      div.appendChild(link);\n      return div;\n    };\n\n    this.contentElement.className = 'styles-element-state-pane';\n\n    // Populate page states\n    const keepPageFocusedCheckbox = createEmulateFocusedPageCheckbox();\n\n    this.contentElement.appendChild(keepPageFocusedCheckbox);\n\n    // Populate element states\n    this.contentElement.appendChild(createSectionHeader(i18nString(UIStrings.forceElementState)));\n\n    const table = document.createElement('table');\n    table.classList.add('source-code');\n    UI.ARIAUtils.markAsPresentation(table);\n\n    let tr = table.createChild('tr');\n    tr.appendChild(createElementStateCheckbox('active'));\n    tr.appendChild(createElementStateCheckbox('hover'));\n    tr = table.createChild('tr');\n    tr.appendChild(createElementStateCheckbox('focus'));\n    tr.appendChild(createElementStateCheckbox('visited'));\n    tr = table.createChild('tr');\n    tr.appendChild(createElementStateCheckbox('focus-within'));\n    tr.appendChild(createElementStateCheckbox('focus-visible'));\n    tr = table.createChild('tr');\n    tr.appendChild(createElementStateCheckbox('target'));\n    this.contentElement.appendChild(table);\n    UI.Context.Context.instance().addFlavorChangeListener(SDK.DOMModel.DOMNode, this.update, this);\n  }\n  private updateModel(cssModel: SDK.CSSModel.CSSModel|null): void {\n    if (this.cssModel === cssModel) {\n      return;\n    }\n    if (this.cssModel) {\n      this.cssModel.removeEventListener(SDK.CSSModel.Events.PseudoStateForced, this.update, this);\n    }\n    this.cssModel = cssModel;\n    if (this.cssModel) {\n      this.cssModel.addEventListener(SDK.CSSModel.Events.PseudoStateForced, this.update, this);\n    }\n  }\n  override wasShown(): void {\n    super.wasShown();\n    this.registerCSSFiles([elementStatePaneWidgetStyles]);\n    this.update();\n  }\n  private update(): void {\n    let node = UI.Context.Context.instance().flavor(SDK.DOMModel.DOMNode);\n    if (node) {\n      node = node.enclosingElementOrSelf();\n    }\n    this.updateModel(node ? node.domModel().cssModel() : null);\n    if (node) {\n      const nodePseudoState = node.domModel().cssModel().pseudoState(node);\n      for (const input of this.inputs) {\n        input.disabled = Boolean(node.pseudoType());\n        const state = this.inputStates.get(input);\n        input.checked = nodePseudoState && state !== undefined ? nodePseudoState.indexOf(state) >= 0 : false;\n      }\n    } else {\n      for (const input of this.inputs) {\n        input.disabled = true;\n        input.checked = false;\n      }\n    }\n    ButtonProvider.instance().item().setToggled(this.inputs.some(input => input.checked));\n  }\n}\nlet buttonProviderInstance: ButtonProvider;\nexport class ButtonProvider implements UI.Toolbar.Provider {\n  private readonly button: UI.Toolbar.ToolbarToggle;\n  private view: ElementStatePaneWidget;\n  private constructor() {\n    this.button = new UI.Toolbar.ToolbarToggle(i18nString(UIStrings.toggleElementState), '');\n    this.button.setText(i18n.i18n.lockedString(':hov'));\n    this.button.setToggleWithDot(true);\n    this.button.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, this.clicked, this);\n    this.button.element.classList.add('monospace');\n    this.button.element.setAttribute('jslog', `${VisualLogging.toggleSubpane('element-states').track({click: true})}`);\n    this.view = new ElementStatePaneWidget();\n  }\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): ButtonProvider {\n    const {forceNew} = opts;\n    if (!buttonProviderInstance || forceNew) {\n      buttonProviderInstance = new ButtonProvider();\n    }\n    return buttonProviderInstance;\n  }\n  private clicked(): void {\n    ElementsPanel.instance().showToolbarPane(!this.view.isShowing() ? this.view : null, null);\n  }\n  item(): UI.Toolbar.ToolbarToggle {\n    return this.button;\n  }\n}\n"]}