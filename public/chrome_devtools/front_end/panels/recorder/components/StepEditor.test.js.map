{"version":3,"file":"StepEditor.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/recorder/components/StepEditor.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {\n  dispatchKeyDownEvent,\n  getEventPromise,\n  renderElementIntoDOM,\n} from '../../../testing/DOMHelpers.js';\n// eslint-disable-next-line rulesdir/es_modules_import\nimport * as EnvironmentHelpers from '../../../testing/EnvironmentHelpers.js';\nimport type * as SuggestionInput from '../../../ui/components/suggestion_input/suggestion_input.js';\nimport * as Models from '../models/models.js';\n// eslint-disable-next-line rulesdir/es_modules_import\nimport * as RecorderHelpers from '../testing/RecorderHelpers.js';\n\nimport type * as Components from './components.js';\n\nconst {describeWithLocale} = EnvironmentHelpers;\n\nfunction getStepEditedPromise(editor: Components.StepEditor.StepEditor) {\n  return getEventPromise<Components.StepEditor.StepEditedEvent>(\n             editor,\n             'stepedited',\n             )\n      .then(({data}) => data);\n}\n\nconst triggerMicroTaskQueue = async (n = 1) => {\n  while (n > 0) {\n    --n;\n    await new Promise(resolve => setTimeout(resolve, 0));\n  }\n};\n\ndescribeWithLocale('StepEditor', () => {\n  async function renderEditor(\n      step: Models.Schema.Step,\n      ): Promise<Components.StepEditor.StepEditor> {\n    const editor = document.createElement('devtools-recorder-step-editor');\n    editor.step = structuredClone(step) as typeof editor.step;\n    renderElementIntoDOM(editor, {});\n    await editor.updateComplete;\n    return editor;\n  }\n\n  function getInputByAttribute(\n      editor: Components.StepEditor.StepEditor,\n      attribute: string,\n      ): SuggestionInput.SuggestionInput.SuggestionInput {\n    const input = editor.renderRoot.querySelector(\n        `.attribute[data-attribute=\"${attribute}\"] devtools-suggestion-input`,\n    );\n    if (!input) {\n      throw new Error(`${attribute} devtools-suggestion-input not found`);\n    }\n    return input as SuggestionInput.SuggestionInput.SuggestionInput;\n  }\n\n  function getAllInputValues(\n      editor: Components.StepEditor.StepEditor,\n      ): string[] {\n    const result = [];\n    const inputs = editor.renderRoot.querySelectorAll(\n        'devtools-suggestion-input',\n    );\n    for (const input of inputs) {\n      result.push(input.value);\n    }\n    return result;\n  }\n\n  async function addOptionalField(\n      editor: Components.StepEditor.StepEditor,\n      attribute: string,\n      ): Promise<void> {\n    const button = editor.renderRoot.querySelector(\n        `devtools-button.add-row[data-attribute=\"${attribute}\"]`,\n    );\n    assert.instanceOf(button, HTMLElement);\n    button.click();\n    await triggerMicroTaskQueue();\n    await editor.updateComplete;\n  }\n\n  async function deleteOptionalField(\n      editor: Components.StepEditor.StepEditor,\n      attribute: string,\n      ): Promise<void> {\n    const button = editor.renderRoot.querySelector(\n        `devtools-button.delete-row[data-attribute=\"${attribute}\"]`,\n    );\n    assert.instanceOf(button, HTMLElement);\n    button.click();\n    await triggerMicroTaskQueue();\n    await editor.updateComplete;\n  }\n\n  async function clickFrameLevelButton(\n      editor: Components.StepEditor.StepEditor,\n      className: string,\n      ): Promise<void> {\n    const button = editor.renderRoot.querySelector(\n        `.attribute[data-attribute=\"frame\"] devtools-button${className}`,\n    );\n    assert.instanceOf(button, HTMLElement);\n    button.click();\n    await editor.updateComplete;\n  }\n\n  async function clickSelectorLevelButton(\n      editor: Components.StepEditor.StepEditor,\n      path: number[],\n      className: string,\n      ): Promise<void> {\n    const button = editor.renderRoot.querySelector(\n        `[data-selector-path=\"${path.join('.')}\"] devtools-button${className}`,\n    );\n    assert.instanceOf(button, HTMLElement);\n    button.click();\n    await editor.updateComplete;\n  }\n\n  /**\n   * Extra button to be able to focus on it in tests to see how\n   * the step editor reacts when the focus moves outside of it.\n   */\n  function createFocusOutsideButton() {\n    const button = document.createElement('button');\n    button.innerText = 'click';\n    renderElementIntoDOM(button, {allowMultipleChildren: true});\n\n    return {\n      focus() {\n        button.focus();\n      },\n    };\n  }\n\n  beforeEach(() => {\n    RecorderHelpers.installMocksForRecordingPlayer();\n  });\n\n  it('should edit step type', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.Click,\n      selectors: [['.cls']],\n      offsetX: 1,\n      offsetY: 1,\n    });\n    const step = getStepEditedPromise(editor);\n\n    const input = getInputByAttribute(editor, 'type');\n    input.focus();\n    input.value = 'change';\n    await input.updateComplete;\n\n    input.dispatchEvent(\n        new KeyboardEvent('keydown', {\n          key: 'Enter',\n          bubbles: true,\n          composed: true,\n        }),\n    );\n    await editor.updateComplete;\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.Change,\n      selectors: ['.cls'],\n      value: 'Value',\n    });\n    assert.deepStrictEqual(getAllInputValues(editor), [\n      'change',\n      '.cls',\n      'Value',\n    ]);\n  });\n\n  it('should edit step type via dropdown', async () => {\n    const editor = await renderEditor({type: Models.Schema.StepType.Scroll});\n    const step = getStepEditedPromise(editor);\n\n    const input = getInputByAttribute(editor, 'type');\n    input.focus();\n    input.value = '';\n    await input.updateComplete;\n\n    // Use the drop down.\n    input.dispatchEvent(\n        new KeyboardEvent('keydown', {\n          key: 'ArrowDown',\n          bubbles: true,\n          composed: true,\n        }),\n    );\n    input.dispatchEvent(\n        new KeyboardEvent('keydown', {\n          key: 'Enter',\n          bubbles: true,\n          composed: true,\n        }),\n    );\n    await editor.updateComplete;\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.Click,\n      selectors: ['.cls'],\n      offsetX: 1,\n      offsetY: 1,\n    });\n    assert.deepStrictEqual(getAllInputValues(editor), [\n      'click',\n      '.cls',\n      '1',\n      '1',\n    ]);\n  });\n\n  it('should edit other attributes', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.CustomStep,\n      name: 'test',\n      parameters: {},\n    });\n    const step = getStepEditedPromise(editor);\n\n    const input = getInputByAttribute(editor, 'parameters');\n    input.focus();\n    input.value = '{\"custom\":\"test\"}';\n    await input.updateComplete;\n\n    input.dispatchEvent(\n        new KeyboardEvent('keydown', {\n          key: 'Enter',\n          bubbles: true,\n          composed: true,\n        }),\n    );\n    await editor.updateComplete;\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.CustomStep,\n      name: 'test',\n      parameters: {custom: 'test'},\n    });\n    assert.deepStrictEqual(getAllInputValues(editor), [\n      'customStep',\n      'test',\n      '{\"custom\":\"test\"}',\n    ]);\n  });\n\n  it('should close dropdown on Enter', async () => {\n    const editor = await renderEditor({type: Models.Schema.StepType.Scroll});\n\n    const input = getInputByAttribute(editor, 'type');\n    input.focus();\n    input.value = '';\n    await input.updateComplete;\n\n    const suggestions = input.renderRoot.querySelector(\n        'devtools-suggestion-box',\n    );\n    if (!suggestions) {\n      throw new Error('Failed to find element');\n    }\n    assert.strictEqual(\n        window.getComputedStyle(suggestions).display,\n        'block',\n    );\n\n    input.dispatchEvent(\n        new KeyboardEvent('keydown', {\n          key: 'Enter',\n          bubbles: true,\n          composed: true,\n        }),\n    );\n    assert.strictEqual(\n        window.getComputedStyle(suggestions).display,\n        'none',\n    );\n  });\n\n  it('should close dropdown on focus elsewhere', async () => {\n    const editor = await renderEditor({type: Models.Schema.StepType.Scroll});\n    const button = createFocusOutsideButton();\n\n    const input = getInputByAttribute(editor, 'type');\n    input.focus();\n    input.value = '';\n    await input.updateComplete;\n\n    const suggestions = input.renderRoot.querySelector(\n        'devtools-suggestion-box',\n    );\n    if (!suggestions) {\n      throw new Error('Failed to find element');\n    }\n    assert.strictEqual(\n        window.getComputedStyle(suggestions).display,\n        'block',\n    );\n\n    button.focus();\n    assert.strictEqual(\n        window.getComputedStyle(suggestions).display,\n        'none',\n    );\n  });\n\n  it('should add optional fields', async () => {\n    const editor = await renderEditor({type: Models.Schema.StepType.Scroll});\n    const step = getStepEditedPromise(editor);\n\n    await addOptionalField(editor, 'x');\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.Scroll,\n      x: 0,\n    });\n    assert.deepStrictEqual(getAllInputValues(editor), ['scroll', '0']);\n  });\n\n  it('should add the duration field', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.Click,\n      offsetX: 1,\n      offsetY: 1,\n      selectors: ['.cls'],\n    });\n    const step = getStepEditedPromise(editor);\n\n    await addOptionalField(editor, 'duration');\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.Click,\n      offsetX: 1,\n      offsetY: 1,\n      selectors: ['.cls'],\n      duration: 50,\n    });\n    assert.deepStrictEqual(getAllInputValues(editor), [\n      'click',\n      '.cls',\n      '1',\n      '1',\n      '50',\n    ]);\n  });\n\n  it('should add the parameters field', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.WaitForElement,\n      selectors: ['.cls'],\n    });\n    const step = getStepEditedPromise(editor);\n\n    await addOptionalField(editor, 'properties');\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.WaitForElement,\n      selectors: ['.cls'],\n      properties: {},\n    });\n    assert.deepStrictEqual(getAllInputValues(editor), [\n      'waitForElement',\n      '.cls',\n      '{}',\n    ]);\n  });\n\n  it('should edit timeout fields', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.Navigate,\n      url: 'https://example.com',\n    });\n    const step = getStepEditedPromise(editor);\n\n    await addOptionalField(editor, 'timeout');\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.Navigate,\n      url: 'https://example.com',\n      timeout: 5000,\n    });\n    assert.deepStrictEqual(getAllInputValues(editor), [\n      'navigate',\n      'https://example.com',\n      '5000',\n    ]);\n  });\n\n  it('should delete optional fields', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.Scroll,\n      x: 1,\n    });\n    const step = getStepEditedPromise(editor);\n\n    await deleteOptionalField(editor, 'x');\n\n    assert.deepStrictEqual(await step, {type: Models.Schema.StepType.Scroll});\n    assert.deepStrictEqual(getAllInputValues(editor), ['scroll']);\n  });\n\n  it('should add/remove frames', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.Scroll,\n      frame: [0],\n    });\n    {\n      const step = getStepEditedPromise(editor);\n\n      await clickFrameLevelButton(editor, '.add-frame');\n\n      assert.deepStrictEqual(await step, {\n        type: Models.Schema.StepType.Scroll,\n        frame: [0, 0],\n      });\n      assert.deepStrictEqual(getAllInputValues(editor), ['scroll', '0', '0']);\n\n      assert.isTrue(\n          editor.shadowRoot?.activeElement?.matches(\n              'devtools-suggestion-input[data-path=\"frame.1\"]',\n              ),\n      );\n    }\n    {\n      const step = getStepEditedPromise(editor);\n\n      await clickFrameLevelButton(editor, '.remove-frame');\n\n      assert.deepStrictEqual(await step, {\n        type: Models.Schema.StepType.Scroll,\n        frame: [0],\n      });\n      assert.deepStrictEqual(getAllInputValues(editor), ['scroll', '0']);\n\n      assert.isTrue(\n          editor.shadowRoot?.activeElement?.matches(\n              'devtools-suggestion-input[data-path=\"frame.0\"]',\n              ),\n      );\n    }\n  });\n\n  it('should add/remove selector parts', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.Scroll,\n      selectors: [['.part1']],\n    });\n\n    {\n      const step = getStepEditedPromise(editor);\n\n      await clickSelectorLevelButton(editor, [0, 0], '.add-selector-part');\n\n      assert.deepStrictEqual(await step, {\n        type: Models.Schema.StepType.Scroll,\n        selectors: [['.part1', '.cls']],\n      });\n      assert.deepStrictEqual(getAllInputValues(editor), [\n        'scroll',\n        '.part1',\n        '.cls',\n      ]);\n\n      assert.isTrue(\n          editor.shadowRoot?.activeElement?.matches(\n              'devtools-suggestion-input[data-path=\"selectors.0.1\"]',\n              ),\n      );\n    }\n\n    {\n      const step = getStepEditedPromise(editor);\n\n      await clickSelectorLevelButton(editor, [0, 0], '.remove-selector-part');\n\n      assert.deepStrictEqual(await step, {\n        type: Models.Schema.StepType.Scroll,\n        selectors: ['.cls'],\n      });\n      assert.deepStrictEqual(getAllInputValues(editor), ['scroll', '.cls']);\n\n      assert.isTrue(\n          editor.shadowRoot?.activeElement?.matches(\n              'devtools-suggestion-input[data-path=\"selectors.0.0\"]',\n              ),\n      );\n    }\n  });\n\n  it('should add/remove selectors', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.Scroll,\n      selectors: [['.part1']],\n    });\n    {\n      const step = getStepEditedPromise(editor);\n\n      await clickSelectorLevelButton(editor, [0], '.add-selector');\n\n      assert.deepStrictEqual(await step, {\n        type: Models.Schema.StepType.Scroll,\n        selectors: ['.part1', '.cls'],\n      });\n      assert.deepStrictEqual(getAllInputValues(editor), [\n        'scroll',\n        '.part1',\n        '.cls',\n      ]);\n      assert.isTrue(\n          editor.shadowRoot?.activeElement?.matches(\n              'devtools-suggestion-input[data-path=\"selectors.1.0\"]',\n              ),\n      );\n    }\n    {\n      const step = getStepEditedPromise(editor);\n\n      await clickSelectorLevelButton(editor, [1], '.remove-selector');\n\n      assert.deepStrictEqual(await step, {\n        type: Models.Schema.StepType.Scroll,\n        selectors: ['.part1'],\n      });\n      assert.deepStrictEqual(getAllInputValues(editor), ['scroll', '.part1']);\n      assert.isTrue(\n          editor.shadowRoot?.activeElement?.matches(\n              'devtools-suggestion-input[data-path=\"selectors.0.0\"]',\n              ),\n      );\n    }\n  });\n\n  it('should become readonly if disabled', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.Scroll,\n      selectors: [['.part1']],\n    });\n    editor.disabled = true;\n    await editor.updateComplete;\n\n    for (const input of editor.renderRoot.querySelectorAll(\n             'devtools-suggestion-input',\n             )) {\n      assert.isTrue(input.disabled);\n    }\n  });\n\n  it('clears text selection when navigating away from devtools-suggestion-input', async () => {\n    const editor = await renderEditor({type: Models.Schema.StepType.Scroll});\n\n    // Clicking on the type devtools-suggestion-input should select the entire text in the field.\n    const input = getInputByAttribute(editor, 'type');\n    input.focus();\n    input.click();\n    assert.strictEqual(window.getSelection()?.toString(), 'scroll');\n\n    // Navigating away should remove the selection.\n    dispatchKeyDownEvent(input, {\n      key: 'Enter',\n      bubbles: true,\n      composed: true,\n    });\n    assert.strictEqual(window.getSelection()?.toString(), '');\n  });\n\n  it('should add an attribute after another\\'s deletion', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.WaitForElement,\n      selectors: [['.cls']],\n    });\n\n    await addOptionalField(editor, 'operator');\n    await deleteOptionalField(editor, 'operator');\n    const step = getStepEditedPromise(editor);\n    await addOptionalField(editor, 'count');\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.WaitForElement,\n      selectors: ['.cls'],\n      count: 1,\n    });\n    assert.deepStrictEqual(getAllInputValues(editor), [\n      'waitForElement',\n      '.cls',\n      '1',\n    ]);\n  });\n\n  it('should edit asserted events', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.Navigate,\n      url: 'www.example.com',\n      assertedEvents: [{\n        type: 'navigation' as Models.Schema.AssertedEventType,\n        title: 'Test',\n        url: 'www.example.com',\n      }],\n    });\n\n    const step = getStepEditedPromise(editor);\n\n    const input = getInputByAttribute(editor, 'assertedEvents');\n    input.focus();\n    input.value = 'None';\n    await input.updateComplete;\n\n    input.dispatchEvent(\n        new KeyboardEvent('keydown', {\n          key: 'Enter',\n          bubbles: true,\n          composed: true,\n        }),\n    );\n    await editor.updateComplete;\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.Navigate,\n      url: 'www.example.com',\n      assertedEvents: [{\n        type: 'navigation' as Models.Schema.AssertedEventType,\n        title: 'None',\n        url: 'www.example.com',\n      }],\n    });\n  });\n\n  it('should add/remove attribute assertion', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.WaitForElement,\n      selectors: ['.part1'],\n      attributes: {\n        a: 'b',\n      },\n    });\n    {\n      const step = getStepEditedPromise(editor);\n\n      editor.renderRoot.querySelectorAll<HTMLElement>('.add-attribute-assertion')[0]?.click();\n\n      assert.deepStrictEqual(await step, {\n        type: Models.Schema.StepType.WaitForElement,\n        selectors: ['.part1'],\n        attributes: {a: 'b', attribute: 'value'},\n      });\n      assert.deepStrictEqual(getAllInputValues(editor), [\n        'waitForElement',\n        '.part1',\n        'a',\n        'b',\n        'attribute',\n        'value',\n      ]);\n    }\n    {\n      const step = getStepEditedPromise(editor);\n\n      editor.renderRoot.querySelectorAll<HTMLElement>('.remove-attribute-assertion')[1]?.click();\n\n      assert.deepStrictEqual(await step, {\n        type: Models.Schema.StepType.WaitForElement,\n        selectors: ['.part1'],\n        attributes: {a: 'b'},\n      });\n      assert.deepStrictEqual(getAllInputValues(editor), [\n        'waitForElement',\n        '.part1',\n        'a',\n        'b',\n      ]);\n    }\n  });\n\n  it('should edit attribute assertion', async () => {\n    const editor = await renderEditor({\n      type: Models.Schema.StepType.WaitForElement,\n      selectors: ['.part1'],\n      attributes: {\n        a: 'b',\n      },\n    });\n\n    const step = getStepEditedPromise(editor);\n\n    const input = getInputByAttribute(editor, 'attributes');\n    input.focus();\n    input.value = 'innerText';\n    await input.updateComplete;\n\n    input.dispatchEvent(\n        new KeyboardEvent('keydown', {\n          key: 'Enter',\n          bubbles: true,\n          composed: true,\n        }),\n    );\n    await editor.updateComplete;\n\n    assert.deepStrictEqual(await step, {\n      type: Models.Schema.StepType.WaitForElement,\n      selectors: ['.part1'],\n      attributes: {\n        innerText: 'b',\n      },\n    });\n  });\n});\n"]}