{"version":3,"file":"RecordingListView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/recorder/components/RecordingListView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Models from '../models/models.js';\nimport * as Actions from '../recorder-actions/recorder-actions.js';\n\nimport recordingListViewStyles from './recordingListView.css.js';\n\nconst UIStrings = {\n  /**\n   *@description The title of the page that contains a list of saved recordings that the user has..\n   */\n  savedRecordings: 'Saved recordings',\n  /**\n   * @description The title of the button that leads to create a new recording page.\n   */\n  createRecording: 'Create a new recording',\n  /**\n   * @description The title of the button that is shown next to each of the recordings and that triggers playing of the recording.\n   */\n  playRecording: 'Play recording',\n  /**\n   * @description The title of the button that is shown next to each of the recordings and that triggers deletion of the recording.\n   */\n  deleteRecording: 'Delete recording',\n  /**\n   * @description The title of the row corresponding to a recording. By clicking on the row, the user open the recording for editing.\n   */\n  openRecording: 'Open recording',\n};\nconst str_ = i18n.i18n.registerUIStrings(\n    'panels/recorder/components/RecordingListView.ts',\n    UIStrings,\n);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-recording-list-view': RecordingListView;\n  }\n\n  interface HTMLElementEventMap {\n    openrecording: OpenRecordingEvent;\n    deleterecording: DeleteRecordingEvent;\n  }\n}\n\nexport class CreateRecordingEvent extends Event {\n  static readonly eventName = 'createrecording';\n  constructor() {\n    super(CreateRecordingEvent.eventName);\n  }\n}\n\nexport class DeleteRecordingEvent extends Event {\n  static readonly eventName = 'deleterecording';\n  constructor(public storageName: string) {\n    super(DeleteRecordingEvent.eventName);\n  }\n}\n\nexport class OpenRecordingEvent extends Event {\n  static readonly eventName = 'openrecording';\n  constructor(public storageName: string) {\n    super(OpenRecordingEvent.eventName);\n  }\n}\n\nexport class PlayRecordingEvent extends Event {\n  static readonly eventName = 'playrecording';\n  constructor(public storageName: string) {\n    super(PlayRecordingEvent.eventName);\n  }\n}\n\ninterface Recording {\n  storageName: string;\n  name: string;\n}\n\nexport class RecordingListView extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-recording-list-view`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  readonly #props: {recordings: Recording[], replayAllowed: boolean} = {\n    recordings: [],\n    replayAllowed: true,\n  };\n\n  constructor() {\n    super();\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [recordingListViewStyles];\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  set recordings(recordings: Recording[]) {\n    this.#props.recordings = recordings;\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  set replayAllowed(value: boolean) {\n    this.#props.replayAllowed = value;\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  #onCreateClick(): void {\n    this.dispatchEvent(new CreateRecordingEvent());\n  }\n\n  #onDeleteClick(storageName: string, event: Event): void {\n    event.stopPropagation();\n    this.dispatchEvent(new DeleteRecordingEvent(storageName));\n  }\n\n  #onOpenClick(storageName: string, event: Event): void {\n    event.stopPropagation();\n    this.dispatchEvent(new OpenRecordingEvent(storageName));\n  }\n\n  #onPlayRecordingClick(storageName: string, event: Event): void {\n    event.stopPropagation();\n    this.dispatchEvent(new PlayRecordingEvent(storageName));\n  }\n\n  #onKeyDown(storageName: string, event: Event): void {\n    if ((event as KeyboardEvent).key !== 'Enter') {\n      return;\n    }\n    this.#onOpenClick(storageName, event);\n  }\n\n  #stopPropagation(event: Event): void {\n    event.stopPropagation();\n  }\n\n  #render = (): void => {\n    // clang-format off\n    LitHtml.render(\n      LitHtml.html`\n        <div class=\"wrapper\">\n          <div class=\"header\">\n            <h1>${i18nString(UIStrings.savedRecordings)}</h1>\n            <${Buttons.Button.Button.litTagName}\n              .variant=${Buttons.Button.Variant.PRIMARY}\n              @click=${this.#onCreateClick}\n              title=${Models.Tooltip.getTooltipForActions(\n                i18nString(UIStrings.createRecording),\n                Actions.RecorderActions.CreateRecording,\n              )}\n              .jslogContext=${'create-recording'}\n            >\n              ${i18nString(UIStrings.createRecording)}\n            </${Buttons.Button.Button.litTagName}>\n          </div>\n          <div class=\"table\">\n            ${this.#props.recordings.map(recording => {\n              return LitHtml.html`\n                  <div\n                    role=\"button\"\n                    tabindex=\"0\"\n                    aria-label=${i18nString(UIStrings.openRecording)}\n                    class=\"row\"\n                    @keydown=${this.#onKeyDown.bind(\n                      this,\n                      recording.storageName,\n                    )}\n                    @click=${this.#onOpenClick.bind(\n                      this,\n                      recording.storageName,\n                    )}\n                    jslog=${VisualLogging.item()\n                      .track({ click: true })\n                      .context('recording')}>\n                    <div class=\"icon\">\n                      <${IconButton.Icon.Icon.litTagName} name=\"flow\">\n                      </${IconButton.Icon.Icon.litTagName}>\n                    </div>\n                    <div class=\"title\">${recording.name}</div>\n                    <div class=\"actions\">\n                      ${\n                        this.#props.replayAllowed\n                          ? LitHtml.html`\n                              <${Buttons.Button.Button.litTagName}\n                                title=${i18nString(UIStrings.playRecording)}\n                                .data=${\n                                  {\n                                    variant: Buttons.Button.Variant.ICON,\n                                    iconName: 'play',\n                                     jslogContext: 'play-recording',\n                                  } as Buttons.Button.ButtonData\n                                }\n                                @click=${this.#onPlayRecordingClick.bind(\n                                  this,\n                                  recording.storageName,\n                                )}\n                                @keydown=${this.#stopPropagation}\n                              ></${Buttons.Button.Button.litTagName}>\n                              <div class=\"divider\"></div>`\n                          : ''\n                      }\n                      <${Buttons.Button.Button.litTagName}\n                        class=\"delete-recording-button\"\n                        title=${i18nString(UIStrings.deleteRecording)}\n                        .data=${\n                          {\n                            variant: Buttons.Button.Variant.ICON,\n                            iconName: 'bin',\n                            jslogContext: 'delete-recording',\n                          } as Buttons.Button.ButtonData\n                        }\n                        @click=${this.#onDeleteClick.bind(\n                          this,\n                          recording.storageName,\n                        )}\n                        @keydown=${this.#stopPropagation}\n                      ></${Buttons.Button.Button.litTagName}>\n                    </div>\n                  </div>\n                `;\n            })}\n          </div>\n        </div>\n      `,\n      this.#shadow,\n      { host: this },\n    );\n    // clang-format on\n  };\n}\n\ncustomElements.define(\n    'devtools-recording-list-view',\n    RecordingListView,\n);\n"]}