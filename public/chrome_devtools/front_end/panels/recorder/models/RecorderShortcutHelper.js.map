{"version":3,"file":"RecorderShortcutHelper.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/recorder/models/RecorderShortcutHelper.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,EAAE,MAAM,8BAA8B,CAAC;AAEnD,MAAM,OAAO,sBAAsB;IACjC,gBAAgB,CAAkB;IAClC,UAAU,GAAwB,IAAI,CAAC;IACvC,QAAQ,CAAS;IAEjB,YAAY,OAAO,GAAG,GAAG;QACvB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,gBAAgB,GAAG,IAAI,eAAe,EAAE,CAAC;IAChD,CAAC;IAED,eAAe;QACb,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;QAC9B,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;YACpB,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAChC,CAAC;QACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,eAAe,EAAE,CAAC;IAChD,CAAC;IAED,eAAe,CAAC,QAAoB;QAClC,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,KAAK,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,cAAc,CAAC,QAAoB;QACjC,IAAI,CAAC,eAAe,EAAE,CAAC;QAEvB,QAAQ,CAAC,gBAAgB,CACrB,OAAO,EACP,KAAK,CAAC,EAAE;YACN,IAAI,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,KAAK,CAAC,EAAE,CAAC;gBAC1E,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;YACjC,CAAC;QACH,CAAC,EACD,EAAC,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAC,CACzC,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG,UAAU,CACxB,GAAG,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,EACpC,IAAI,CAAC,QAAQ,CAChB,CAAC;IACJ,CAAC;CACF","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as UI from '../../../ui/legacy/legacy.js';\n\nexport class RecorderShortcutHelper {\n  #abortController: AbortController;\n  #timeoutId: NodeJS.Timeout|null = null;\n  #timeout: number;\n\n  constructor(timeout = 200) {\n    this.#timeout = timeout;\n    this.#abortController = new AbortController();\n  }\n\n  #cleanInternals(): void {\n    this.#abortController.abort();\n    if (this.#timeoutId) {\n      clearTimeout(this.#timeoutId);\n    }\n    this.#abortController = new AbortController();\n  }\n\n  #handleCallback(callback: () => void): void {\n    this.#cleanInternals();\n    void callback();\n  }\n\n  handleShortcut(callback: () => void): void {\n    this.#cleanInternals();\n\n    document.addEventListener(\n        'keyup',\n        event => {\n          if (UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlEquivalentKey(event)) {\n            this.#handleCallback(callback);\n          }\n        },\n        {signal: this.#abortController.signal},\n    );\n\n    this.#timeoutId = setTimeout(\n        () => this.#handleCallback(callback),\n        this.#timeout,\n    );\n  }\n}\n"]}