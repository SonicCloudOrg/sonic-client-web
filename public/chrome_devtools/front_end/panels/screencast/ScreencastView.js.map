{"version":3,"file":"ScreencastView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/screencast/ScreencastView.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {InputModel} from './InputModel.js';\nimport screencastViewStyles from './screencastView.css.js';\n\nconst UIStrings = {\n  /**\n   *@description Accessible alt text for the screencast canvas rendering of the debug target webpage\n   */\n  screencastViewOfDebugTarget: 'Screencast view of debug target',\n  /**\n   *@description Glass pane element text content in Screencast View of the Remote Devices tab when toggling screencast\n   */\n  theTabIsInactive: 'The tab is inactive',\n  /**\n   *@description Glass pane element text content in Screencast View of the Remote Devices tab when toggling screencast\n   */\n  profilingInProgress: 'Profiling in progress',\n  /**\n   *@description Accessible text for the screencast back button\n   */\n  back: 'back',\n  /**\n   *@description Accessible text for the screencast forward button\n   */\n  forward: 'forward',\n  /**\n   *@description Accessible text for the screencast reload button\n   */\n  reload: 'reload',\n  /**\n   *@description Accessible text for the address bar in screencast view\n   */\n  addressBar: 'Address bar',\n  /**\n   *@description Accessible text for the touch emulation button.\n   */\n  touchInput: 'Use touch',\n  /**\n   *@description Accessible text for the mouse emulation button.\n   */\n  mouseInput: 'Use mouse',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/screencast/ScreencastView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ninterface Point {\n  x: number;\n  y: number;\n}\n\nexport class ScreencastView extends UI.Widget.VBox implements SDK.OverlayModel.Highlighter {\n  private readonly screenCaptureModel: SDK.ScreenCaptureModel.ScreenCaptureModel;\n  private domModel: SDK.DOMModel.DOMModel|null;\n  private readonly overlayModel: SDK.OverlayModel.OverlayModel|null;\n  private resourceTreeModel: SDK.ResourceTreeModel.ResourceTreeModel|null;\n  private networkManager: SDK.NetworkManager.NetworkManager|null;\n  private readonly inputModel: InputModel|null;\n  private shortcuts: {[x: number]: (arg0?: Event|undefined) => boolean};\n  private scrollOffsetX: number;\n  private scrollOffsetY: number;\n  private screenZoom: number;\n  private screenOffsetTop: number;\n  private pageScaleFactor: number;\n  private imageElement!: HTMLImageElement;\n  private viewportElement!: HTMLElement;\n  private glassPaneElement!: HTMLElement;\n  private canvasElement!: HTMLCanvasElement;\n  private titleElement!: HTMLElement;\n  private context!: CanvasRenderingContext2D;\n  private imageZoom: number;\n  private tagNameElement!: HTMLElement;\n  private attributeElement!: HTMLElement;\n  private nodeWidthElement!: HTMLElement;\n  private nodeHeightElement!: HTMLElement;\n  private model!: Protocol.DOM.BoxModel|null;\n  private highlightConfig!: Protocol.Overlay.HighlightConfig|null;\n  private navigationUrl!: HTMLInputElement;\n  private navigationBack!: HTMLButtonElement;\n  private navigationForward!: HTMLButtonElement;\n  private canvasContainerElement?: HTMLElement;\n  private isCasting?: boolean;\n  private checkerboardPattern?: CanvasPattern|null;\n  private targetInactive?: boolean;\n  private deferredCasting?: number;\n  private highlightNode?: SDK.DOMModel.DOMNode|null;\n  private config?: Protocol.Overlay.HighlightConfig|null;\n  private node?: SDK.DOMModel.DOMNode|null;\n  private inspectModeConfig?: Protocol.Overlay.HighlightConfig|null;\n  private navigationBar?: HTMLElement;\n  private navigationReload?: HTMLElement;\n  private navigationProgressBar?: ProgressTracker;\n  private touchInputToggle?: HTMLButtonElement;\n  private mouseInputToggle?: HTMLButtonElement;\n  private touchInputToggleIcon?: IconButton.Icon.Icon;\n  private mouseInputToggleIcon?: IconButton.Icon.Icon;\n  private historyIndex?: number;\n  private historyEntries?: Protocol.Page.NavigationEntry[];\n  constructor(screenCaptureModel: SDK.ScreenCaptureModel.ScreenCaptureModel) {\n    super();\n    this.screenCaptureModel = screenCaptureModel;\n    this.domModel = screenCaptureModel.target().model(SDK.DOMModel.DOMModel);\n    this.overlayModel = screenCaptureModel.target().model(SDK.OverlayModel.OverlayModel);\n    this.resourceTreeModel = screenCaptureModel.target().model(SDK.ResourceTreeModel.ResourceTreeModel);\n    this.networkManager = screenCaptureModel.target().model(SDK.NetworkManager.NetworkManager);\n    this.inputModel = screenCaptureModel.target().model(InputModel);\n\n    this.setMinimumSize(150, 150);\n\n    this.shortcuts = {} as {\n      [x: number]: (arg0?: Event|undefined) => boolean,\n    };\n    this.scrollOffsetX = 0;\n    this.scrollOffsetY = 0;\n    this.screenZoom = 1;\n    this.screenOffsetTop = 0;\n    this.pageScaleFactor = 1;\n    this.imageZoom = 1;\n  }\n\n  initialize(): void {\n    this.element.classList.add('screencast');\n\n    this.createNavigationBar();\n    this.viewportElement = this.element.createChild('div', 'screencast-viewport hidden') as HTMLElement;\n    this.canvasContainerElement = this.viewportElement.createChild('div', 'screencast-canvas-container') as HTMLElement;\n    this.glassPaneElement =\n        this.canvasContainerElement.createChild('div', 'screencast-glasspane fill hidden') as HTMLElement;\n    this.canvasElement = this.canvasContainerElement.createChild('canvas') as HTMLCanvasElement;\n    UI.ARIAUtils.setLabel(this.canvasElement, i18nString(UIStrings.screencastViewOfDebugTarget));\n    this.canvasElement.tabIndex = 0;\n    this.canvasElement.addEventListener('mousedown', this.handleMouseEvent.bind(this), false);\n    this.canvasElement.addEventListener('mouseup', this.handleMouseEvent.bind(this), false);\n    this.canvasElement.addEventListener('mousemove', this.handleMouseEvent.bind(this), false);\n    this.canvasElement.addEventListener('wheel', this.handleWheelEvent.bind(this), false);\n    this.canvasElement.addEventListener('click', this.handleMouseEvent.bind(this), false);\n    this.canvasElement.addEventListener('contextmenu', this.handleContextMenuEvent.bind(this), false);\n    this.canvasElement.addEventListener('keydown', this.handleKeyEvent.bind(this), false);\n    this.canvasElement.addEventListener('keyup', this.handleKeyEvent.bind(this), false);\n    this.canvasElement.addEventListener('keypress', this.handleKeyEvent.bind(this), false);\n    this.canvasElement.addEventListener('blur', this.handleBlurEvent.bind(this), false);\n    this.titleElement =\n        this.canvasContainerElement.createChild('div', 'screencast-element-title monospace hidden') as HTMLElement;\n    this.tagNameElement = this.titleElement.createChild('span', 'screencast-tag-name') as HTMLElement;\n    this.attributeElement = this.titleElement.createChild('span', 'screencast-attribute') as HTMLElement;\n    UI.UIUtils.createTextChild(this.titleElement, ' ');\n    const dimension = this.titleElement.createChild('span', 'screencast-dimension') as HTMLElement;\n    this.nodeWidthElement = dimension.createChild('span') as HTMLElement;\n    UI.UIUtils.createTextChild(dimension, ' × ');\n    this.nodeHeightElement = dimension.createChild('span') as HTMLElement;\n    this.titleElement.style.top = '0';\n    this.titleElement.style.left = '0';\n\n    this.imageElement = new Image();\n    this.isCasting = false;\n    this.context = this.canvasElement.getContext('2d') as CanvasRenderingContext2D;\n    this.checkerboardPattern = this.createCheckerboardPattern(this.context);\n\n    this.shortcuts[UI.KeyboardShortcut.KeyboardShortcut.makeKey('l', UI.KeyboardShortcut.Modifiers.Ctrl)] =\n        this.focusNavigationBar.bind(this);\n\n    SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.SuspendStateChanged, this.onSuspendStateChange, this);\n    this.updateGlasspane();\n  }\n\n  override wasShown(): void {\n    this.startCasting();\n    this.registerCSSFiles([screencastViewStyles]);\n  }\n\n  override willHide(): void {\n    this.stopCasting();\n  }\n\n  private startCasting(): void {\n    if (SDK.TargetManager.TargetManager.instance().allTargetsSuspended()) {\n      return;\n    }\n    if (this.isCasting) {\n      return;\n    }\n    this.isCasting = true;\n\n    const maxImageDimension = 2048;\n    const dimensions = this.viewportDimensions();\n    if (dimensions.width < 0 || dimensions.height < 0) {\n      this.isCasting = false;\n      return;\n    }\n    dimensions.width *= window.devicePixelRatio;\n    dimensions.height *= window.devicePixelRatio;\n    // Note: startScreencast width and height are expected to be integers so must be floored.\n    this.screenCaptureModel.startScreencast(\n        Protocol.Page.StartScreencastRequestFormat.Jpeg, 80, Math.floor(Math.min(maxImageDimension, dimensions.width)),\n        Math.floor(Math.min(maxImageDimension, dimensions.height)), undefined, this.screencastFrame.bind(this),\n        this.screencastVisibilityChanged.bind(this));\n    if (this.overlayModel) {\n      this.overlayModel.setHighlighter(this);\n    }\n  }\n\n  private stopCasting(): void {\n    if (!this.isCasting) {\n      return;\n    }\n    this.isCasting = false;\n    this.screenCaptureModel.stopScreencast();\n    for (const emulationModel of SDK.TargetManager.TargetManager.instance().models(SDK.EmulationModel.EmulationModel)) {\n      void emulationModel.overrideEmulateTouch(false);\n    }\n    if (this.overlayModel) {\n      this.overlayModel.setHighlighter(null);\n    }\n  }\n\n  private screencastFrame(base64Data: string, metadata: Protocol.Page.ScreencastFrameMetadata): void {\n    this.imageElement.onload = () => {\n      this.pageScaleFactor = metadata.pageScaleFactor;\n      this.screenOffsetTop = metadata.offsetTop;\n      this.scrollOffsetX = metadata.scrollOffsetX;\n      this.scrollOffsetY = metadata.scrollOffsetY;\n\n      const deviceSizeRatio = metadata.deviceHeight / metadata.deviceWidth;\n      const dimensionsCSS = this.viewportDimensions();\n\n      this.imageZoom = Math.min(\n          dimensionsCSS.width / this.imageElement.naturalWidth,\n          dimensionsCSS.height / (this.imageElement.naturalWidth * deviceSizeRatio));\n      this.viewportElement.classList.remove('hidden');\n      const bordersSize = BORDERS_SIZE;\n      if (this.imageZoom < 1.01 / window.devicePixelRatio) {\n        this.imageZoom = 1 / window.devicePixelRatio;\n      }\n      this.screenZoom = this.imageElement.naturalWidth * this.imageZoom / metadata.deviceWidth;\n      this.viewportElement.style.width = metadata.deviceWidth * this.screenZoom + bordersSize + 'px';\n      this.viewportElement.style.height = metadata.deviceHeight * this.screenZoom + bordersSize + 'px';\n\n      const data = this.highlightNode ? {node: this.highlightNode, selectorList: undefined} : {clear: true};\n      void this.updateHighlightInOverlayAndRepaint(data, this.highlightConfig);\n    };\n    this.imageElement.src = 'data:image/jpg;base64,' + base64Data;\n  }\n\n  private isGlassPaneActive(): boolean {\n    return !this.glassPaneElement.classList.contains('hidden');\n  }\n\n  private screencastVisibilityChanged(visible: boolean): void {\n    this.targetInactive = !visible;\n    this.updateGlasspane();\n  }\n\n  private onSuspendStateChange(): void {\n    if (SDK.TargetManager.TargetManager.instance().allTargetsSuspended()) {\n      this.stopCasting();\n    } else {\n      this.startCasting();\n    }\n    this.updateGlasspane();\n  }\n\n  private updateGlasspane(): void {\n    if (this.targetInactive) {\n      this.glassPaneElement.textContent = i18nString(UIStrings.theTabIsInactive);\n      this.glassPaneElement.classList.remove('hidden');\n    } else if (SDK.TargetManager.TargetManager.instance().allTargetsSuspended()) {\n      this.glassPaneElement.textContent = i18nString(UIStrings.profilingInProgress);\n      this.glassPaneElement.classList.remove('hidden');\n    } else {\n      this.glassPaneElement.classList.add('hidden');\n    }\n  }\n\n  private async handleMouseEvent(event: MouseEvent): Promise<void> {\n    if (this.isGlassPaneActive()) {\n      event.consume();\n      return;\n    }\n    if (!this.pageScaleFactor || !this.domModel) {\n      return;\n    }\n    if (!this.inspectModeConfig) {\n      if (this.inputModel) {\n        this.inputModel.emitMouseEvent(event, this.screenOffsetTop, this.screenZoom);\n      }\n      event.preventDefault();\n      if (event.type === 'mousedown') {\n        this.canvasElement.focus();\n      }\n      return;\n    }\n\n    const position = this.convertIntoScreenSpace(event as MouseEvent);\n    const node = await this.domModel.nodeForLocation(\n        Math.floor(position.x / this.pageScaleFactor + this.scrollOffsetX),\n        Math.floor(position.y / this.pageScaleFactor + this.scrollOffsetY),\n        Common.Settings.Settings.instance().moduleSetting('show-ua-shadow-dom').get());\n    if (!node) {\n      return;\n    }\n\n    if (event.type === 'mousemove') {\n      void this.updateHighlightInOverlayAndRepaint({node, selectorList: undefined}, this.inspectModeConfig);\n      this.domModel.overlayModel().nodeHighlightRequested({nodeId: node.id});\n    } else if (event.type === 'click') {\n      this.domModel.overlayModel().inspectNodeRequested({backendNodeId: node.backendNodeId()});\n    }\n  }\n\n  private async handleWheelEvent(event: WheelEvent): Promise<void> {\n    if (this.isGlassPaneActive()) {\n      event.consume();\n      return;\n    }\n    if (!this.pageScaleFactor || !this.domModel) {\n      return;\n    }\n    if (this.inputModel) {\n      this.inputModel.emitWheelEvent(event, this.screenOffsetTop, this.screenZoom);\n    }\n    event.preventDefault();\n  }\n\n  private handleKeyEvent(event: KeyboardEvent): void {\n    if (this.isGlassPaneActive()) {\n      event.consume();\n      return;\n    }\n\n    const shortcutKey = UI.KeyboardShortcut.KeyboardShortcut.makeKeyFromEvent(event as KeyboardEvent);\n    const handler = this.shortcuts[shortcutKey];\n    if (handler && handler(event)) {\n      event.consume();\n      return;\n    }\n\n    if (this.inputModel) {\n      this.inputModel.emitKeyEvent(event);\n    }\n    event.consume();\n    this.canvasElement.focus();\n  }\n\n  private handleBlurEvent(): void {\n    if (this.inputModel && this.mouseInputToggle?.disabled) {\n      const event = new MouseEvent('mouseup');\n      this.inputModel.emitMouseEvent(event, this.screenOffsetTop, this.screenZoom);\n    }\n  }\n\n  private handleContextMenuEvent(event: Event): void {\n    event.consume(true);\n  }\n\n  private convertIntoScreenSpace(event: MouseEvent): Point {\n    return {\n      x: Math.round(event.offsetX / this.screenZoom),\n      y: Math.round(event.offsetY / this.screenZoom - this.screenOffsetTop),\n    };\n  }\n\n  override onResize(): void {\n    if (this.deferredCasting) {\n      clearTimeout(this.deferredCasting);\n      delete this.deferredCasting;\n    }\n\n    this.stopCasting();\n    this.deferredCasting = window.setTimeout(this.startCasting.bind(this), 100);\n  }\n\n  highlightInOverlay(data: SDK.OverlayModel.HighlightData, config: Protocol.Overlay.HighlightConfig|null): void {\n    void this.updateHighlightInOverlayAndRepaint(data, config);\n  }\n\n  private async updateHighlightInOverlayAndRepaint(\n      data: SDK.OverlayModel.HighlightData, config: Protocol.Overlay.HighlightConfig|null): Promise<void> {\n    let node: SDK.DOMModel.DOMNode|null = null;\n    if ('node' in data) {\n      node = data.node;\n    }\n    if (!node && 'deferredNode' in data) {\n      node = await data.deferredNode.resolvePromise();\n    }\n    if (!node && 'object' in data) {\n      const domModel = data.object.runtimeModel().target().model(SDK.DOMModel.DOMModel);\n      if (domModel) {\n        node = await domModel.pushObjectAsNodeToFrontend(data.object);\n      }\n    }\n\n    this.highlightNode = node;\n    this.highlightConfig = config;\n    if (!node) {\n      this.model = null;\n      this.config = null;\n      this.node = null;\n      this.titleElement.classList.add('hidden');\n      this.repaint();\n      return;\n    }\n\n    this.node = node;\n    void node.boxModel().then(model => {\n      if (!model || !this.pageScaleFactor) {\n        this.repaint();\n        return;\n      }\n      this.model = this.scaleModel(model);\n      this.config = config;\n      this.repaint();\n    });\n  }\n\n  private scaleModel(model: Protocol.DOM.BoxModel): Protocol.DOM.BoxModel {\n    function scaleQuad(this: ScreencastView, quad: Protocol.DOM.Quad): void {\n      for (let i = 0; i < quad.length; i += 2) {\n        quad[i] = quad[i] * this.pageScaleFactor * this.screenZoom;\n        quad[i + 1] = (quad[i + 1] * this.pageScaleFactor + this.screenOffsetTop) * this.screenZoom;\n      }\n    }\n\n    scaleQuad.call(this, model.content);\n    scaleQuad.call(this, model.padding);\n    scaleQuad.call(this, model.border);\n    scaleQuad.call(this, model.margin);\n    return model;\n  }\n\n  private repaint(): void {\n    const model = this.model;\n    const config = this.config;\n\n    const canvasWidth = this.canvasElement.getBoundingClientRect().width;\n    const canvasHeight = this.canvasElement.getBoundingClientRect().height;\n    this.canvasElement.width = window.devicePixelRatio * canvasWidth;\n    this.canvasElement.height = window.devicePixelRatio * canvasHeight;\n\n    this.context.save();\n    this.context.scale(window.devicePixelRatio, window.devicePixelRatio);\n\n    // Paint top and bottom gutter.\n    this.context.save();\n    if (this.checkerboardPattern) {\n      this.context.fillStyle = this.checkerboardPattern;\n    }\n    this.context.fillRect(0, 0, canvasWidth, this.screenOffsetTop * this.screenZoom);\n    this.context.fillRect(\n        0, this.screenOffsetTop * this.screenZoom + this.imageElement.naturalHeight * this.imageZoom, canvasWidth,\n        canvasHeight);\n    this.context.restore();\n\n    if (model && config) {\n      this.context.save();\n      const quads = [];\n      const isTransparent = (color: Protocol.DOM.RGBA): boolean => Boolean(color.a && color.a === 0);\n      if (model.content && config.contentColor && !isTransparent(config.contentColor)) {\n        quads.push({quad: model.content, color: config.contentColor});\n      }\n      if (model.padding && config.paddingColor && !isTransparent(config.paddingColor)) {\n        quads.push({quad: model.padding, color: config.paddingColor});\n      }\n      if (model.border && config.borderColor && !isTransparent(config.borderColor)) {\n        quads.push({quad: model.border, color: config.borderColor});\n      }\n      if (model.margin && config.marginColor && !isTransparent(config.marginColor)) {\n        quads.push({quad: model.margin, color: config.marginColor});\n      }\n\n      for (let i = quads.length - 1; i > 0; --i) {\n        this.drawOutlinedQuadWithClip(quads[i].quad, quads[i - 1].quad, quads[i].color);\n      }\n      if (quads.length > 0) {\n        this.drawOutlinedQuad(quads[0].quad, quads[0].color);\n      }\n      this.context.restore();\n\n      this.drawElementTitle();\n\n      this.context.globalCompositeOperation = 'destination-over';\n    }\n\n    this.context.drawImage(\n        this.imageElement, 0, this.screenOffsetTop * this.screenZoom, this.imageElement.naturalWidth * this.imageZoom,\n        this.imageElement.naturalHeight * this.imageZoom);\n    this.context.restore();\n  }\n\n  private cssColor(color: Protocol.DOM.RGBA): string {\n    if (!color) {\n      return 'transparent';\n    }\n    return Common.Color.Legacy.fromRGBA([color.r, color.g, color.b, color.a !== undefined ? color.a : 1])\n               .asString(Common.Color.Format.RGBA) ||\n        '';\n  }\n\n  private quadToPath(quad: Protocol.DOM.Quad): CanvasRenderingContext2D {\n    this.context.beginPath();\n    this.context.moveTo(quad[0], quad[1]);\n    this.context.lineTo(quad[2], quad[3]);\n    this.context.lineTo(quad[4], quad[5]);\n    this.context.lineTo(quad[6], quad[7]);\n    this.context.closePath();\n    return this.context;\n  }\n\n  private drawOutlinedQuad(quad: Protocol.DOM.Quad, fillColor: Protocol.DOM.RGBA): void {\n    this.context.save();\n    this.context.lineWidth = 2;\n    this.quadToPath(quad).clip();\n    this.context.fillStyle = this.cssColor(fillColor);\n    this.context.fill();\n    this.context.restore();\n  }\n\n  private drawOutlinedQuadWithClip(quad: Protocol.DOM.Quad, clipQuad: Protocol.DOM.Quad, fillColor: Protocol.DOM.RGBA):\n      void {\n    this.context.fillStyle = this.cssColor(fillColor);\n    this.context.save();\n    this.context.lineWidth = 0;\n    this.quadToPath(quad).fill();\n    this.context.globalCompositeOperation = 'destination-out';\n    this.context.fillStyle = 'red';\n    this.quadToPath(clipQuad).fill();\n    this.context.restore();\n  }\n\n  private drawElementTitle(): void {\n    if (!this.node) {\n      return;\n    }\n\n    const canvasWidth = this.canvasElement.getBoundingClientRect().width;\n    const canvasHeight = this.canvasElement.getBoundingClientRect().height;\n\n    const lowerCaseName = this.node.localName() || this.node.nodeName().toLowerCase();\n    this.tagNameElement.textContent = lowerCaseName;\n\n    this.attributeElement.textContent = getAttributesForElementTitle(this.node);\n    this.nodeWidthElement.textContent = String(this.model ? this.model.width : 0);\n    this.nodeHeightElement.textContent = String(this.model ? this.model.height : 0);\n\n    this.titleElement.classList.remove('hidden');\n    const titleWidth = this.titleElement.offsetWidth + 6;\n    const titleHeight = this.titleElement.offsetHeight + 4;\n\n    const anchorTop = this.model ? this.model.margin[1] : 0;\n    const anchorBottom = this.model ? this.model.margin[7] : 0;\n\n    const arrowHeight = 7;\n    let renderArrowUp = false;\n    let renderArrowDown = false;\n\n    let boxX = Math.max(2, this.model ? this.model.margin[0] : 0);\n    if (boxX + titleWidth > canvasWidth) {\n      boxX = canvasWidth - titleWidth - 2;\n    }\n\n    let boxY;\n    if (anchorTop > canvasHeight) {\n      boxY = canvasHeight - titleHeight - arrowHeight;\n      renderArrowDown = true;\n    } else if (anchorBottom < 0) {\n      boxY = arrowHeight;\n      renderArrowUp = true;\n    } else if (anchorBottom + titleHeight + arrowHeight < canvasHeight) {\n      boxY = anchorBottom + arrowHeight - 4;\n      renderArrowUp = true;\n    } else if (anchorTop - titleHeight - arrowHeight > 0) {\n      boxY = anchorTop - titleHeight - arrowHeight + 3;\n      renderArrowDown = true;\n    } else {\n      boxY = arrowHeight;\n    }\n\n    this.context.save();\n    this.context.translate(0.5, 0.5);\n    this.context.beginPath();\n    this.context.moveTo(boxX, boxY);\n    if (renderArrowUp) {\n      this.context.lineTo(boxX + 2 * arrowHeight, boxY);\n      this.context.lineTo(boxX + 3 * arrowHeight, boxY - arrowHeight);\n      this.context.lineTo(boxX + 4 * arrowHeight, boxY);\n    }\n    this.context.lineTo(boxX + titleWidth, boxY);\n    this.context.lineTo(boxX + titleWidth, boxY + titleHeight);\n    if (renderArrowDown) {\n      this.context.lineTo(boxX + 4 * arrowHeight, boxY + titleHeight);\n      this.context.lineTo(boxX + 3 * arrowHeight, boxY + titleHeight + arrowHeight);\n      this.context.lineTo(boxX + 2 * arrowHeight, boxY + titleHeight);\n    }\n    this.context.lineTo(boxX, boxY + titleHeight);\n    this.context.closePath();\n    this.context.fillStyle = 'var(--sys-color-yellow-container)';\n    this.context.fill();\n    this.context.strokeStyle = 'var(--sys-color-outline)';\n    this.context.stroke();\n\n    this.context.restore();\n\n    this.titleElement.style.top = (boxY + 3) + 'px';\n    this.titleElement.style.left = (boxX + 3) + 'px';\n  }\n\n  private viewportDimensions(): {width: number, height: number} {\n    const gutterSize = 30;\n    const bordersSize = BORDERS_SIZE;\n    const width = this.element.offsetWidth - bordersSize - gutterSize;\n    const height = this.element.offsetHeight - bordersSize - gutterSize - NAVBAR_HEIGHT;\n    return {width: width, height: height};\n  }\n\n  setInspectMode(mode: Protocol.Overlay.InspectMode, config: Protocol.Overlay.HighlightConfig): Promise<void> {\n    this.inspectModeConfig = mode !== Protocol.Overlay.InspectMode.None ? config : null;\n    return Promise.resolve();\n  }\n\n  highlightFrame(_frameId: string): void {\n  }\n\n  private createCheckerboardPattern(context: CanvasRenderingContext2D): CanvasPattern|null {\n    const pattern = document.createElement('canvas') as HTMLCanvasElement;\n    const size = 32;\n    pattern.width = size * 2;\n    pattern.height = size * 2;\n    const pctx = pattern.getContext('2d') as CanvasRenderingContext2D;\n\n    pctx.fillStyle = 'var(--sys-color-neutral-outline)';\n    pctx.fillRect(0, 0, size * 2, size * 2);\n\n    pctx.fillStyle = 'var(--sys-color-surface-variant)';\n    pctx.fillRect(0, 0, size, size);\n    pctx.fillRect(size, size, size, size);\n    return context.createPattern(pattern, 'repeat');\n  }\n\n  private createNavigationBar(): void {\n    this.navigationBar = this.element.createChild('div', 'screencast-navigation') as HTMLElement;\n\n    this.navigationBack = this.navigationBar.createChild('button', 'navigation') as HTMLButtonElement;\n    {\n      const icon = this.navigationBack.appendChild(new IconButton.Icon.Icon());\n      icon.data = {color: 'var(--icon-default)', iconName: 'arrow-back'};\n    }\n    this.navigationBack.disabled = true;\n    UI.ARIAUtils.setLabel(this.navigationBack, i18nString(UIStrings.back));\n\n    this.navigationForward = this.navigationBar.createChild('button', 'navigation') as HTMLButtonElement;\n    {\n      const icon = this.navigationForward.appendChild(new IconButton.Icon.Icon());\n      icon.data = {color: 'var(--icon-default)', iconName: 'arrow-forward'};\n    }\n    this.navigationForward.disabled = true;\n    UI.ARIAUtils.setLabel(this.navigationForward, i18nString(UIStrings.forward));\n\n    this.navigationReload = this.navigationBar.createChild('button', 'navigation');\n    {\n      const icon = this.navigationReload.appendChild(new IconButton.Icon.Icon());\n      icon.data = {color: 'var(--icon-default)', iconName: 'refresh'};\n    }\n    UI.ARIAUtils.setLabel(this.navigationReload, i18nString(UIStrings.reload));\n\n    this.navigationUrl = this.navigationBar.appendChild(UI.UIUtils.createInput()) as HTMLInputElement;\n    this.navigationUrl.type = 'text';\n    UI.ARIAUtils.setLabel(this.navigationUrl, i18nString(UIStrings.addressBar));\n\n    this.mouseInputToggle = this.navigationBar.createChild('button') as HTMLButtonElement;\n    this.mouseInputToggle.disabled = true;\n    {\n      this.mouseInputToggleIcon = this.mouseInputToggle.appendChild(new IconButton.Icon.Icon());\n      this.mouseInputToggleIcon.data = {color: 'var(--icon-toggled)', iconName: 'mouse'};\n    }\n    UI.ARIAUtils.setLabel(this.mouseInputToggle, i18nString(UIStrings.mouseInput));\n\n    this.touchInputToggle = this.navigationBar.createChild('button') as HTMLButtonElement;\n    {\n      this.touchInputToggleIcon = this.touchInputToggle.appendChild(new IconButton.Icon.Icon());\n      this.touchInputToggleIcon.data = {color: 'var(--icon-default)', iconName: 'touch-app'};\n    }\n    UI.ARIAUtils.setLabel(this.touchInputToggle, i18nString(UIStrings.touchInput));\n\n    this.navigationProgressBar = new ProgressTracker(\n        this.resourceTreeModel, this.networkManager, this.navigationBar.createChild('div', 'progress') as HTMLElement);\n\n    if (this.resourceTreeModel) {\n      this.navigationBack.addEventListener('click', this.navigateToHistoryEntry.bind(this, -1), false);\n      this.navigationForward.addEventListener('click', this.navigateToHistoryEntry.bind(this, 1), false);\n      this.navigationReload.addEventListener('click', this.navigateReload.bind(this), false);\n      this.navigationUrl.addEventListener('keyup', this.navigationUrlKeyUp.bind(this), true);\n      this.touchInputToggle.addEventListener('click', this.#toggleTouchEmulation.bind(this, true), false);\n      this.mouseInputToggle.addEventListener('click', this.#toggleTouchEmulation.bind(this, false), false);\n      void this.requestNavigationHistory();\n      this.resourceTreeModel.addEventListener(\n          SDK.ResourceTreeModel.Events.PrimaryPageChanged, this.requestNavigationHistoryEvent, this);\n      this.resourceTreeModel.addEventListener(\n          SDK.ResourceTreeModel.Events.CachedResourcesLoaded, this.requestNavigationHistoryEvent, this);\n    }\n  }\n\n  private navigateToHistoryEntry(offset: number): void {\n    if (!this.resourceTreeModel) {\n      return;\n    }\n    const newIndex = (this.historyIndex || 0) + offset;\n    if (!this.historyEntries || newIndex < 0 || newIndex >= this.historyEntries.length) {\n      return;\n    }\n    this.resourceTreeModel.navigateToHistoryEntry(this.historyEntries[newIndex]);\n    void this.requestNavigationHistory();\n  }\n\n  private navigateReload(): void {\n    if (!this.resourceTreeModel) {\n      return;\n    }\n    this.resourceTreeModel.reloadPage();\n  }\n\n  private navigationUrlKeyUp(event: KeyboardEvent): void {\n    if (event.key !== 'Enter') {\n      return;\n    }\n    let url: string = this.navigationUrl.value;\n    if (!url) {\n      return;\n    }\n    if (!url.match(SCHEME_REGEX)) {\n      url = 'http://' + url;\n    }\n    if (this.resourceTreeModel) {\n      void this.resourceTreeModel.navigate(url as Platform.DevToolsPath.UrlString);\n    }\n    this.canvasElement.focus();\n  }\n\n  #toggleTouchEmulation(value: boolean): void {\n    if (!this.canvasContainerElement || !this.isCasting || !this.mouseInputToggle || !this.touchInputToggle ||\n        !this.mouseInputToggleIcon || !this.touchInputToggleIcon) {\n      return;\n    }\n    const models = SDK.TargetManager.TargetManager.instance().models(SDK.EmulationModel.EmulationModel);\n    for (const model of models) {\n      void model.overrideEmulateTouch(value);\n    }\n    this.mouseInputToggle.disabled = !value;\n    this.touchInputToggle.disabled = value;\n    this.mouseInputToggleIcon.data = {\n      ...this.mouseInputToggleIcon.data,\n      color: this.mouseInputToggle.disabled ? 'var(--icon-toggled)' : 'var(--icon-default)',\n    };\n    this.touchInputToggleIcon.data = {\n      ...this.touchInputToggleIcon.data,\n      color: this.touchInputToggle.disabled ? 'var(--icon-toggled)' : 'var(--icon-default)',\n    };\n    this.canvasContainerElement.classList.toggle('touchable', value);\n  }\n\n  private requestNavigationHistoryEvent(): void {\n    void this.requestNavigationHistory();\n  }\n\n  private async requestNavigationHistory(): Promise<void> {\n    const history = this.resourceTreeModel ? await this.resourceTreeModel.navigationHistory() : null;\n    if (!history) {\n      return;\n    }\n\n    this.historyIndex = history.currentIndex;\n    this.historyEntries = history.entries;\n\n    this.navigationBack.disabled = this.historyIndex === 0;\n    this.navigationForward.disabled = this.historyIndex === (this.historyEntries.length - 1);\n\n    let url: string = this.historyEntries[this.historyIndex].url;\n    const match = url.match(HTTP_REGEX);\n    if (match) {\n      url = match[1];\n    }\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.inspectedURLChanged(\n        url as Platform.DevToolsPath.UrlString);\n    this.navigationUrl.value = decodeURI(url);\n  }\n\n  private focusNavigationBar(): boolean {\n    this.navigationUrl.focus();\n    this.navigationUrl.select();\n    return true;\n  }\n}\n\nexport const BORDERS_SIZE = 44;\nexport const NAVBAR_HEIGHT = 29;\nexport const HTTP_REGEX = /^http:\\/\\/(.+)/;\nexport const SCHEME_REGEX = /^(https?|about|chrome):/;\n\nexport class ProgressTracker {\n  private element: HTMLElement;\n  private requestIds: Map<string, SDK.NetworkRequest.NetworkRequest>|null;\n  private startedRequests: number;\n  private finishedRequests: number;\n  private maxDisplayedProgress: number;\n\n  constructor(\n      resourceTreeModel: SDK.ResourceTreeModel.ResourceTreeModel|null,\n      networkManager: SDK.NetworkManager.NetworkManager|null, element: HTMLElement) {\n    this.element = element;\n    if (resourceTreeModel) {\n      resourceTreeModel.addEventListener(\n          SDK.ResourceTreeModel.Events.PrimaryPageChanged, this.onPrimaryPageChanged, this);\n      resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.Load, this.onLoad, this);\n    }\n    if (networkManager) {\n      networkManager.addEventListener(SDK.NetworkManager.Events.RequestStarted, this.onRequestStarted, this);\n      networkManager.addEventListener(SDK.NetworkManager.Events.RequestFinished, this.onRequestFinished, this);\n    }\n    this.requestIds = null;\n    this.startedRequests = 0;\n    this.finishedRequests = 0;\n    this.maxDisplayedProgress = 0;\n  }\n\n  private onPrimaryPageChanged(): void {\n    this.requestIds = new Map();\n    this.startedRequests = 0;\n    this.finishedRequests = 0;\n    this.maxDisplayedProgress = 0;\n    this.updateProgress(0.1);  // Display first 10% on navigation start.\n  }\n\n  private onLoad(): void {\n    this.requestIds = null;\n    this.updateProgress(1);  // Display 100% progress on load, hide it in 0.5s.\n    window.setTimeout(() => {\n      if (!this.navigationProgressVisible()) {\n        this.displayProgress(0);\n      }\n    }, 500);\n  }\n\n  private navigationProgressVisible(): boolean {\n    return this.requestIds !== null;\n  }\n\n  private onRequestStarted(event: Common.EventTarget.EventTargetEvent<SDK.NetworkManager.RequestStartedEvent>): void {\n    if (!this.navigationProgressVisible()) {\n      return;\n    }\n    const request = event.data.request;\n    // Ignore long-living WebSockets for the sake of progress indicator, as we won't be waiting them anyway.\n    if (request.resourceType() === Common.ResourceType.resourceTypes.WebSocket) {\n      return;\n    }\n    if (this.requestIds) {\n      this.requestIds.set(request.requestId(), request);\n    }\n    ++this.startedRequests;\n  }\n\n  private onRequestFinished(event: Common.EventTarget.EventTargetEvent<SDK.NetworkRequest.NetworkRequest>): void {\n    if (!this.navigationProgressVisible()) {\n      return;\n    }\n    const request = event.data;\n    if (this.requestIds && !this.requestIds.has(request.requestId())) {\n      return;\n    }\n    ++this.finishedRequests;\n    window.setTimeout(() => {\n      this.updateProgress(\n          this.finishedRequests / this.startedRequests * 0.9);  // Finished requests drive the progress up to 90%.\n    }, 500);  // Delay to give the new requests time to start. This makes the progress smoother.\n  }\n\n  private updateProgress(progress: number): void {\n    if (!this.navigationProgressVisible()) {\n      return;\n    }\n    if (this.maxDisplayedProgress >= progress) {\n      return;\n    }\n    this.maxDisplayedProgress = progress;\n    this.displayProgress(progress);\n  }\n\n  private displayProgress(progress: number): void {\n    this.element.style.width = (100 * progress) + '%';\n  }\n}\n\nfunction getAttributesForElementTitle(node: SDK.DOMModel.DOMNode): string {\n  const id = node.getAttribute('id');\n  const className = node.getAttribute('class');\n\n  let selector: string = id ? '#' + id : '';\n  if (className) {\n    selector += '.' + className.trim().replace(/\\s+/g, '.');\n  }\n\n  if (selector.length > 50) {\n    selector = selector.substring(0, 50) + '…';\n  }\n\n  return selector;\n}\n"]}