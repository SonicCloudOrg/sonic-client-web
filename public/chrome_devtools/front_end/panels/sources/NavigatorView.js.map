{"version":3,"file":"NavigatorView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/sources/NavigatorView.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2012 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport * as Snippets from '../snippets/snippets.js';\n\nimport navigatorTreeStyles from './navigatorTree.css.js';\nimport navigatorViewStyles from './navigatorView.css.js';\nimport {SearchSources} from './SearchSourcesView.js';\n\nconst UIStrings = {\n  /**\n   *@description Text in Navigator View of the Sources panel\n   */\n  searchInFolder: 'Search in folder',\n  /**\n   *@description Search label in Navigator View of the Sources panel\n   */\n  searchInAllFiles: 'Search in all files',\n  /**\n   *@description Text in Navigator View of the Sources panel\n   */\n  noDomain: '(no domain)',\n  /**\n   *@description Text in Navigator View of the Sources panel\n   */\n  authored: 'Authored',\n  /**\n   *@description Text in Navigator View of the Sources panel\n   */\n  authoredTooltip: 'Contains original sources',\n  /**\n   *@description Text in Navigator View of the Sources panel\n   */\n  deployed: 'Deployed',\n  /**\n   *@description Text in Navigator View of the Sources panel\n   */\n  deployedTooltip: 'Contains final sources the browser sees',\n  /**\n   *@description Text in Navigator View of the Sources panel\n   */\n  areYouSureYouWantToExcludeThis: 'Are you sure you want to exclude this folder?',\n  /**\n   *@description Text in Navigator View of the Sources panel\n   */\n  areYouSureYouWantToDeleteThis: 'Are you sure you want to delete this file?',\n  /**\n   *@description A context menu item in the Navigator View of the Sources panel\n   */\n  rename: 'Rename…',\n  /**\n   *@description A context menu item in the Navigator View of the Sources panel\n   */\n  makeACopy: 'Make a copy…',\n  /**\n   *@description Text to delete something\n   */\n  delete: 'Delete',\n  /**\n   *@description A button text to confirm an action to remove a folder. This is not the same as delete. It removes the folder from UI but do not delete them.\n   */\n  remove: 'Remove',\n  /**\n   *@description Text in Navigator View of the Sources panel\n   */\n  areYouSureYouWantToDeleteFolder: 'Are you sure you want to delete this folder and its contents?',\n  /**\n   *@description Text in Navigator View of the Sources panel. A confirmation message on action to delete a folder.\n   */\n  actionCannotBeUndone: 'This action cannot be undone.',\n  /**\n   *@description A context menu item in the Navigator View of the Sources panel\n   */\n  openFolder: 'Open folder',\n  /**\n   *@description A context menu item in the Navigator View of the Sources panel\n   */\n  newFile: 'New file',\n  /**\n   *@description A context menu item in the Navigator View of the Sources panel to exclude a folder from workspace\n   */\n  excludeFolder: 'Exclude from workspace',\n  /**\n   *@description A context menu item in the Navigator View of the Sources panel\n   */\n  removeFolderFromWorkspace: 'Remove from workspace',\n  /**\n   *@description Text in Navigator View of the Sources panel\n   * @example {a-folder-name} PH1\n   */\n  areYouSureYouWantToRemoveThis: 'Remove ‘{PH1}’ from Workspace?',\n  /**\n   *@description Text in Navigator View of the Sources panel. Warning message when user remove a folder.\n   */\n  workspaceStopSyncing: 'This will stop syncing changes from DevTools to your sources.',\n  /**\n   *@description Name of an item from source map\n   *@example {compile.html} PH1\n   */\n  sFromSourceMap: '{PH1} (from source map)',\n  /**\n   *@description Name of an item that is on the ignore list\n   *@example {compile.html} PH1\n   */\n  sIgnoreListed: '{PH1} (ignore listed)',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/NavigatorView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport const Types = {\n  Authored: 'authored',\n  Deployed: 'deployed',\n  Domain: 'domain',\n  File: 'file',\n  FileSystem: 'fs',\n  FileSystemFolder: 'fs-folder',\n  Frame: 'frame',\n  NetworkFolder: 'nw-folder',\n  Root: 'root',\n  Worker: 'worker',\n};\n\nconst TYPE_ORDERS = new Map([\n  [Types.Root, 1],\n  [Types.Authored, 1],\n  [Types.Deployed, 5],\n  [Types.Domain, 10],\n  [Types.FileSystemFolder, 1],\n  [Types.NetworkFolder, 1],\n  [Types.File, 10],\n  [Types.Frame, 70],\n  [Types.Worker, 90],\n  [Types.FileSystem, 100],\n]);\n\nexport class NavigatorView extends UI.Widget.VBox implements SDK.TargetManager.Observer {\n  private placeholder: UI.Widget.Widget|null;\n  scriptsTree: UI.TreeOutline.TreeOutlineInShadow;\n  private readonly uiSourceCodeNodes:\n      Platform.MapUtilities.Multimap<Workspace.UISourceCode.UISourceCode, NavigatorUISourceCodeTreeNode>;\n  private readonly subfolderNodes: Map<string, NavigatorFolderTreeNode>;\n  private readonly rootNode: NavigatorRootTreeNode;\n  private readonly frameNodes: Map<SDK.ResourceTreeModel.ResourceTreeFrame, NavigatorGroupTreeNode>;\n  private authoredNode?: NavigatorGroupTreeNode;\n  private deployedNode?: NavigatorGroupTreeNode;\n  private navigatorGroupByFolderSetting: Common.Settings.Setting<boolean>;\n  private navigatorGroupByAuthoredExperiment?: string;\n  private workspaceInternal!: Workspace.Workspace.WorkspaceImpl;\n  private groupByFrame?: boolean;\n  private groupByAuthored?: boolean;\n  private groupByDomain?: boolean;\n  private groupByFolder?: boolean;\n  constructor(jslogContext: string, enableAuthoredGrouping?: boolean) {\n    super(true);\n\n    this.placeholder = null;\n    this.scriptsTree = new UI.TreeOutline.TreeOutlineInShadow();\n\n    this.scriptsTree.setComparator(NavigatorView.treeElementsCompare);\n    this.scriptsTree.setFocusable(false);\n    this.contentElement.setAttribute('jslog', `${VisualLogging.pane(jslogContext).track({resize: true})}`);\n    this.contentElement.appendChild(this.scriptsTree.element);\n    this.setDefaultFocusedElement(this.scriptsTree.element);\n\n    this.uiSourceCodeNodes = new Platform.MapUtilities.Multimap();\n    this.subfolderNodes = new Map();\n\n    this.rootNode = new NavigatorRootTreeNode(this);\n    this.rootNode.populate();\n\n    this.frameNodes = new Map();\n\n    this.contentElement.addEventListener('contextmenu', this.handleContextMenu.bind(this), false);\n    UI.ShortcutRegistry.ShortcutRegistry.instance().addShortcutListener(\n        this.contentElement, {'sources.rename': this.renameShortcut.bind(this)});\n\n    this.navigatorGroupByFolderSetting = Common.Settings.Settings.instance().moduleSetting('navigator-group-by-folder');\n    this.navigatorGroupByFolderSetting.addChangeListener(this.groupingChanged.bind(this));\n    if (enableAuthoredGrouping) {\n      this.navigatorGroupByAuthoredExperiment = Root.Runtime.ExperimentName.AUTHORED_DEPLOYED_GROUPING;\n    }\n\n    Bindings.IgnoreListManager.IgnoreListManager.instance().addChangeListener(this.ignoreListChanged.bind(this));\n\n    this.initGrouping();\n\n    Persistence.Persistence.PersistenceImpl.instance().addEventListener(\n        Persistence.Persistence.Events.BindingCreated, this.onBindingChanged, this);\n    Persistence.Persistence.PersistenceImpl.instance().addEventListener(\n        Persistence.Persistence.Events.BindingRemoved, this.onBindingChanged, this);\n    Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().addEventListener(\n        Persistence.NetworkPersistenceManager.Events.RequestsForHeaderOverridesFileChanged,\n        this.#onRequestsForHeaderOverridesFileChanged, this);\n    SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.NameChanged, this.targetNameChanged, this);\n\n    SDK.TargetManager.TargetManager.instance().observeTargets(this);\n    this.resetWorkspace(Workspace.Workspace.WorkspaceImpl.instance());\n    this.workspaceInternal.uiSourceCodes().forEach(this.addUISourceCode.bind(this));\n    Bindings.NetworkProject.NetworkProjectManager.instance().addEventListener(\n        Bindings.NetworkProject.Events.FrameAttributionAdded, this.frameAttributionAdded, this);\n    Bindings.NetworkProject.NetworkProjectManager.instance().addEventListener(\n        Bindings.NetworkProject.Events.FrameAttributionRemoved, this.frameAttributionRemoved, this);\n  }\n\n  private static treeElementOrder(treeElement: UI.TreeOutline.TreeElement): number {\n    if (boostOrderForNode.has(treeElement)) {\n      return 0;\n    }\n\n    const actualElement = (treeElement as NavigatorSourceTreeElement);\n\n    let order = TYPE_ORDERS.get(actualElement.nodeType) || 0;\n    if (actualElement.uiSourceCode) {\n      const contentType = actualElement.uiSourceCode.contentType();\n      if (contentType.isDocument()) {\n        order += 3;\n      } else if (contentType.isScript()) {\n        order += 5;\n      } else if (contentType.isStyleSheet()) {\n        order += 10;\n      } else {\n        order += 15;\n      }\n    }\n\n    return order;\n  }\n\n  static appendSearchItem(contextMenu: UI.ContextMenu.ContextMenu, path: string): void {\n    const searchLabel = path ? i18nString(UIStrings.searchInFolder) : i18nString(UIStrings.searchInAllFiles);\n    const searchSources = new SearchSources(path && `file:${path}`);\n    contextMenu.viewSection().appendItem(\n        searchLabel, () => Common.Revealer.reveal(searchSources),\n        {jslogContext: path ? 'search-in-folder' : 'search-in-all-files'});\n  }\n\n  private static treeElementsCompare(\n      treeElement1: UI.TreeOutline.TreeElement, treeElement2: UI.TreeOutline.TreeElement): number {\n    const typeWeight1 = NavigatorView.treeElementOrder(treeElement1);\n    const typeWeight2 = NavigatorView.treeElementOrder(treeElement2);\n\n    if (typeWeight1 > typeWeight2) {\n      return 1;\n    }\n    if (typeWeight1 < typeWeight2) {\n      return -1;\n    }\n    return Platform.StringUtilities.naturalOrderComparator(treeElement1.titleAsText(), treeElement2.titleAsText());\n  }\n\n  setPlaceholder(placeholder: UI.Widget.Widget): void {\n    console.assert(!this.placeholder, 'A placeholder widget was already set');\n    this.placeholder = placeholder;\n    placeholder.show(this.contentElement, this.contentElement.firstChild);\n    updateVisibility.call(this);\n    this.scriptsTree.addEventListener(UI.TreeOutline.Events.ElementAttached, updateVisibility.bind(this));\n    this.scriptsTree.addEventListener(UI.TreeOutline.Events.ElementsDetached, updateVisibility.bind(this));\n\n    function updateVisibility(this: NavigatorView): void {\n      const showTree = this.scriptsTree.firstChild();\n      if (showTree) {\n        placeholder.hideWidget();\n      } else {\n        placeholder.showWidget();\n      }\n      this.scriptsTree.element.classList.toggle('hidden', !showTree);\n    }\n  }\n\n  private onBindingChanged(event: Common.EventTarget.EventTargetEvent<Persistence.Persistence.PersistenceBinding>):\n      void {\n    const binding = event.data;\n\n    let isFromSourceMap = false;\n    // Update UISourceCode titles.\n    const networkNodes = this.uiSourceCodeNodes.get(binding.network);\n    for (const networkNode of networkNodes) {\n      networkNode.updateTitle();\n      isFromSourceMap ||= networkNode.uiSourceCode().contentType().isFromSourceMap();\n    }\n    const fileSystemNodes = this.uiSourceCodeNodes.get(binding.fileSystem);\n    for (const fileSystemNode of fileSystemNodes) {\n      fileSystemNode.updateTitle();\n      isFromSourceMap ||= fileSystemNode.uiSourceCode().contentType().isFromSourceMap();\n    }\n\n    // Update folder titles.\n    const pathTokens =\n        Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.relativePath(binding.fileSystem);\n    let folderPath = Platform.DevToolsPath.EmptyEncodedPathString;\n    for (let i = 0; i < pathTokens.length - 1; ++i) {\n      folderPath = Common.ParsedURL.ParsedURL.concatenate(folderPath, pathTokens[i]);\n      const folderId = this.folderNodeId(\n          binding.fileSystem.project(), null, null, binding.fileSystem.origin(), isFromSourceMap, folderPath);\n      const folderNode = this.subfolderNodes.get(folderId);\n      if (folderNode) {\n        folderNode.updateTitle();\n      }\n      folderPath = Common.ParsedURL.ParsedURL.concatenate(folderPath, '/');\n    }\n\n    // Update fileSystem root title.\n    const fileSystemRoot = this.rootOrDeployedNode().child(binding.fileSystem.project().id());\n    if (fileSystemRoot) {\n      fileSystemRoot.updateTitle();\n    }\n  }\n\n  #onRequestsForHeaderOverridesFileChanged(\n      event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const headersFileUiSourceCode = event.data;\n    const networkNodes = this.uiSourceCodeNodes.get(headersFileUiSourceCode);\n    for (const networkNode of networkNodes) {\n      networkNode.updateTitle();\n    }\n  }\n\n  override focus(): void {\n    this.scriptsTree.focus();\n  }\n\n  /**\n   * Central place to add elements to the tree to\n   * enable focus if the tree has elements\n   */\n  appendChild(parent: UI.TreeOutline.TreeElement, child: UI.TreeOutline.TreeElement): void {\n    this.scriptsTree.setFocusable(true);\n    parent.appendChild(child);\n  }\n\n  /**\n   * Central place to remove elements from the tree to\n   * disable focus if the tree is empty\n   */\n  removeChild(parent: UI.TreeOutline.TreeElement, child: UI.TreeOutline.TreeElement): void {\n    parent.removeChild(child);\n    if (this.scriptsTree.rootElement().childCount() === 0) {\n      this.scriptsTree.setFocusable(false);\n    }\n  }\n\n  private resetWorkspace(workspace: Workspace.Workspace.WorkspaceImpl): void {\n    // Clear old event listeners first.\n    if (this.workspaceInternal) {\n      this.workspaceInternal.removeEventListener(\n          Workspace.Workspace.Events.UISourceCodeAdded, this.uiSourceCodeAddedCallback, this);\n      this.workspaceInternal.removeEventListener(\n          Workspace.Workspace.Events.UISourceCodeRemoved, this.uiSourceCodeRemovedCallback, this);\n      this.workspaceInternal.removeEventListener(\n          Workspace.Workspace.Events.ProjectAdded, this.projectAddedCallback, this);\n      this.workspaceInternal.removeEventListener(\n          Workspace.Workspace.Events.ProjectRemoved, this.projectRemovedCallback, this);\n    }\n\n    this.workspaceInternal = workspace;\n    this.workspaceInternal.addEventListener(\n        Workspace.Workspace.Events.UISourceCodeAdded, this.uiSourceCodeAddedCallback, this);\n    this.workspaceInternal.addEventListener(\n        Workspace.Workspace.Events.UISourceCodeRemoved, this.uiSourceCodeRemovedCallback, this);\n    this.workspaceInternal.addEventListener(Workspace.Workspace.Events.ProjectAdded, this.projectAddedCallback, this);\n    this.workspaceInternal.addEventListener(\n        Workspace.Workspace.Events.ProjectRemoved, this.projectRemovedCallback, this);\n    this.workspaceInternal.projects().forEach(this.projectAdded.bind(this));\n    this.computeUniqueFileSystemProjectNames();\n  }\n\n  private projectAddedCallback(event: Common.EventTarget.EventTargetEvent<Workspace.Workspace.Project>): void {\n    const project = event.data;\n    this.projectAdded(project);\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      this.computeUniqueFileSystemProjectNames();\n    }\n  }\n\n  private projectRemovedCallback(event: Common.EventTarget.EventTargetEvent<Workspace.Workspace.Project>): void {\n    const project = event.data;\n    this.removeProject(project);\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      this.computeUniqueFileSystemProjectNames();\n    }\n  }\n\n  workspace(): Workspace.Workspace.WorkspaceImpl {\n    return this.workspaceInternal;\n  }\n\n  acceptProject(project: Workspace.Workspace.Project): boolean {\n    return !project.isServiceProject();\n  }\n\n  private frameAttributionAdded(\n      event: Common.EventTarget.EventTargetEvent<Bindings.NetworkProject.FrameAttributionEvent>): void {\n    const {uiSourceCode} = event.data;\n    if (!this.acceptsUISourceCode(uiSourceCode)) {\n      return;\n    }\n\n    const addedFrame = (event.data.frame as SDK.ResourceTreeModel.ResourceTreeFrame | null);\n    // This event does not happen for UISourceCodes without initial attribution.\n    this.addUISourceCodeNode(uiSourceCode, addedFrame);\n  }\n\n  private frameAttributionRemoved(\n      event: Common.EventTarget.EventTargetEvent<Bindings.NetworkProject.FrameAttributionEvent>): void {\n    const {uiSourceCode} = event.data;\n    if (!this.acceptsUISourceCode(uiSourceCode)) {\n      return;\n    }\n\n    const removedFrame = (event.data.frame as SDK.ResourceTreeModel.ResourceTreeFrame | null);\n    const node = Array.from(this.uiSourceCodeNodes.get(uiSourceCode)).find(node => node.frame() === removedFrame);\n    if (node) {\n      this.removeUISourceCodeNode(node);\n    }\n  }\n\n  private acceptsUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return this.acceptProject(uiSourceCode.project());\n  }\n\n  private addUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    if (Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.JUST_MY_CODE) &&\n        Bindings.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n            uiSourceCode)) {\n      return;\n    }\n\n    if (!this.acceptsUISourceCode(uiSourceCode)) {\n      return;\n    }\n\n    if (uiSourceCode.isFetchXHR()) {\n      return;\n    }\n\n    const frames = Bindings.NetworkProject.NetworkProject.framesForUISourceCode(uiSourceCode);\n    if (frames.length) {\n      for (const frame of frames) {\n        this.addUISourceCodeNode(uiSourceCode, frame);\n      }\n    } else {\n      this.addUISourceCodeNode(uiSourceCode, null);\n    }\n    this.uiSourceCodeAdded(uiSourceCode);\n  }\n\n  private addUISourceCodeNode(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, frame: SDK.ResourceTreeModel.ResourceTreeFrame|null): void {\n    const isFromSourceMap = uiSourceCode.contentType().isFromSourceMap();\n    let path;\n    if (uiSourceCode.project().type() === Workspace.Workspace.projectTypes.FileSystem) {\n      path =\n          Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.relativePath(uiSourceCode).slice(0, -1) as\n          Platform.DevToolsPath.EncodedPathString[];\n    } else {\n      path = Common.ParsedURL.ParsedURL.extractPath(uiSourceCode.url()).split('/').slice(1, -1) as\n          Platform.DevToolsPath.EncodedPathString[];\n    }\n\n    const project = uiSourceCode.project();\n    const target = Bindings.NetworkProject.NetworkProject.targetForUISourceCode(uiSourceCode);\n    const folderNode =\n        this.folderNode(uiSourceCode, project, target, frame, uiSourceCode.origin(), path, isFromSourceMap);\n    const uiSourceCodeNode = new NavigatorUISourceCodeTreeNode(this, uiSourceCode, frame);\n    const existingNode = folderNode.child(uiSourceCodeNode.id);\n    if (existingNode && existingNode instanceof NavigatorUISourceCodeTreeNode) {\n      this.uiSourceCodeNodes.set(uiSourceCode, existingNode);\n    } else {\n      folderNode.appendChild(uiSourceCodeNode);\n      this.uiSourceCodeNodes.set(uiSourceCode, uiSourceCodeNode);\n      uiSourceCodeNode.updateTitleBubbleUp();\n    }\n    this.selectDefaultTreeNode();\n  }\n\n  uiSourceCodeAdded(_uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n  }\n\n  private uiSourceCodeAddedCallback(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>):\n      void {\n    const uiSourceCode = event.data;\n    this.addUISourceCode(uiSourceCode);\n  }\n\n  private uiSourceCodeRemovedCallback(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>):\n      void {\n    this.removeUISourceCodes([event.data]);\n  }\n\n  tryAddProject(project: Workspace.Workspace.Project): void {\n    this.projectAdded(project);\n    for (const uiSourceCode of project.uiSourceCodes()) {\n      this.addUISourceCode(uiSourceCode);\n    }\n  }\n\n  private projectAdded(project: Workspace.Workspace.Project): void {\n    const rootOrDeployed = this.rootOrDeployedNode();\n    if (!this.acceptProject(project) || project.type() !== Workspace.Workspace.projectTypes.FileSystem ||\n        Snippets.ScriptSnippetFileSystem.isSnippetsProject(project) || rootOrDeployed.child(project.id())) {\n      return;\n    }\n    rootOrDeployed.appendChild(\n        new NavigatorGroupTreeNode(this, project, project.id(), Types.FileSystem, project.displayName()));\n    this.selectDefaultTreeNode();\n  }\n\n  // TODO(einbinder) remove this code after crbug.com/964075 is fixed\n  private selectDefaultTreeNode(): void {\n    const children = this.rootNode.children();\n    if (children.length && !this.scriptsTree.selectedTreeElement) {\n      children[0].treeNode().select(true /* omitFocus */, false /* selectedByUser */);\n    }\n  }\n\n  private computeUniqueFileSystemProjectNames(): void {\n    const fileSystemProjects = this.workspaceInternal.projectsForType(Workspace.Workspace.projectTypes.FileSystem);\n    if (!fileSystemProjects.length) {\n      return;\n    }\n\n    const reversedIndex = Common.Trie.Trie.newArrayTrie<string[]>();\n    const reversedPaths = [];\n    for (const project of fileSystemProjects) {\n      const fileSystem = (project as Persistence.FileSystemWorkspaceBinding.FileSystem);\n      const reversedPathParts = fileSystem.fileSystemPath().split('/').reverse();\n      reversedPaths.push(reversedPathParts);\n      reversedIndex.add(reversedPathParts);\n    }\n\n    const rootOrDeployed = this.rootOrDeployedNode();\n\n    for (let i = 0; i < fileSystemProjects.length; ++i) {\n      const reversedPath = reversedPaths[i];\n      const project = fileSystemProjects[i];\n      reversedIndex.remove(reversedPath);\n      const commonPrefix = reversedIndex.longestPrefix(reversedPath, false /* fullWordOnly */);\n      reversedIndex.add(reversedPath);\n      const prefixPath = reversedPath.slice(0, commonPrefix.length + 1);\n      const path = Common.ParsedURL.ParsedURL.encodedPathToRawPathString(\n          prefixPath.reverse().join('/') as Platform.DevToolsPath.EncodedPathString);\n\n      const fileSystemNode = rootOrDeployed.child(project.id());\n      if (fileSystemNode) {\n        fileSystemNode.setTitle(path);\n      }\n    }\n  }\n\n  removeProject(project: Workspace.Workspace.Project): void {\n    this.removeUISourceCodes(project.uiSourceCodes());\n    if (project.type() !== Workspace.Workspace.projectTypes.FileSystem) {\n      return;\n    }\n    const fileSystemNode = this.rootNode.child(project.id());\n    if (!fileSystemNode) {\n      return;\n    }\n    this.rootNode.removeChild(fileSystemNode);\n  }\n\n  private folderNodeId(\n      project: Workspace.Workspace.Project, target: SDK.Target.Target|null,\n      frame: SDK.ResourceTreeModel.ResourceTreeFrame|null, projectOrigin: string, isFromSourceMap: boolean,\n      path: Platform.DevToolsPath.EncodedPathString): string {\n    const projectId = project.type() === Workspace.Workspace.projectTypes.FileSystem ? project.id() : '';\n    let targetId = target && !(this.groupByAuthored && isFromSourceMap) ? target.id() : '';\n    let frameId = this.groupByFrame && frame ? frame.id : '';\n    if (this.groupByAuthored) {\n      if (isFromSourceMap) {\n        targetId = 'Authored';\n        frameId = '';\n      } else {\n        targetId = 'Deployed:' + targetId;\n      }\n    }\n    return targetId + ':' + projectId + ':' + frameId + ':' + projectOrigin + ':' + path;\n  }\n\n  private folderNode(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, project: Workspace.Workspace.Project,\n      target: SDK.Target.Target|null, frame: SDK.ResourceTreeModel.ResourceTreeFrame|null,\n      projectOrigin: Platform.DevToolsPath.UrlString, path: Platform.DevToolsPath.EncodedPathString[],\n      fromSourceMap: boolean): NavigatorTreeNode {\n    if (Snippets.ScriptSnippetFileSystem.isSnippetsUISourceCode(uiSourceCode)) {\n      return this.rootNode;\n    }\n\n    if (target && !this.groupByFolder && !fromSourceMap) {\n      return this.domainNode(uiSourceCode, project, target, frame, projectOrigin);\n    }\n\n    const folderPath = Common.ParsedURL.ParsedURL.join(path, '/');\n    const folderId = this.folderNodeId(project, target, frame, projectOrigin, fromSourceMap, folderPath);\n    let folderNode = this.subfolderNodes.get(folderId);\n    if (folderNode) {\n      return folderNode;\n    }\n\n    if (!path.length) {\n      if (target) {\n        return this.domainNode(uiSourceCode, project, target, frame, projectOrigin);\n      }\n      return this.rootOrDeployedNode().child(project.id()) as NavigatorTreeNode;\n    }\n\n    const parentNode =\n        this.folderNode(uiSourceCode, project, target, frame, projectOrigin, path.slice(0, -1), fromSourceMap);\n    let type: string = Types.NetworkFolder;\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      type = Types.FileSystemFolder;\n    }\n    const name = Common.ParsedURL.ParsedURL.encodedPathToRawPathString(path[path.length - 1]);\n\n    folderNode = new NavigatorFolderTreeNode(this, project, folderId, type, folderPath, name, projectOrigin);\n    this.subfolderNodes.set(folderId, folderNode);\n    parentNode.appendChild(folderNode);\n    return folderNode;\n  }\n\n  private domainNode(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, project: Workspace.Workspace.Project,\n      target: SDK.Target.Target, frame: SDK.ResourceTreeModel.ResourceTreeFrame|null,\n      projectOrigin: string): NavigatorTreeNode {\n    const isAuthored = uiSourceCode.contentType().isFromSourceMap();\n    const frameNode = this.frameNode(project, target, frame, isAuthored);\n    if (!this.groupByDomain) {\n      return frameNode;\n    }\n    let domainNode = frameNode.child(projectOrigin);\n    if (domainNode) {\n      return domainNode;\n    }\n\n    domainNode = new NavigatorGroupTreeNode(\n        this, project, projectOrigin, Types.Domain, this.computeProjectDisplayName(target, projectOrigin));\n    if (frame && projectOrigin === Common.ParsedURL.ParsedURL.extractOrigin(frame.url)) {\n      boostOrderForNode.add(domainNode.treeNode());\n    }\n    frameNode.appendChild(domainNode);\n    if (isAuthored && this.groupByAuthored) {\n      domainNode.treeNode().expand();\n    }\n    return domainNode;\n  }\n\n  private frameNode(\n      project: Workspace.Workspace.Project, target: SDK.Target.Target,\n      frame: SDK.ResourceTreeModel.ResourceTreeFrame|null, isAuthored: boolean): NavigatorTreeNode {\n    if (!this.groupByFrame || !frame || (this.groupByAuthored && isAuthored)) {\n      return this.targetNode(project, target, isAuthored);\n    }\n\n    let frameNode = this.frameNodes.get(frame);\n    if (frameNode) {\n      return frameNode;\n    }\n\n    frameNode =\n        new NavigatorGroupTreeNode(this, project, target.id() + ':' + frame.id, Types.Frame, frame.displayName());\n    frameNode.setHoverCallback(hoverCallback);\n    this.frameNodes.set(frame, frameNode);\n\n    const parentFrame = frame.parentFrame();\n    this.frameNode(project, parentFrame ? parentFrame.resourceTreeModel().target() : target, parentFrame, isAuthored)\n        .appendChild(frameNode);\n    if (!parentFrame) {\n      boostOrderForNode.add(frameNode.treeNode());\n      frameNode.treeNode().expand();\n    }\n\n    function hoverCallback(hovered: boolean): void {\n      if (hovered) {\n        const overlayModel = target.model(SDK.OverlayModel.OverlayModel);\n        if (overlayModel && frame) {\n          overlayModel.highlightFrame(frame.id);\n        }\n      } else {\n        SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n      }\n    }\n    return frameNode;\n  }\n\n  private targetNode(project: Workspace.Workspace.Project, target: SDK.Target.Target, isAuthored: boolean):\n      NavigatorTreeNode {\n    if (this.groupByAuthored && isAuthored) {\n      if (!this.authoredNode) {\n        this.authoredNode = new NavigatorGroupTreeNode(\n            this, null, 'group:Authored', Types.Authored, i18nString(UIStrings.authored),\n            i18nString(UIStrings.authoredTooltip));\n        this.rootNode.appendChild(this.authoredNode);\n        this.authoredNode.treeNode().expand();\n      }\n      return this.authoredNode;\n    }\n\n    const rootOrDeployed = this.rootOrDeployedNode();\n    if (target === SDK.TargetManager.TargetManager.instance().scopeTarget()) {\n      return rootOrDeployed;\n    }\n\n    let targetNode = rootOrDeployed.child('target:' + target.id());\n    if (!targetNode) {\n      targetNode = new NavigatorGroupTreeNode(\n          this, project, 'target:' + target.id(), target.type() === SDK.Target.Type.Frame ? Types.Frame : Types.Worker,\n          target.name());\n      rootOrDeployed.appendChild(targetNode);\n    }\n    return targetNode;\n  }\n\n  private rootOrDeployedNode(): NavigatorTreeNode {\n    if (this.groupByAuthored) {\n      if (!this.deployedNode) {\n        this.deployedNode = new NavigatorGroupTreeNode(\n            this, null, 'group:Deployed', Types.Deployed, i18nString(UIStrings.deployed),\n            i18nString(UIStrings.deployedTooltip));\n        this.rootNode.appendChild(this.deployedNode);\n      }\n      return this.deployedNode;\n    }\n    return this.rootNode;\n  }\n\n  private computeProjectDisplayName(target: SDK.Target.Target, projectOrigin: string): string {\n    const runtimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n    const executionContexts = runtimeModel ? runtimeModel.executionContexts() : [];\n    for (const context of executionContexts) {\n      if (context.name && context.origin && projectOrigin.startsWith(context.origin)) {\n        return context.name;\n      }\n    }\n\n    if (!projectOrigin) {\n      return i18nString(UIStrings.noDomain);\n    }\n\n    const parsedURL = new Common.ParsedURL.ParsedURL(projectOrigin);\n    const prettyURL = parsedURL.isValid ? parsedURL.host + (parsedURL.port ? (':' + parsedURL.port) : '') : '';\n\n    return (prettyURL || projectOrigin);\n  }\n\n  revealUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode, select?: boolean): NavigatorUISourceCodeTreeNode\n      |null {\n    const nodes = this.uiSourceCodeNodes.get(uiSourceCode);\n    if (nodes.size === 0) {\n      return null;\n    }\n    const node = nodes.values().next().value;\n    if (!node) {\n      return null;\n    }\n    if (this.scriptsTree.selectedTreeElement) {\n      // If the tree outline is being marked as \"being edited\" (i.e. we're renaming a file\n      // or chosing the name for a new snippet), we shall not proceed with revealing here,\n      // as that will steal focus from the input widget and thus cancel editing. The\n      // test/e2e/snippets/breakpoint_test.ts exercises this.\n      if (UI.UIUtils.isBeingEdited(this.scriptsTree.selectedTreeElement.treeOutline?.element)) {\n        return null;\n      }\n      this.scriptsTree.selectedTreeElement.deselect();\n    }\n    // TODO(dgozman): figure out revealing multiple.\n    node.reveal(select);\n    return node;\n  }\n\n  sourceSelected(uiSourceCode: Workspace.UISourceCode.UISourceCode, focusSource: boolean): void {\n    void Common.Revealer.reveal(uiSourceCode, !focusSource);\n  }\n\n  #isUISourceCodeOrAnyAncestorSelected(node: NavigatorUISourceCodeTreeNode): boolean {\n    const selectedTreeElement = (this.scriptsTree.selectedTreeElement as NavigatorSourceTreeElement | null);\n    const selectedNode = selectedTreeElement && selectedTreeElement.node;\n    let currentNode: NavigatorTreeNode|null = node;\n    while (currentNode) {\n      if (currentNode === selectedNode) {\n        return true;\n      }\n      currentNode = currentNode.parent;\n      if (!(node instanceof NavigatorGroupTreeNode || node instanceof NavigatorFolderTreeElement)) {\n        break;\n      }\n    }\n    return false;\n  }\n\n  private removeUISourceCodes(uiSourceCodes: Iterable<Workspace.UISourceCode.UISourceCode>): void {\n    const nodesWithSelectionOnPath: NavigatorUISourceCodeTreeNode[] = [];\n    // First we remove source codes without any selection on their path to root, and only then\n    // the ones with selection. This to avoid layout work associated with moving the selection\n    // around (crbug.com/1409025).\n    for (const uiSourceCode of uiSourceCodes) {\n      const nodes = this.uiSourceCodeNodes.get(uiSourceCode);\n      for (const node of nodes) {\n        if (this.#isUISourceCodeOrAnyAncestorSelected(node)) {\n          nodesWithSelectionOnPath.push(node);\n        } else {\n          this.removeUISourceCodeNode(node);\n        }\n      }\n    }\n    nodesWithSelectionOnPath.forEach(this.removeUISourceCodeNode.bind(this));\n  }\n\n  private removeUISourceCodeNode(node: NavigatorUISourceCodeTreeNode): void {\n    const uiSourceCode = node.uiSourceCode();\n    this.uiSourceCodeNodes.delete(uiSourceCode, node);\n    const project = uiSourceCode.project();\n    const target = Bindings.NetworkProject.NetworkProject.targetForUISourceCode(uiSourceCode);\n    let frame = node.frame();\n\n    let parentNode: (NavigatorTreeNode|null) = node.parent;\n    if (!parentNode) {\n      return;\n    }\n    parentNode.removeChild(node);\n    let currentNode: (NavigatorTreeNode|null) = parentNode;\n\n    while (currentNode) {\n      parentNode = currentNode.parent;\n      if (!parentNode) {\n        break;\n      }\n      if ((parentNode === this.rootNode || parentNode === this.deployedNode) &&\n          project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n        break;\n      }\n      if (!(currentNode instanceof NavigatorGroupTreeNode || currentNode instanceof NavigatorFolderTreeNode)) {\n        break;\n      }\n      if (!currentNode.isEmpty()) {\n        currentNode.updateTitleBubbleUp();\n        break;\n      }\n      if (currentNode.type === Types.Frame) {\n        this.discardFrame(\n            frame as SDK.ResourceTreeModel.ResourceTreeFrame,\n            Boolean(this.groupByAuthored) && uiSourceCode.contentType().isFromSourceMap());\n        frame = (frame as SDK.ResourceTreeModel.ResourceTreeFrame).parentFrame();\n      } else {\n        const folderId = this.folderNodeId(\n            project, target, frame, uiSourceCode.origin(), uiSourceCode.contentType().isFromSourceMap(),\n            currentNode instanceof NavigatorFolderTreeNode && currentNode.folderPath ||\n                Platform.DevToolsPath.EmptyEncodedPathString);\n        this.subfolderNodes.delete(folderId);\n        parentNode.removeChild(currentNode);\n      }\n\n      if (currentNode === this.authoredNode) {\n        this.authoredNode = undefined;\n      } else if (currentNode === this.deployedNode) {\n        this.deployedNode = undefined;\n      }\n\n      currentNode = parentNode;\n    }\n  }\n\n  reset(tearDownOnly?: boolean): void {\n    for (const node of this.uiSourceCodeNodes.valuesArray()) {\n      node.dispose();\n    }\n\n    this.scriptsTree.removeChildren();\n    this.scriptsTree.setFocusable(false);\n    this.uiSourceCodeNodes.clear();\n    this.subfolderNodes.clear();\n    this.frameNodes.clear();\n    this.rootNode.reset();\n    this.authoredNode = undefined;\n    this.deployedNode = undefined;\n    if (!tearDownOnly) {\n      // Reset the workspace to repopulate filesystem folders.\n      this.resetWorkspace(Workspace.Workspace.WorkspaceImpl.instance());\n    }\n  }\n\n  handleContextMenu(_event: Event): void {\n  }\n\n  private async renameShortcut(): Promise<boolean> {\n    const selectedTreeElement = (this.scriptsTree.selectedTreeElement as NavigatorSourceTreeElement | null);\n    const node = selectedTreeElement && selectedTreeElement.node;\n    if (!node || !node.uiSourceCode() || !node.uiSourceCode().canRename()) {\n      return false;\n    }\n    this.rename(node, false);\n    return true;\n  }\n\n  private handleContextMenuCreate(\n      project: Workspace.Workspace.Project, path: Platform.DevToolsPath.EncodedPathString,\n      uiSourceCode?: Workspace.UISourceCode.UISourceCode): void {\n    if (uiSourceCode) {\n      const relativePath = Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.relativePath(uiSourceCode);\n      relativePath.pop();\n      path = Common.ParsedURL.ParsedURL.join(relativePath, '/');\n    }\n    void this.create(project, path, uiSourceCode);\n  }\n\n  private handleContextMenuRename(node: NavigatorUISourceCodeTreeNode): void {\n    this.rename(node, false);\n  }\n\n  private async handleContextMenuExclude(\n      project: Workspace.Workspace.Project, path: Platform.DevToolsPath.EncodedPathString): Promise<void> {\n    const shouldExclude = await UI.UIUtils.ConfirmDialog.show(\n        i18nString(UIStrings.areYouSureYouWantToExcludeThis), undefined, {jslogContext: 'exclude-folder-confirmation'});\n    if (shouldExclude) {\n      UI.UIUtils.startBatchUpdate();\n      project.excludeFolder(\n          Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.completeURL(project, path));\n      UI.UIUtils.endBatchUpdate();\n    }\n  }\n\n  private async handleContextMenuDelete(uiSourceCode: Workspace.UISourceCode.UISourceCode): Promise<void> {\n    const shouldDelete = await UI.UIUtils.ConfirmDialog.show(\n        i18nString(UIStrings.areYouSureYouWantToDeleteThis), undefined, {jslogContext: 'delete-file-confirmation'});\n    if (shouldDelete) {\n      uiSourceCode.project().deleteFile(uiSourceCode);\n    }\n  }\n\n  handleFileContextMenu(event: Event, node: NavigatorUISourceCodeTreeNode): void {\n    const uiSourceCode = node.uiSourceCode();\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.appendApplicableItems(uiSourceCode);\n\n    const project = uiSourceCode.project();\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      contextMenu.editSection().appendItem(\n          i18nString(UIStrings.rename), this.handleContextMenuRename.bind(this, node), {jslogContext: 'rename'});\n      contextMenu.editSection().appendItem(\n          i18nString(UIStrings.makeACopy),\n          this.handleContextMenuCreate.bind(this, project, Platform.DevToolsPath.EmptyEncodedPathString, uiSourceCode),\n          {jslogContext: 'make-a-copy'});\n      contextMenu.editSection().appendItem(\n          i18nString(UIStrings.delete), this.handleContextMenuDelete.bind(this, uiSourceCode),\n          {jslogContext: 'delete'});\n    }\n\n    void contextMenu.show();\n  }\n\n  private async handleDeleteFolder(node: NavigatorTreeNode): Promise<void> {\n    const warningMsg =\n        `${i18nString(UIStrings.areYouSureYouWantToDeleteFolder)}\\n${i18nString(UIStrings.actionCannotBeUndone)}`;\n    const shouldRemove =\n        await UI.UIUtils.ConfirmDialog.show(warningMsg, undefined, {jslogContext: 'delete-folder-confirmation'});\n    if (shouldRemove) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.OverrideTabDeleteFolderContextMenu);\n      const topNode = this.findTopNonMergedNode(node);\n      await this.removeUISourceCodeFromProject(topNode);\n      await this.deleteDirectoryRecursively(topNode);\n    }\n  }\n\n  private async removeUISourceCodeFromProject(node: NavigatorTreeNode): Promise<void> {\n    node.children().forEach(async child => {\n      await this.removeUISourceCodeFromProject(child);\n    });\n\n    if (node instanceof NavigatorUISourceCodeTreeNode) {\n      node.uiSourceCode().project().removeUISourceCode(node.uiSourceCode().url());\n    }\n  }\n\n  private async deleteDirectoryRecursively(node: NavigatorTreeNode): Promise<void> {\n    if (!(node instanceof NavigatorFolderTreeNode)) {\n      return;\n    }\n\n    await Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance()\n        .project()\n        ?.deleteDirectoryRecursively(node.folderPath);\n  }\n\n  private findTopNonMergedNode(node: NavigatorTreeNode): NavigatorTreeNode {\n    // multiple folder nodes can be merged into one if it only contains one file\n    // e.g. the folder of \"abc.com/assets/css/button.css\" can be \"abc.com/assets/css\"\n    // find the top non-merged node (abc.com) recursively\n\n    if (!node.isMerged) {\n      return node;\n    }\n\n    if (!(node.parent instanceof NavigatorFolderTreeNode)) {\n      return node;\n    }\n\n    return this.findTopNonMergedNode(node.parent);\n  }\n\n  handleFolderContextMenu(event: Event, node: NavigatorFolderTreeNode): void {\n    const path = node.folderPath || Platform.DevToolsPath.EmptyEncodedPathString;\n    const project = node.project || null;\n\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    NavigatorView.appendSearchItem(contextMenu, path);\n\n    if (!project) {\n      return;\n    }\n\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      const folderPath = Common.ParsedURL.ParsedURL.urlToRawPathString(\n          Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.completeURL(project, path),\n          Host.Platform.isWin());\n      contextMenu.revealSection().appendItem(\n          i18nString(UIStrings.openFolder),\n          () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.showItemInFolder(folderPath),\n          {jslogContext: 'open-folder'});\n      if (project.canCreateFile()) {\n        contextMenu.defaultSection().appendItem(i18nString(UIStrings.newFile), () => {\n          this.handleContextMenuCreate(project, path, undefined);\n        }, {jslogContext: 'new-file'});\n      }\n    } else if (node.origin && node.folderPath) {\n      const url = Common.ParsedURL.ParsedURL.concatenate(node.origin, '/', node.folderPath);\n      const options = {\n        isContentScript: node.recursiveProperties.exclusivelyContentScripts || false,\n        isKnownThirdParty: node.recursiveProperties.exclusivelyThirdParty || false,\n        isCurrentlyIgnoreListed: node.recursiveProperties.exclusivelyIgnored || false,\n      };\n      for (const {text, callback, jslogContext} of Bindings.IgnoreListManager.IgnoreListManager.instance()\n               .getIgnoreListFolderContextMenuItems(url, options)) {\n        contextMenu.defaultSection().appendItem(text, callback, {jslogContext});\n      }\n    }\n\n    if (project.canExcludeFolder(path)) {\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.excludeFolder), this.handleContextMenuExclude.bind(this, project, path),\n          {jslogContext: 'exclude-folder'});\n    }\n\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      const isFileOverrides =\n          (project as Persistence.FileSystemWorkspaceBinding.FileSystem).fileSystem().type() === 'overrides';\n\n      if (!isFileOverrides) {\n        if (node instanceof NavigatorGroupTreeNode) {\n          contextMenu.defaultSection().appendItem(i18nString(UIStrings.removeFolderFromWorkspace), async () => {\n            const warningMessage = `${i18nString(UIStrings.areYouSureYouWantToRemoveThis, {\n              PH1: (node as NavigatorGroupTreeNode).title,\n            })}\\n${i18nString(UIStrings.workspaceStopSyncing)}`;\n            const shouldRemove = await UI.UIUtils.ConfirmDialog.show(warningMessage, undefined, {\n              okButtonLabel: i18nString(UIStrings.remove),\n              jslogContext: 'remove-folder-from-workspace-confirmation',\n            });\n            if (shouldRemove) {\n              project.remove();\n            }\n          }, {jslogContext: 'remove-folder-from-workspace'});\n        }\n      } else {\n        if (!(node instanceof NavigatorGroupTreeNode)) {\n          contextMenu.defaultSection().appendItem(\n              i18nString(UIStrings.delete), this.handleDeleteFolder.bind(this, node), {jslogContext: 'delete'});\n        }\n      }\n    }\n\n    void contextMenu.show();\n  }\n\n  rename(node: NavigatorUISourceCodeTreeNode, creatingNewUISourceCode: boolean): void {\n    const uiSourceCode = node.uiSourceCode();\n    node.rename(callback.bind(this));\n\n    function callback(this: NavigatorView, committed: boolean): void {\n      if (!creatingNewUISourceCode) {\n        return;\n      }\n      if (!committed) {\n        uiSourceCode.remove();\n      } else if (node.treeElement && node.treeElement.listItemElement.hasFocus()) {\n        this.sourceSelected(uiSourceCode, true);\n      }\n    }\n  }\n\n  async create(\n      project: Workspace.Workspace.Project, path: Platform.DevToolsPath.EncodedPathString,\n      uiSourceCodeToCopy?: Workspace.UISourceCode.UISourceCode): Promise<void> {\n    let content = '';\n    if (uiSourceCodeToCopy) {\n      content = (await uiSourceCodeToCopy.requestContent()).content || '';\n    }\n    const uiSourceCode = await project.createFile(path, null, content);\n    if (!uiSourceCode) {\n      return;\n    }\n    this.sourceSelected(uiSourceCode, false);\n    const node = this.revealUISourceCode(uiSourceCode, true);\n    if (node) {\n      this.rename(node, true);\n    }\n  }\n\n  private groupingChanged(): void {\n    this.reset(true);\n    this.initGrouping();\n    // Reset the workspace to repopulate filesystem folders.\n    this.resetWorkspace(Workspace.Workspace.WorkspaceImpl.instance());\n    this.workspaceInternal.uiSourceCodes().forEach(this.addUISourceCode.bind(this));\n  }\n\n  private ignoreListChanged(): void {\n    if (Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.JUST_MY_CODE)) {\n      this.groupingChanged();\n    } else {\n      this.rootNode.updateTitleRecursive();\n    }\n  }\n\n  private initGrouping(): void {\n    this.groupByFrame = true;\n    this.groupByDomain = this.navigatorGroupByFolderSetting.get();\n    this.groupByFolder = this.groupByDomain;\n    if (this.navigatorGroupByAuthoredExperiment) {\n      this.groupByAuthored = Root.Runtime.experiments.isEnabled(this.navigatorGroupByAuthoredExperiment);\n    } else {\n      this.groupByAuthored = false;\n    }\n  }\n\n  private resetForTest(): void {\n    this.reset();\n    this.workspaceInternal.uiSourceCodes().forEach(this.addUISourceCode.bind(this));\n  }\n\n  private discardFrame(frame: SDK.ResourceTreeModel.ResourceTreeFrame, isAuthored: boolean): void {\n    if (isAuthored) {\n      return;\n    }\n    const node = this.frameNodes.get(frame);\n    if (!node) {\n      return;\n    }\n\n    if (node.parent) {\n      node.parent.removeChild(node);\n    }\n    this.frameNodes.delete(frame);\n    for (const child of frame.childFrames) {\n      this.discardFrame(child, isAuthored);\n    }\n  }\n\n  targetAdded(_target: SDK.Target.Target): void {\n  }\n\n  targetRemoved(target: SDK.Target.Target): void {\n    const rootOrDeployed = this.rootOrDeployedNode();\n    const targetNode = rootOrDeployed.child('target:' + target.id());\n    if (targetNode) {\n      rootOrDeployed.removeChild(targetNode);\n    }\n  }\n\n  private targetNameChanged(event: Common.EventTarget.EventTargetEvent<SDK.Target.Target>): void {\n    const target = event.data;\n    const targetNode = this.rootOrDeployedNode().child('target:' + target.id());\n    if (targetNode) {\n      targetNode.setTitle(target.name());\n    }\n  }\n  override wasShown(): void {\n    super.wasShown();\n    this.scriptsTree.registerCSSFiles([navigatorTreeStyles]);\n    this.registerCSSFiles([navigatorViewStyles]);\n  }\n}\n\nconst boostOrderForNode = new WeakSet<UI.TreeOutline.TreeElement>();\n\nexport class NavigatorFolderTreeElement extends UI.TreeOutline.TreeElement {\n  private readonly nodeType: string;\n  private readonly navigatorView: NavigatorView;\n  private hoverCallback: ((arg0: boolean) => void)|undefined;\n  node!: NavigatorTreeNode;\n  private hovered?: boolean;\n  private isIgnoreListed?: boolean;\n  private isFromSourceMap: boolean;\n\n  constructor(navigatorView: NavigatorView, type: string, title: string, hoverCallback?: ((arg0: boolean) => void)) {\n    super('', true, NavigatorFolderTreeElement.#contextForType(type));\n    this.listItemElement.classList.add('navigator-' + type + '-tree-item', 'navigator-folder-tree-item');\n    UI.ARIAUtils.setLabel(this.listItemElement, `${title}, ${type}`);\n    this.nodeType = type;\n    this.title = title;\n    this.tooltip = title;\n    this.navigatorView = navigatorView;\n    this.hoverCallback = hoverCallback;\n    this.isFromSourceMap = false;\n\n    let iconType = 'folder';\n\n    if (type === Types.Domain) {\n      iconType = 'cloud';\n    } else if (type === Types.Frame) {\n      iconType = 'frame';\n    } else if (type === Types.Worker) {\n      iconType = 'gears';\n    } else if (type === Types.Authored) {\n      iconType = 'code';\n    } else if (type === Types.Deployed) {\n      iconType = 'deployed';\n    }\n\n    const icon = IconButton.Icon.create(iconType);\n    this.setLeadingIcons([icon]);\n  }\n\n  override async onpopulate(): Promise<void> {\n    this.node.populate();\n  }\n\n  override onattach(): void {\n    this.collapse();\n    this.node.onattach();\n    this.listItemElement.addEventListener('contextmenu', this.handleContextMenuEvent.bind(this), false);\n    this.listItemElement.addEventListener('mousemove', this.mouseMove.bind(this), false);\n    this.listItemElement.addEventListener('mouseleave', this.mouseLeave.bind(this), false);\n  }\n\n  setIgnoreListed(isIgnoreListed: boolean): void {\n    if (this.isIgnoreListed !== isIgnoreListed) {\n      this.isIgnoreListed = isIgnoreListed;\n      this.listItemElement.classList.toggle('is-ignore-listed', isIgnoreListed);\n      this.updateTooltip();\n    }\n  }\n\n  setFromSourceMap(isFromSourceMap: boolean): void {\n    this.isFromSourceMap = isFromSourceMap;\n    this.listItemElement.classList.toggle('is-from-source-map', isFromSourceMap);\n  }\n\n  setNode(node: NavigatorTreeNode): void {\n    this.node = node;\n    this.updateTooltip();\n    UI.ARIAUtils.setLabel(this.listItemElement, `${this.title}, ${this.nodeType}`);\n  }\n\n  private updateTooltip(): void {\n    if (this.node.tooltip) {\n      this.tooltip = this.node.tooltip;\n    } else {\n      const paths = [];\n      let currentNode: NavigatorTreeNode|null = this.node;\n      while (currentNode && !currentNode.isRoot() && currentNode.type === this.node.type) {\n        paths.push(currentNode.title);\n        currentNode = currentNode.parent;\n      }\n      paths.reverse();\n      let tooltip = paths.join('/');\n      if (this.isIgnoreListed) {\n        tooltip = i18nString(UIStrings.sIgnoreListed, {PH1: tooltip});\n      }\n      this.tooltip = tooltip;\n    }\n  }\n\n  private handleContextMenuEvent(event: Event): void {\n    if (!this.node) {\n      return;\n    }\n    this.select();\n    this.navigatorView.handleFolderContextMenu(event, this.node as NavigatorFolderTreeNode);\n  }\n\n  private mouseMove(_event: Event): void {\n    if (this.hovered || !this.hoverCallback) {\n      return;\n    }\n    this.hovered = true;\n    this.hoverCallback(true);\n  }\n\n  private mouseLeave(_event: Event): void {\n    if (!this.hoverCallback) {\n      return;\n    }\n    this.hovered = false;\n    this.hoverCallback(false);\n  }\n\n  static #contextForType(type: string): string {\n    switch (type) {\n      case Types.Domain:\n        return 'domain';\n      case Types.Frame:\n        return 'frame';\n      case Types.Worker:\n        return 'worker';\n      case Types.Authored:\n        return 'authored';\n      case Types.Deployed:\n        return 'deployed';\n    }\n    return 'folder';\n  }\n}\n\nexport class NavigatorSourceTreeElement extends UI.TreeOutline.TreeElement {\n  readonly nodeType: string;\n  readonly node: NavigatorUISourceCodeTreeNode;\n  private readonly navigatorView: NavigatorView;\n  uiSourceCodeInternal: Workspace.UISourceCode.UISourceCode;\n\n  constructor(\n      navigatorView: NavigatorView, uiSourceCode: Workspace.UISourceCode.UISourceCode, title: string,\n      node: NavigatorUISourceCodeTreeNode) {\n    super('', false, uiSourceCode.contentType().name());\n    this.nodeType = Types.File;\n    this.node = node;\n    this.title = title;\n    this.listItemElement.classList.add(\n        'navigator-' + uiSourceCode.contentType().name() + '-tree-item', 'navigator-file-tree-item');\n    this.tooltip = uiSourceCode.url();\n    UI.ARIAUtils.setLabel(this.listItemElement, `${uiSourceCode.name()}, ${this.nodeType}`);\n    Common.EventTarget.fireEvent('source-tree-file-added', uiSourceCode.fullDisplayName());\n    this.navigatorView = navigatorView;\n    this.uiSourceCodeInternal = uiSourceCode;\n    this.updateIcon();\n    (this.titleElement as HTMLElement).setAttribute('jslog', `${VisualLogging.value('title').track({change: true})}`);\n  }\n\n  updateIcon(): void {\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(this.uiSourceCodeInternal);\n    const networkPersistenceManager = Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance();\n    let iconType = 'document';\n    let iconStyles: string[] = [];\n    if (binding) {\n      if (Snippets.ScriptSnippetFileSystem.isSnippetsUISourceCode(binding.fileSystem)) {\n        iconType = 'snippet';\n      }\n      const badgeIsPurple = networkPersistenceManager.project() === binding.fileSystem.project();\n      iconStyles = badgeIsPurple ? ['dot', 'purple'] : ['dot', 'green'];\n    } else if (networkPersistenceManager.isActiveHeaderOverrides(this.uiSourceCode)) {\n      iconStyles = ['dot', 'purple'];\n    } else {\n      if (Snippets.ScriptSnippetFileSystem.isSnippetsUISourceCode(this.uiSourceCodeInternal)) {\n        iconType = 'snippet';\n      }\n    }\n\n    const icon = IconButton.Icon.create(iconType, iconStyles.join(' '));\n    if (binding) {\n      UI.Tooltip.Tooltip.install(\n          icon, Persistence.PersistenceUtils.PersistenceUtils.tooltipForUISourceCode(this.uiSourceCodeInternal));\n    }\n    this.setLeadingIcons([icon]);\n  }\n\n  updateAccessibleName(): void {\n    UI.ARIAUtils.setLabel(this.listItemElement, `${this.uiSourceCodeInternal.name()}, ${this.nodeType}`);\n  }\n\n  get uiSourceCode(): Workspace.UISourceCode.UISourceCode {\n    return this.uiSourceCodeInternal;\n  }\n\n  override onattach(): void {\n    this.listItemElement.draggable = true;\n    this.listItemElement.addEventListener('click', this.onclick.bind(this), false);\n    this.listItemElement.addEventListener('contextmenu', this.handleContextMenuEvent.bind(this), false);\n    this.listItemElement.addEventListener('dragstart', this.ondragstart.bind(this), false);\n  }\n\n  private shouldRenameOnMouseDown(): boolean {\n    if (!this.uiSourceCodeInternal.canRename()) {\n      return false;\n    }\n    if (!this.treeOutline) {\n      return false;\n    }\n    const isSelected = this === this.treeOutline.selectedTreeElement;\n    return isSelected && this.treeOutline.element.hasFocus() && !UI.UIUtils.isBeingEdited(this.treeOutline.element);\n  }\n\n  override selectOnMouseDown(event: MouseEvent): void {\n    if (event.which !== 1 || !this.shouldRenameOnMouseDown()) {\n      super.selectOnMouseDown(event);\n      return;\n    }\n    window.setTimeout(rename.bind(this), 300);\n\n    function rename(this: NavigatorSourceTreeElement): void {\n      if (this.shouldRenameOnMouseDown()) {\n        this.navigatorView.rename(this.node, false);\n      }\n    }\n  }\n\n  private ondragstart(event: DragEvent): void {\n    if (!event.dataTransfer) {\n      return;\n    }\n    event.dataTransfer.setData('text/plain', this.uiSourceCodeInternal.url());\n    event.dataTransfer.effectAllowed = 'copy';\n  }\n\n  override onspace(): boolean {\n    this.navigatorView.sourceSelected(this.uiSourceCode, true);\n    return true;\n  }\n\n  private onclick(_event: Event): void {\n    this.navigatorView.sourceSelected(this.uiSourceCode, false);\n  }\n\n  override ondblclick(event: Event): boolean {\n    const middleClick = (event as MouseEvent).button === 1;\n    this.navigatorView.sourceSelected(this.uiSourceCode, !middleClick);\n    return false;\n  }\n\n  override onenter(): boolean {\n    this.navigatorView.sourceSelected(this.uiSourceCode, true);\n    return true;\n  }\n\n  override ondelete(): boolean {\n    return true;\n  }\n\n  private handleContextMenuEvent(event: Event): void {\n    this.select();\n    this.navigatorView.handleFileContextMenu(event, this.node);\n  }\n}\n\nexport type NavigatorRecursiveTreeNodeProperties = {\n  exclusivelySourceMapped: boolean|null,\n  exclusivelyIgnored: boolean|null,\n  exclusivelyThirdParty: boolean|null,\n  exclusivelyContentScripts: boolean|null,\n};\n\nexport class NavigatorTreeNode {\n  id: string;\n  protected navigatorView: NavigatorView;\n  type: string;\n  childrenInternal: Map<string, NavigatorTreeNode>;\n  private populated: boolean;\n  isMerged: boolean;\n  parent!: NavigatorTreeNode|null;\n  title!: string;\n  tooltip?: string;\n  recursiveProperties: NavigatorRecursiveTreeNodeProperties;\n\n  constructor(navigatorView: NavigatorView, id: string, type: string, tooltip?: string) {\n    this.id = id;\n    this.navigatorView = navigatorView;\n    this.type = type;\n    this.childrenInternal = new Map();\n    this.tooltip = tooltip;\n\n    this.populated = false;\n    this.isMerged = false;\n    this.recursiveProperties = {\n      exclusivelySourceMapped: null,\n      exclusivelyIgnored: null,\n      exclusivelyContentScripts: null,\n      exclusivelyThirdParty: null,\n    };\n  }\n\n  treeNode(): UI.TreeOutline.TreeElement {\n    throw 'Not implemented';\n  }\n\n  dispose(): void {\n  }\n\n  updateTitle(): void {\n  }\n\n  updateTitleRecursive(): void {\n    for (const child of this.children()) {\n      child.updateTitleRecursive();\n    }\n    this.updateTitle();\n  }\n\n  updateTitleBubbleUp(): void {\n    this.updateTitle();\n    if (this.parent) {\n      this.parent.updateTitleBubbleUp();\n    }\n  }\n\n  isRoot(): boolean {\n    return false;\n  }\n\n  hasChildren(): boolean {\n    return true;\n  }\n\n  onattach(): void {\n  }\n\n  setTitle(_title: string): void {\n    throw 'Not implemented';\n  }\n\n  populate(): void {\n    if (this.isPopulated()) {\n      return;\n    }\n    if (this.parent) {\n      this.parent.populate();\n    }\n    this.populated = true;\n    this.wasPopulated();\n  }\n\n  wasPopulated(): void {\n    const children = this.children();\n    for (let i = 0; i < children.length; ++i) {\n      this.navigatorView.appendChild(this.treeNode(), (children[i].treeNode() as UI.TreeOutline.TreeElement));\n    }\n  }\n\n  didAddChild(node: NavigatorTreeNode): void {\n    if (this.isPopulated()) {\n      this.navigatorView.appendChild(this.treeNode(), (node.treeNode() as UI.TreeOutline.TreeElement));\n    }\n  }\n\n  willRemoveChild(node: NavigatorTreeNode): void {\n    if (this.isPopulated()) {\n      this.navigatorView.removeChild(this.treeNode(), (node.treeNode() as UI.TreeOutline.TreeElement));\n    }\n  }\n\n  isPopulated(): boolean {\n    return this.populated;\n  }\n\n  isEmpty(): boolean {\n    return !this.childrenInternal.size;\n  }\n\n  children(): NavigatorTreeNode[] {\n    return [...this.childrenInternal.values()];\n  }\n\n  child(id: string): NavigatorTreeNode|null {\n    return this.childrenInternal.get(id) || null;\n  }\n\n  appendChild(node: NavigatorTreeNode): void {\n    this.childrenInternal.set(node.id, node);\n    node.parent = this;\n    this.didAddChild(node);\n  }\n\n  removeChild(node: NavigatorTreeNode): void {\n    this.willRemoveChild(node);\n    this.childrenInternal.delete(node.id);\n    node.parent = null;\n    node.dispose();\n  }\n\n  reset(): void {\n    this.childrenInternal.clear();\n  }\n}\n\nexport class NavigatorRootTreeNode extends NavigatorTreeNode {\n  constructor(navigatorView: NavigatorView) {\n    super(navigatorView, '', Types.Root);\n  }\n\n  override isRoot(): boolean {\n    return true;\n  }\n\n  override treeNode(): UI.TreeOutline.TreeElement {\n    return this.navigatorView.scriptsTree.rootElement();\n  }\n}\n\nexport class NavigatorUISourceCodeTreeNode extends NavigatorTreeNode {\n  uiSourceCodeInternal: Workspace.UISourceCode.UISourceCode;\n  treeElement: NavigatorSourceTreeElement|null;\n  private eventListeners: Common.EventTarget.EventDescriptor[];\n  private readonly frameInternal: SDK.ResourceTreeModel.ResourceTreeFrame|null;\n  constructor(\n      navigatorView: NavigatorView, uiSourceCode: Workspace.UISourceCode.UISourceCode,\n      frame: SDK.ResourceTreeModel.ResourceTreeFrame|null) {\n    super(navigatorView, 'UISourceCode:' + uiSourceCode.canononicalScriptId(), Types.File);\n    this.uiSourceCodeInternal = uiSourceCode;\n    this.treeElement = null;\n    this.eventListeners = [];\n    this.frameInternal = frame;\n    this.recursiveProperties.exclusivelySourceMapped = uiSourceCode.contentType().isFromSourceMap();\n    if (uiSourceCode.contentType().isScript()) {\n      // These properties affect ignore-listing menus and only matter when the UISourceCode is a script\n      this.recursiveProperties.exclusivelyThirdParty = uiSourceCode.isKnownThirdParty();\n      this.recursiveProperties.exclusivelyContentScripts =\n          uiSourceCode.project().type() === Workspace.Workspace.projectTypes.ContentScripts;\n    }\n  }\n\n  frame(): SDK.ResourceTreeModel.ResourceTreeFrame|null {\n    return this.frameInternal;\n  }\n\n  uiSourceCode(): Workspace.UISourceCode.UISourceCode {\n    return this.uiSourceCodeInternal;\n  }\n\n  override treeNode(): UI.TreeOutline.TreeElement {\n    if (this.treeElement) {\n      return this.treeElement;\n    }\n\n    this.treeElement = new NavigatorSourceTreeElement(this.navigatorView, this.uiSourceCodeInternal, '', this);\n    this.updateTitle();\n\n    const updateTitleBound = this.updateTitle.bind(this, undefined);\n    this.eventListeners = [\n      this.uiSourceCodeInternal.addEventListener(Workspace.UISourceCode.Events.TitleChanged, updateTitleBound),\n      this.uiSourceCodeInternal.addEventListener(Workspace.UISourceCode.Events.WorkingCopyChanged, updateTitleBound),\n      this.uiSourceCodeInternal.addEventListener(Workspace.UISourceCode.Events.WorkingCopyCommitted, updateTitleBound),\n    ];\n    return this.treeElement;\n  }\n\n  override updateTitle(ignoreIsDirty?: boolean): void {\n    const isIgnoreListed =\n        Bindings.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n            this.uiSourceCodeInternal);\n    if (this.uiSourceCodeInternal.contentType().isScript() || isIgnoreListed) {\n      this.recursiveProperties.exclusivelyIgnored = isIgnoreListed;\n    }\n\n    if (!this.treeElement) {\n      return;\n    }\n\n    let titleText = this.uiSourceCodeInternal.displayName();\n    if (!ignoreIsDirty && this.uiSourceCodeInternal.isDirty()) {\n      titleText = '*' + titleText;\n    }\n\n    this.treeElement.title = titleText;\n    this.treeElement.updateIcon();\n\n    this.treeElement.listItemElement.classList.toggle('is-ignore-listed', isIgnoreListed);\n\n    let tooltip: string = this.uiSourceCodeInternal.url();\n    if (this.uiSourceCodeInternal.contentType().isFromSourceMap()) {\n      tooltip = i18nString(UIStrings.sFromSourceMap, {PH1: this.uiSourceCodeInternal.displayName()});\n    }\n    if (isIgnoreListed) {\n      tooltip = i18nString(UIStrings.sIgnoreListed, {PH1: tooltip});\n    }\n\n    this.treeElement.tooltip = tooltip;\n    this.treeElement.updateAccessibleName();\n\n    this.parent?.childrenInternal.delete(this.id);\n    this.id = 'UISourceCode:' + this.uiSourceCodeInternal.canononicalScriptId();\n    this.parent?.childrenInternal.set(this.id, this);\n  }\n\n  override hasChildren(): boolean {\n    return false;\n  }\n\n  override dispose(): void {\n    Common.EventTarget.removeEventListeners(this.eventListeners);\n  }\n\n  reveal(select?: boolean): void {\n    if (this.parent) {\n      this.parent.populate();\n      this.parent.treeNode().expand();\n    }\n    if (this.treeElement) {\n      this.treeElement.reveal(true);\n      if (select) {\n        this.treeElement.select(true);\n      }\n    }\n  }\n\n  rename(callback?: ((arg0: boolean) => void)): void {\n    if (!this.treeElement) {\n      return;\n    }\n\n    this.treeElement.listItemElement.focus();\n\n    if (!this.treeElement.treeOutline) {\n      return;\n    }\n\n    // Tree outline should be marked as edited as well as the tree element to prevent search from starting.\n    const treeOutlineElement = this.treeElement.treeOutline.element;\n    UI.UIUtils.markBeingEdited(treeOutlineElement, true);\n\n    function commitHandler(\n        this: NavigatorUISourceCodeTreeNode, element: Element, newTitle: string, oldTitle: string): void {\n      if (newTitle !== oldTitle) {\n        if (this.treeElement) {\n          this.treeElement.title = newTitle;\n        }\n        // necessary cast to RawPathString as alternative would be altering type of Config<T>\n        void this.uiSourceCodeInternal.rename(newTitle as Platform.DevToolsPath.RawPathString)\n            .then(renameCallback.bind(this));\n        return;\n      }\n      afterEditing.call(this, true);\n    }\n\n    function renameCallback(this: NavigatorUISourceCodeTreeNode, success: boolean): void {\n      if (!success) {\n        UI.UIUtils.markBeingEdited(treeOutlineElement, false);\n        this.updateTitle();\n        this.rename(callback);\n        return;\n      }\n      if (this.treeElement) {\n        const {parent} = this.treeElement;\n        if (parent) {\n          parent.removeChild(this.treeElement);\n          parent.appendChild(this.treeElement);\n          this.treeElement.select();\n        }\n      }\n      afterEditing.call(this, true);\n    }\n\n    function afterEditing(this: NavigatorUISourceCodeTreeNode, committed: boolean): void {\n      UI.UIUtils.markBeingEdited(treeOutlineElement, false);\n      this.updateTitle();\n      if (callback) {\n        callback(committed);\n      }\n    }\n\n    this.updateTitle(true);\n    this.treeElement.startEditingTitle(\n        new UI.InplaceEditor.Config(commitHandler.bind(this), afterEditing.bind(this, false)));\n  }\n}\n\nexport class NavigatorFolderTreeNode extends NavigatorTreeNode {\n  project: Workspace.Workspace.Project|null;\n  readonly folderPath: Platform.DevToolsPath.EncodedPathString;\n  readonly origin: Platform.DevToolsPath.UrlString;\n  override title: string;\n  treeElement!: NavigatorFolderTreeElement|null;\n  constructor(\n      navigatorView: NavigatorView, project: Workspace.Workspace.Project|null, id: string, type: string,\n      folderPath: Platform.DevToolsPath.EncodedPathString, title: string, origin: Platform.DevToolsPath.UrlString) {\n    super(navigatorView, id, type);\n    this.project = project;\n    this.folderPath = folderPath;\n    this.title = title;\n    this.origin = origin;\n  }\n\n  override treeNode(): UI.TreeOutline.TreeElement {\n    if (this.treeElement) {\n      return this.treeElement;\n    }\n    this.treeElement = this.createTreeElement(this.title, this);\n    this.updateTitle();\n    return this.treeElement;\n  }\n\n  override updateTitle(): void {\n    let propName: keyof NavigatorRecursiveTreeNodeProperties;\n    for (propName in this.recursiveProperties) {\n      let propValue: boolean|null = null;\n      for (const child of this.children()) {\n        if (child.recursiveProperties[propName] === false) {\n          propValue = false;\n          break;\n        } else if (child.recursiveProperties[propName]) {\n          propValue = true;\n        }\n      }\n      this.recursiveProperties[propName] = propValue;\n    }\n\n    if (!this.treeElement) {\n      return;\n    }\n\n    this.treeElement.setFromSourceMap(this.recursiveProperties.exclusivelySourceMapped || false);\n    this.treeElement.setIgnoreListed(this.recursiveProperties.exclusivelyIgnored || false);\n\n    if (!this.project || this.project.type() !== Workspace.Workspace.projectTypes.FileSystem) {\n      return;\n    }\n\n    const absoluteFileSystemPath = Common.ParsedURL.ParsedURL.concatenate(\n        Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.fileSystemPath(\n            this.project.id() as Platform.DevToolsPath.UrlString),\n        '/', this.folderPath);\n    const hasMappedFiles =\n        Persistence.Persistence.PersistenceImpl.instance().filePathHasBindings(absoluteFileSystemPath);\n    this.treeElement.listItemElement.classList.toggle('has-mapped-files', hasMappedFiles);\n  }\n\n  private createTreeElement(title: string, node: NavigatorTreeNode): NavigatorFolderTreeElement {\n    const treeElement = new NavigatorFolderTreeElement(this.navigatorView, this.type, title);\n    treeElement.setNode(node);\n    return treeElement;\n  }\n\n  override wasPopulated(): void {\n    // @ts-ignore These types are invalid, but removing this check causes wrong behavior\n    if (!this.treeElement || this.treeElement.node !== this) {\n      return;\n    }\n    this.addChildrenRecursive();\n  }\n\n  private addChildrenRecursive(): void {\n    const children = this.children();\n    for (let i = 0; i < children.length; ++i) {\n      const child = children[i];\n      this.didAddChild(child);\n      if (child instanceof NavigatorFolderTreeNode) {\n        child.addChildrenRecursive();\n      }\n    }\n  }\n\n  private shouldMerge(node: NavigatorTreeNode): boolean {\n    return this.type !== Types.Domain && node instanceof NavigatorFolderTreeNode;\n  }\n\n  override didAddChild(node: NavigatorTreeNode): void {\n    if (!this.treeElement) {\n      return;\n    }\n\n    let children = this.children();\n\n    if (children.length === 1 && this.shouldMerge(node)) {\n      node.isMerged = true;\n      this.treeElement.title = this.treeElement.title + '/' + node.title;\n      (node as NavigatorFolderTreeNode).treeElement = this.treeElement;\n      node.updateTitle();\n      this.treeElement.setNode(node);\n      return;\n    }\n\n    let oldNode;\n    if (children.length === 2) {\n      oldNode = children[0] !== node ? children[0] : children[1];\n    }\n    if (oldNode && oldNode.isMerged) {\n      oldNode.isMerged = false;\n      const mergedToNodes = [];\n      mergedToNodes.push(this);\n      let treeNode: (NavigatorTreeNode|null)|NavigatorTreeNode|this = this;\n      while (treeNode && treeNode.isMerged) {\n        treeNode = treeNode.parent;\n        if (treeNode) {\n          mergedToNodes.push(treeNode);\n        }\n      }\n      mergedToNodes.reverse();\n      const titleText = mergedToNodes.map(node => node.title).join('/');\n\n      const nodes = [];\n      treeNode = oldNode;\n      do {\n        nodes.push(treeNode);\n        children = treeNode.children();\n        treeNode = children.length === 1 ? children[0] : null;\n      } while (treeNode && treeNode.isMerged);\n\n      if (!this.isPopulated()) {\n        this.treeElement.title = titleText;\n        this.treeElement.setNode(this);\n        for (let i = 0; i < nodes.length; ++i) {\n          (nodes[i] as NavigatorFolderTreeNode).treeElement = null;\n          nodes[i].isMerged = false;\n        }\n        this.updateTitle();\n        return;\n      }\n      const oldTreeElement = this.treeElement;\n      const treeElement = this.createTreeElement(titleText, this);\n      for (let i = 0; i < mergedToNodes.length; ++i) {\n        (mergedToNodes[i] as NavigatorFolderTreeNode).treeElement = treeElement;\n        mergedToNodes[i].updateTitle();\n      }\n      if (oldTreeElement.parent) {\n        this.navigatorView.appendChild(oldTreeElement.parent, treeElement);\n      }\n\n      oldTreeElement.setNode(nodes[nodes.length - 1]);\n      oldTreeElement.title = nodes.map(node => node.title).join('/');\n      if (oldTreeElement.parent) {\n        this.navigatorView.removeChild(oldTreeElement.parent, oldTreeElement);\n      }\n      this.navigatorView.appendChild(this.treeElement, oldTreeElement);\n      if (oldTreeElement.expanded) {\n        treeElement.expand();\n      }\n      this.updateTitle();\n    }\n    if (this.isPopulated()) {\n      this.navigatorView.appendChild(this.treeElement, node.treeNode());\n    }\n  }\n\n  override willRemoveChild(node: NavigatorTreeNode): void {\n    const actualNode = (node as NavigatorFolderTreeNode);\n    if (actualNode.isMerged || !this.isPopulated() || !this.treeElement || !actualNode.treeElement) {\n      return;\n    }\n    this.navigatorView.removeChild(this.treeElement, actualNode.treeElement);\n  }\n}\n\nexport class NavigatorGroupTreeNode extends NavigatorTreeNode {\n  private readonly project: Workspace.Workspace.Project|null;\n  override title: string;\n  private hoverCallback?: ((arg0: boolean) => void);\n  private treeElement?: NavigatorFolderTreeElement;\n  constructor(\n      navigatorView: NavigatorView, project: Workspace.Workspace.Project|null, id: string, type: string, title: string,\n      tooltip?: string) {\n    super(navigatorView, id, type, tooltip);\n    this.project = project;\n    this.title = title;\n    this.populate();\n  }\n\n  setHoverCallback(hoverCallback: (arg0: boolean) => void): void {\n    this.hoverCallback = hoverCallback;\n  }\n\n  override treeNode(): UI.TreeOutline.TreeElement {\n    if (this.treeElement) {\n      return this.treeElement;\n    }\n    this.treeElement = new NavigatorFolderTreeElement(this.navigatorView, this.type, this.title, this.hoverCallback);\n    this.treeElement.setNode(this);\n    return this.treeElement;\n  }\n\n  override onattach(): void {\n    this.updateTitle();\n  }\n\n  override updateTitle(): void {\n    if (!this.treeElement || !this.project || this.project.type() !== Workspace.Workspace.projectTypes.FileSystem) {\n      return;\n    }\n    const fileSystemPath = Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.fileSystemPath(\n        this.project.id() as Platform.DevToolsPath.UrlString);\n    const wasActive = this.treeElement.listItemElement.classList.contains('has-mapped-files');\n    const isActive = Persistence.Persistence.PersistenceImpl.instance().filePathHasBindings(fileSystemPath);\n    if (wasActive === isActive) {\n      return;\n    }\n    this.treeElement.listItemElement.classList.toggle('has-mapped-files', isActive);\n    if (this.treeElement.childrenListElement.hasFocus()) {\n      return;\n    }\n    if (isActive) {\n      this.treeElement.expand();\n    } else {\n      this.treeElement.collapse();\n    }\n  }\n\n  override setTitle(title: string): void {\n    this.title = title;\n    if (this.treeElement) {\n      this.treeElement.title = this.title;\n    }\n  }\n}\n"]}