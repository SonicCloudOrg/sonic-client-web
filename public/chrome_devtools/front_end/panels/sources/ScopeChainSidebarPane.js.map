{"version":3,"file":"ScopeChainSidebarPane.js","sourceRoot":"","sources":["../../../../../../front_end/panels/sources/ScopeChainSidebarPane.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as SourceMapScopes from '../../models/source_map_scopes/source_map_scopes.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport scopeChainSidebarPaneStyles from './scopeChainSidebarPane.css.js';\n\nconst UIStrings = {\n  /**\n   *@description Loading indicator in Scope Sidebar Pane of the Sources panel\n   */\n  loading: 'Loading...',\n  /**\n   *@description Not paused message element text content in Call Stack Sidebar Pane of the Sources panel\n   */\n  notPaused: 'Not paused',\n  /**\n   *@description Empty placeholder in Scope Chain Sidebar Pane of the Sources panel\n   */\n  noVariables: 'No variables',\n  /**\n   *@description Text in the Sources panel Scope pane describing a closure scope.\n   *@example {func} PH1\n   */\n  closureS: 'Closure ({PH1})',\n  /**\n   *@description Text that refers to closure as a programming term\n   */\n  closure: 'Closure',\n  /**\n   *@description Text in Scope Chain Sidebar Pane of the Sources panel\n   */\n  exception: 'Exception',\n  /**\n   *@description Text in Scope Chain Sidebar Pane of the Sources panel\n   */\n  returnValue: 'Return value',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/ScopeChainSidebarPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet scopeChainSidebarPaneInstance: ScopeChainSidebarPane;\n\nexport class ScopeChainSidebarPane extends UI.Widget.VBox implements UI.ContextFlavorListener.ContextFlavorListener {\n  private readonly treeOutline: ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeOutline;\n  private readonly expandController: ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeExpandController;\n  private readonly linkifier: Components.Linkifier.Linkifier;\n  private infoElement: HTMLDivElement;\n  #scopesScript: SDK.Script.Script|null = null;\n\n  private constructor() {\n    super(true);\n\n    this.contentElement.setAttribute('jslog', `${VisualLogging.section('sources.scope-chain')}`);\n    this.treeOutline = new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeOutline();\n    this.treeOutline.hideOverflow();\n\n    this.treeOutline.setShowSelectionOnKeyboardFocus(/* show */ true);\n    this.expandController =\n        new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeExpandController(this.treeOutline);\n    this.linkifier = new Components.Linkifier.Linkifier();\n    this.infoElement = document.createElement('div');\n    this.infoElement.className = 'gray-info-message';\n    this.infoElement.tabIndex = -1;\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.DebugInfoAttached, this.debugInfoAttached, this);\n    void this.update();\n  }\n\n  static instance(): ScopeChainSidebarPane {\n    if (!scopeChainSidebarPaneInstance) {\n      scopeChainSidebarPaneInstance = new ScopeChainSidebarPane();\n    }\n    return scopeChainSidebarPaneInstance;\n  }\n\n  flavorChanged(_object: Object|null): void {\n    void this.update();\n  }\n\n  override focus(): void {\n    if (this.hasFocus()) {\n      return;\n    }\n\n    if (UI.Context.Context.instance().flavor(SDK.DebuggerModel.DebuggerPausedDetails)) {\n      this.treeOutline.forceSelect();\n    }\n  }\n\n  private sourceMapAttached(\n      event: Common.EventTarget.EventTargetEvent<{client: SDK.Script.Script, sourceMap: SDK.SourceMap.SourceMap}>):\n      void {\n    if (event.data.client === this.#scopesScript) {\n      void this.update();\n    }\n  }\n\n  private setScopeSourceMapSubscription(callFrame: SDK.DebuggerModel.CallFrame|null): void {\n    const oldScript = this.#scopesScript;\n    this.#scopesScript = callFrame?.script ?? null;\n\n    // Shortcut for the case when we are listening to the same model.\n    if (oldScript?.debuggerModel === this.#scopesScript?.debuggerModel) {\n      return;\n    }\n\n    if (oldScript) {\n      oldScript.debuggerModel.sourceMapManager().removeEventListener(\n          SDK.SourceMapManager.Events.SourceMapAttached, this.sourceMapAttached, this);\n    }\n\n    if (this.#scopesScript) {\n      this.#scopesScript.debuggerModel.sourceMapManager().addEventListener(\n          SDK.SourceMapManager.Events.SourceMapAttached, this.sourceMapAttached, this);\n    }\n  }\n\n  private debugInfoAttached(event: Common.EventTarget.EventTargetEvent<SDK.Script.Script>): void {\n    if (event.data === this.#scopesScript) {\n      void this.update();\n    }\n  }\n\n  private async update(): Promise<void> {\n    // The `resolveThisObject(callFrame)` and `resolveScopeChain(callFrame)` calls\n    // below may take a while to complete, so indicate to the user that something\n    // is happening (see https://crbug.com/1162416).\n    this.infoElement.textContent = i18nString(UIStrings.loading);\n    this.contentElement.removeChildren();\n    this.contentElement.appendChild(this.infoElement);\n\n    this.linkifier.reset();\n\n    const callFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n    this.setScopeSourceMapSubscription(callFrame);\n    const [thisObject, scopeChain] = await Promise.all([\n      SourceMapScopes.NamesResolver.resolveThisObject(callFrame),\n      SourceMapScopes.NamesResolver.resolveScopeChain(callFrame),\n    ]);\n    // By now the developer might have moved on, and we don't want to show stale\n    // scope information, so check again that we're still on the same CallFrame.\n    if (callFrame === UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame)) {\n      const details = UI.Context.Context.instance().flavor(SDK.DebuggerModel.DebuggerPausedDetails);\n      this.treeOutline.removeChildren();\n\n      if (!details || !callFrame || !scopeChain) {\n        this.infoElement.textContent = i18nString(UIStrings.notPaused);\n        return;\n      }\n\n      this.contentElement.removeChildren();\n      this.contentElement.appendChild(this.treeOutline.element);\n      let foundLocalScope = false;\n      for (let i = 0; i < scopeChain.length; ++i) {\n        const scope = scopeChain[i];\n        const extraProperties = this.extraPropertiesForScope(scope, details, callFrame, thisObject, i === 0);\n\n        if (scope.type() === Protocol.Debugger.ScopeType.Local) {\n          foundLocalScope = true;\n        }\n\n        const section = this.createScopeSectionTreeElement(scope, extraProperties);\n        if (scope.type() === Protocol.Debugger.ScopeType.Global) {\n          section.collapse();\n        } else if (!foundLocalScope || scope.type() === Protocol.Debugger.ScopeType.Local) {\n          section.expand();\n        }\n\n        this.treeOutline.appendChild(section);\n        if (i === 0) {\n          section.select(/* omitFocus */ true);\n        }\n      }\n      this.sidebarPaneUpdatedForTest();\n    }\n  }\n\n  private createScopeSectionTreeElement(\n      scope: SDK.DebuggerModel.ScopeChainEntry,\n      extraProperties: SDK.RemoteObject.RemoteObjectProperty[]): ObjectUI.ObjectPropertiesSection.RootElement {\n    let emptyPlaceholder: Common.UIString.LocalizedString|null = null;\n    if (scope.type() === Protocol.Debugger.ScopeType.Local || Protocol.Debugger.ScopeType.Closure) {\n      emptyPlaceholder = i18nString(UIStrings.noVariables);\n    }\n\n    let title = scope.typeName();\n    if (scope.type() === Protocol.Debugger.ScopeType.Closure) {\n      const scopeName = scope.name();\n      if (scopeName) {\n        title = i18nString(UIStrings.closureS, {PH1: UI.UIUtils.beautifyFunctionName(scopeName)});\n      } else {\n        title = i18nString(UIStrings.closure);\n      }\n    }\n    let subtitle: string|null = scope.description();\n    if (!title || title === subtitle) {\n      subtitle = null;\n    }\n    const icon = scope.icon();\n\n    const titleElement = document.createElement('div');\n    titleElement.classList.add('scope-chain-sidebar-pane-section-header');\n    titleElement.classList.add('tree-element-title');\n    if (icon) {\n      const iconElement = document.createElement('img');\n      iconElement.classList.add('scope-chain-sidebar-pane-section-icon');\n      iconElement.src = icon;\n      titleElement.appendChild(iconElement);\n    }\n    titleElement.createChild('div', 'scope-chain-sidebar-pane-section-subtitle').textContent = subtitle;\n    titleElement.createChild('div', 'scope-chain-sidebar-pane-section-title').textContent = title;\n\n    const section = new ObjectUI.ObjectPropertiesSection.RootElement(\n        SourceMapScopes.NamesResolver.resolveScopeInObject(scope), this.linkifier, emptyPlaceholder,\n        ObjectUI.ObjectPropertiesSection.ObjectPropertiesMode.All, extraProperties);\n    section.title = titleElement;\n    section.listItemElement.classList.add('scope-chain-sidebar-pane-section');\n    section.listItemElement.setAttribute('aria-label', title);\n    this.expandController.watchSection(title + (subtitle ? ':' + subtitle : ''), section);\n\n    return section;\n  }\n\n  private extraPropertiesForScope(\n      scope: SDK.DebuggerModel.ScopeChainEntry, details: SDK.DebuggerModel.DebuggerPausedDetails,\n      callFrame: SDK.DebuggerModel.CallFrame, thisObject: SDK.RemoteObject.RemoteObject|null,\n      isFirstScope: boolean): SDK.RemoteObject.RemoteObjectProperty[] {\n    if (scope.type() !== Protocol.Debugger.ScopeType.Local || callFrame.script.isWasm()) {\n      return [];\n    }\n\n    const extraProperties = [];\n    if (thisObject) {\n      extraProperties.push(new SDK.RemoteObject.RemoteObjectProperty(\n          'this', thisObject, undefined, undefined, undefined, undefined, undefined, /* synthetic */ true));\n    }\n    if (isFirstScope) {\n      const exception = details.exception();\n      if (exception) {\n        extraProperties.push(new SDK.RemoteObject.RemoteObjectProperty(\n            i18nString(UIStrings.exception), exception, undefined, undefined, undefined, undefined, undefined,\n            /* synthetic */ true));\n      }\n      const returnValue = callFrame.returnValue();\n      if (returnValue) {\n        extraProperties.push(new SDK.RemoteObject.RemoteObjectProperty(\n            i18nString(UIStrings.returnValue), returnValue, undefined, undefined, undefined, undefined, undefined,\n            /* synthetic */ true, callFrame.setReturnValue.bind(callFrame)));\n      }\n    }\n\n    return extraProperties;\n  }\n\n  private sidebarPaneUpdatedForTest(): void {\n  }\n  override wasShown(): void {\n    super.wasShown();\n    this.treeOutline.registerCSSFiles([scopeChainSidebarPaneStyles]);\n    this.registerCSSFiles([scopeChainSidebarPaneStyles]);\n  }\n}\n"]}