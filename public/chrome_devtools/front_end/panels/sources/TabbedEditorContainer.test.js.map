{"version":3,"file":"TabbedEditorContainer.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/sources/TabbedEditorContainer.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2019 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as Platform from '../../core/platform/platform.js';\n\nimport * as Sources from './sources.js';\n\ndescribe('TabbedEditorContainer', () => {\n  describe('HistoryItem', () => {\n    const {HistoryItem} = Sources.TabbedEditorContainer;\n    const url = 'http://localhost' as Platform.DevToolsPath.UrlString;\n\n    describe('fromObject', () => {\n      it('rejects invalid resource type names', () => {\n        assert.throws(() => {\n          HistoryItem.fromObject({url, resourceTypeName: 'some-invalid-resource-type-name'});\n        });\n      });\n\n      it('correctly deserializes resource type names', () => {\n        for (const resourceType of Object.values(Common.ResourceType.resourceTypes)) {\n          const resourceTypeName = resourceType.name();\n          assert.propertyVal(HistoryItem.fromObject({url, resourceTypeName}), 'resourceType', resourceType);\n        }\n      });\n    });\n\n    describe('toObject', () => {\n      it('correctly serializes resource types', () => {\n        for (const resourceType of Object.values(Common.ResourceType.resourceTypes)) {\n          const item = new HistoryItem(url, resourceType);\n          assert.propertyVal(item.toObject(), 'resourceTypeName', resourceType.name());\n        }\n      });\n    });\n  });\n\n  describe('History', () => {\n    const {History, HistoryItem} = Sources.TabbedEditorContainer;\n\n    describe('fromObject', () => {\n      it('deserializes correctly', () => {\n        const history = History.fromObject([\n          {url: 'http://localhost/foo.js', resourceTypeName: 'script'},\n          {url: 'webpack:///src/foo.vue', resourceTypeName: 'sm-script', scrollLineNumber: 5},\n          {url: 'http://localhost/foo.js', resourceTypeName: 'sm-script'},\n        ]);\n        const keys = history.keys();\n        assert.lengthOf(keys, 3);\n        assert.propertyVal(keys[0], 'url', 'http://localhost/foo.js');\n        assert.propertyVal(keys[0], 'resourceType', Common.ResourceType.resourceTypes.Script);\n        assert.strictEqual(history.selectionRange(keys[0]), undefined);\n        assert.strictEqual(history.scrollLineNumber(keys[0]), undefined);\n        assert.propertyVal(keys[1], 'url', 'webpack:///src/foo.vue');\n        assert.propertyVal(keys[1], 'resourceType', Common.ResourceType.resourceTypes.SourceMapScript);\n        assert.strictEqual(history.selectionRange(keys[1]), undefined);\n        assert.strictEqual(history.scrollLineNumber(keys[1]), 5);\n        assert.propertyVal(keys[2], 'url', 'http://localhost/foo.js');\n        assert.propertyVal(keys[2], 'resourceType', Common.ResourceType.resourceTypes.SourceMapScript);\n        assert.strictEqual(history.selectionRange(keys[2]), undefined);\n        assert.strictEqual(history.scrollLineNumber(keys[2]), undefined);\n      });\n\n      it('gracefully ignores items with invalid resource type names', () => {\n        const history = History.fromObject([\n          {url: 'http://localhost/foo.js', resourceTypeName: 'script'},\n          {url: 'http://localhost/baz.js', resourceTypeName: 'some-invalid-resource-type-name'},\n          {url: 'http://localhost/bar.js', resourceTypeName: 'sm-script'},\n        ]);\n        const keys = history.keys();\n        assert.lengthOf(keys, 2);\n        assert.propertyVal(keys[0], 'url', 'http://localhost/foo.js');\n        assert.propertyVal(keys[1], 'url', 'http://localhost/bar.js');\n      });\n    });\n\n    describe('toObject', () => {\n      it('serializes correctly', () => {\n        const history = new History([\n          new HistoryItem(\n              'http://localhost/foo.js' as Platform.DevToolsPath.UrlString, Common.ResourceType.resourceTypes.Script),\n          new HistoryItem(\n              'webpack:///src/foo.vue' as Platform.DevToolsPath.UrlString,\n              Common.ResourceType.resourceTypes.SourceMapScript, undefined, 5),\n          new HistoryItem(\n              'http://localhost/foo.js' as Platform.DevToolsPath.UrlString,\n              Common.ResourceType.resourceTypes.SourceMapScript),\n        ]);\n        const serializedHistory = history.toObject();\n        assert.lengthOf(serializedHistory, 3);\n        assert.propertyVal(serializedHistory[0], 'url', 'http://localhost/foo.js');\n        assert.propertyVal(serializedHistory[0], 'resourceTypeName', 'script');\n        assert.propertyVal(serializedHistory[1], 'url', 'webpack:///src/foo.vue');\n        assert.propertyVal(serializedHistory[1], 'resourceTypeName', 'sm-script');\n        assert.propertyVal(serializedHistory[1], 'scrollLineNumber', 5);\n        assert.propertyVal(serializedHistory[2], 'url', 'http://localhost/foo.js');\n        assert.propertyVal(serializedHistory[2], 'resourceTypeName', 'sm-script');\n      });\n    });\n\n    describe('update', () => {\n      it('moves items referenced by keys to the beginning', () => {\n        const history = new History([\n          new HistoryItem(\n              'webpack:///src/foo.vue' as Platform.DevToolsPath.UrlString,\n              Common.ResourceType.resourceTypes.SourceMapScript),\n          new HistoryItem(\n              'http://localhost/foo.js' as Platform.DevToolsPath.UrlString, Common.ResourceType.resourceTypes.Script),\n          new HistoryItem(\n              'http://localhost/foo.js' as Platform.DevToolsPath.UrlString,\n              Common.ResourceType.resourceTypes.SourceMapScript),\n        ]);\n        history.update([{\n          url: 'http://localhost/foo.js' as Platform.DevToolsPath.UrlString,\n          resourceType: Common.ResourceType.resourceTypes.Script,\n        }]);\n        assert.strictEqual(\n            history.index({\n              url: 'http://localhost/foo.js' as Platform.DevToolsPath.UrlString,\n              resourceType: Common.ResourceType.resourceTypes.Script,\n            }),\n            0,\n        );\n      });\n    });\n  });\n});\n"]}