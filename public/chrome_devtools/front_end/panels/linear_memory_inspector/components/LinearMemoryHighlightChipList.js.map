{"version":3,"file":"LinearMemoryHighlightChipList.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/linear_memory_inspector/components/LinearMemoryHighlightChipList.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport linearMemoryHighlightChipListStyles from './linearMemoryHighlightChipList.css.js';\nimport {type HighlightInfo} from './LinearMemoryViewerUtils.js';\n\nconst UIStrings = {\n  /**\n   *@description Tooltip text that appears when hovering over an inspected variable's button in the Linear Memory Highlight Chip List.\n  Clicking the button changes the displayed slice of computer memory in the Linear Memory inspector to contain the inspected variable's bytes.\n   */\n  jumpToAddress: 'Jump to this memory',\n  /**\n   *@description Tooltip text that appears when hovering over an inspected variable's delete button in the Linear Memory Highlight Chip List.\n   Clicking the delete button stops highlighting the variable's memory in the Linear Memory inspector.\n   'Memory' is a slice of bytes in the computer memory.\n   */\n  deleteHighlight: 'Stop highlighting this memory',\n};\nconst str_ = i18n.i18n.registerUIStrings(\n    'panels/linear_memory_inspector/components/LinearMemoryHighlightChipList.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst {render, html} = LitHtml;\n\nexport interface LinearMemoryHighlightChipListData {\n  highlightInfos: Array<HighlightInfo>;\n  focusedMemoryHighlight?: HighlightInfo;\n}\n\nexport class DeleteMemoryHighlightEvent extends Event {\n  static readonly eventName = 'deletememoryhighlight';\n  data: HighlightInfo;\n\n  constructor(highlightInfo: HighlightInfo) {\n    super(DeleteMemoryHighlightEvent.eventName, {bubbles: true, composed: true});\n    this.data = highlightInfo;\n  }\n}\n\nexport class JumpToHighlightedMemoryEvent extends Event {\n  static readonly eventName = 'jumptohighlightedmemory';\n  data: number;\n\n  constructor(address: number) {\n    super(JumpToHighlightedMemoryEvent.eventName);\n    this.data = address;\n  }\n}\n\nexport class LinearMemoryHighlightChipList extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-linear-memory-highlight-chip-list`;\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #highlightedAreas: HighlightInfo[] = [];\n  #focusedMemoryHighlight?: HighlightInfo;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [linearMemoryHighlightChipListStyles];\n  }\n\n  set data(data: LinearMemoryHighlightChipListData) {\n    this.#highlightedAreas = data.highlightInfos;\n    this.#focusedMemoryHighlight = data.focusedMemoryHighlight;\n    this.#render();\n  }\n\n  #render(): void {\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    const chips = [];\n    for (const highlightInfo of this.#highlightedAreas) {\n      chips.push(this.#createChip(highlightInfo));\n    }\n    const result = html`\n            <div class=\"highlight-chip-list\">\n              ${chips}\n            </div>\n        `;\n    render(result, this.#shadow, { host: this });\n    // clang-format on\n  }\n\n  #createChip(highlightInfo: HighlightInfo): LitHtml.TemplateResult {\n    const expressionName = highlightInfo.name || '<anonymous>';\n    const expressionType = highlightInfo.type;\n    const isFocused = highlightInfo === this.#focusedMemoryHighlight;\n    const classMap = {\n      focused: isFocused,\n      'highlight-chip': true,\n    };\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return html`\n      <div class=${LitHtml.Directives.classMap(classMap)}>\n        <button class=\"jump-to-highlight-button\" title=${i18nString(UIStrings.jumpToAddress)}\n            jslog=${VisualLogging.action('linear-memory-inspector.jump-to-highlight').track({click:true})}\n            @click=${():void => this.#onJumpToHighlightClick(highlightInfo.startAddress)}>\n          <span class=\"source-code\">\n            <span class=\"value\">${expressionName}</span><span class=\"separator\">: </span><span>${expressionType}</span>\n          </span>\n        </button>\n        <div class=\"delete-highlight-container\">\n          <button class=\"delete-highlight-button\" title=${i18nString(UIStrings.deleteHighlight)}\n              jslog=${VisualLogging.action('linear-memory-inspector.delete-highlight').track({click:true})}\n              @click=${():void => this.#onDeleteHighlightClick(highlightInfo)}>\n            <${IconButton.Icon.Icon.litTagName} .data=${{\n              iconName: 'cross',\n              color: 'var(--icon-default-hover)',\n              width: '16px',\n              } as IconButton.Icon.IconData}>\n            </${IconButton.Icon.Icon.litTagName}>\n          </button>\n        </div>\n      </div>\n    `;\n    // clang-format off\n  }\n\n  #onJumpToHighlightClick(startAddress: number): void {\n    this.dispatchEvent(new JumpToHighlightedMemoryEvent(startAddress));\n  }\n\n  #onDeleteHighlightClick(highlight:HighlightInfo): void {\n    this.dispatchEvent(new DeleteMemoryHighlightEvent(highlight));\n  }\n}\n\ncustomElements.define(\n    'devtools-linear-memory-highlight-chip-list', LinearMemoryHighlightChipList);\n\ndeclare global {\n\n  interface HTMLElementTagNameMap {\n    'devtools-linear-memory-highlight-chip-list': LinearMemoryHighlightChipList;\n  }\n}\n"]}