{"version":3,"file":"WebBundleInfoView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/network/components/WebBundleInfoView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../core/common/common.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as SDK from '../../../core/sdk/sdk.js';\nimport {PanelUtils} from '../../../panels/utils/utils.js';\nimport * as DataGrid from '../../../ui/components/data_grid/data_grid.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as LegacyWrapper from '../../../ui/components/legacy_wrapper/legacy_wrapper.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport webBundleInfoViewStyles from './WebBundleInfoView.css.js';\n\nconst {render, html} = LitHtml;\n\nconst UIStrings = {\n  /**\n   *@description Header for the column that contains URL of the resource in a web bundle.\n   */\n  bundledResource: 'Bundled resource',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/network/components/WebBundleInfoView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class WebBundleInfoView extends LegacyWrapper.LegacyWrapper.WrappableComponent {\n  static readonly litTagName = LitHtml.literal`devtools-web-bundle-info`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #webBundleInfo: Readonly<SDK.NetworkRequest.WebBundleInfo>;\n  #webBundleName: Readonly<string>;\n  constructor(request: SDK.NetworkRequest.NetworkRequest) {\n    super();\n    const webBundleInfo = request.webBundleInfo();\n    if (!webBundleInfo) {\n      throw new Error('Trying to render a Web Bundle info without providing data');\n    }\n\n    this.#webBundleInfo = webBundleInfo;\n    this.#webBundleName = request.parsedURL.lastPathComponent;\n    this.setAttribute('jslog', `${VisualLogging.pane('webbundle').track({resize: true})}`);\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [webBundleInfoViewStyles];\n  }\n\n  override async render(): Promise<void> {\n    const rows = this.#webBundleInfo.resourceUrls?.map(url => {\n      const mimeType = Common.ResourceType.ResourceType.mimeFromURL(url) || null;\n      const resourceType = Common.ResourceType.ResourceType.fromMimeTypeOverride(mimeType) ||\n          Common.ResourceType.ResourceType.fromMimeType(mimeType);\n      const iconData = PanelUtils.iconDataForResourceType(resourceType);\n      return {\n        cells: [\n          {\n            columnId: 'url',\n            value: null,\n            renderer(): LitHtml.TemplateResult {\n              return html`\n                <div style=\"display: flex;\">\n                  <${IconButton.Icon.Icon.litTagName} class=\"icon\"\n                    .data=${{...iconData, width: '20px'} as IconButton.Icon.IconData}>\n                  </${IconButton.Icon.Icon.litTagName}>\n                  <span>${url}</span>\n                </div>`;\n            },\n          },\n        ],\n      };\n    });\n    render(\n        html`\n      <div class=\"header\">\n        <${IconButton.Icon.Icon.litTagName} class=\"icon\"\n          .data=${{color: 'var(--icon-default)', iconName: 'bundle', width: '20px'} as IconButton.Icon.IconData}>\n        </${IconButton.Icon.Icon.litTagName}>\n        <span>${this.#webBundleName}</span>\n        <x-link href=\"https://web.dev/web-bundles/#explaining-web-bundles\"\n          jslog=${VisualLogging.link('webbundle-explainer').track({\n          click: true,\n        })}>\n          <${IconButton.Icon.Icon.litTagName} class=\"icon\"\n            .data=${{color: 'var(--icon-default)', iconName: 'help', width: '16px'} as IconButton.Icon.IconData}>\n          </${IconButton.Icon.Icon.litTagName}>\n        </x-link>\n      </div>\n      <div>\n        <${DataGrid.DataGrid.DataGrid.litTagName}\n          .data=${{\n          columns: [\n            {\n              id: 'url',\n              title: i18nString(UIStrings.bundledResource),\n              widthWeighting: 1,\n              visible: true,\n              hideable: false,\n            },\n          ],\n          rows: rows,\n          activeSort: null,\n        } as DataGrid.DataGrid.DataGridData}>\n        </${DataGrid.DataGrid.DataGrid.litTagName}>\n      </div>`,\n        this.#shadow, {host: this});\n  }\n}\n\ncustomElements.define('devtools-web-bundle-info', WebBundleInfoView);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-web-bundle-info': WebBundleInfoView;\n  }\n}\n"]}