{"version":3,"file":"ConsoleViewMessage.js","sourceRoot":"","sources":["../../../../../../front_end/panels/console/ConsoleViewMessage.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport {type Chrome} from '../../../extension-api/ExtensionAPI.js';\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as Logs from '../../models/logs/logs.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as CodeHighlighter from '../../ui/components/code_highlighter/code_highlighter.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as IssueCounter from '../../ui/components/issue_counter/issue_counter.js';\nimport * as RequestLinkIcon from '../../ui/components/request_link_icon/request_link_icon.js';\nimport * as DataGrid from '../../ui/legacy/components/data_grid/data_grid.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\n// eslint-disable-next-line rulesdir/es_modules_import\nimport objectValueStyles from '../../ui/legacy/components/object_ui/objectValue.css.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {format, updateStyle} from './ConsoleFormat.js';\nimport consoleViewStyles from './consoleView.css.js';\nimport {type ConsoleViewportElement} from './ConsoleViewport.js';\nimport {augmentErrorStackWithScriptIds, parseSourcePositionsFromErrorStack} from './ErrorStackParser.js';\n\nconst UIStrings = {\n  /**\n   * @description Message element text content in Console View Message of the Console panel. Shown\n   * when the user tried to run console.clear() but the 'Preserve log' option is enabled, which stops\n   * the log from being cleared.\n   */\n  consoleclearWasPreventedDueTo: '`console.clear()` was prevented due to \\'Preserve log\\'',\n  /**\n   * @description Text shown in the Console panel after the user has cleared the console, which\n   * removes all messages from the console so that it is empty.\n   */\n  consoleWasCleared: 'Console was cleared',\n  /**\n   *@description Message element title in Console View Message of the Console panel\n   *@example {Ctrl+L} PH1\n   */\n  clearAllMessagesWithS: 'Clear all messages with {PH1}',\n  /**\n   *@description Message prefix in Console View Message of the Console panel\n   */\n  assertionFailed: 'Assertion failed: ',\n  /**\n   *@description Message text in Console View Message of the Console panel\n   *@example {console.log(1)} PH1\n   */\n  violationS: '`[Violation]` {PH1}',\n  /**\n   *@description Message text in Console View Message of the Console panel\n   *@example {console.log(1)} PH1\n   */\n  interventionS: '`[Intervention]` {PH1}',\n  /**\n   *@description Message text in Console View Message of the Console panel\n   *@example {console.log(1)} PH1\n   */\n  deprecationS: '`[Deprecation]` {PH1}',\n  /**\n   *@description Note title in Console View Message of the Console panel\n   */\n  thisValueWillNotBeCollectedUntil: 'This value will not be collected until console is cleared.',\n  /**\n   *@description Note title in Console View Message of the Console panel\n   */\n  thisValueWasEvaluatedUponFirst: 'This value was evaluated upon first expanding. It may have changed since then.',\n  /**\n   *@description Note title in Console View Message of the Console panel\n   */\n  functionWasResolvedFromBound: 'Function was resolved from bound function.',\n  /**\n   * @description Shown in the Console panel when an exception is thrown when trying to access a\n   * property on an object. Should be translated.\n   */\n  exception: '<exception>',\n  /**\n   *@description Text to indicate an item is a warning\n   */\n  warning: 'Warning',\n  /**\n   *@description Text for errors\n   */\n  error: 'Error',\n  /**\n   * @description Accessible label for an icon. The icon is used to mark console messages that\n   * originate from a logpoint. Logpoints are special breakpoints that log a user-provided JavaScript\n   * expression to the DevTools console.\n   */\n  logpoint: 'Logpoint',\n  /**\n   * @description Accessible label for an icon. The icon is used to mark console messages that\n   * originate from conditional breakpoints.\n   */\n  cndBreakpoint: 'Conditional Breakpoint',\n  /**\n   * @description Announced by the screen reader to indicate how many times a particular message in\n   * the console was repeated.\n   */\n  repeatS: '{n, plural, =1 {Repeated # time} other {Repeated # times}}',\n  /**\n   * @description Announced by the screen reader to indicate how many times a particular warning\n   * message in the console was repeated.\n   */\n  warningS: '{n, plural, =1 {Warning, Repeated # time} other {Warning, Repeated # times}}',\n  /**\n   * @description Announced by the screen reader to indicate how many times a particular error\n   * message in the console was repeated.\n   */\n  errorS: '{n, plural, =1 {Error, Repeated # time} other {Error, Repeated # times}}',\n  /**\n   *@description Text appended to grouped console messages that are related to URL requests\n   */\n  url: '<URL>',\n  /**\n   *@description Text appended to grouped console messages about tasks that took longer than N ms\n   */\n  tookNms: 'took <N>ms',\n  /**\n   *@description Text appended to grouped console messages about tasks that are related to some DOM event\n   */\n  someEvent: '<some> event',\n  /**\n   *@description Text appended to grouped console messages about tasks that are related to a particular milestone\n   */\n  Mxx: ' M<XX>',\n  /**\n   *@description Text appended to grouped console messages about tasks that are related to autofill completions\n   */\n  attribute: '<attribute>',\n  /**\n   *@description Text for the index of something\n   */\n  index: '(index)',\n  /**\n   *@description Text for the value of something\n   */\n  value: 'Value',\n  /**\n   *@description Title of the Console tool\n   */\n  console: 'Console',\n  /**\n   *@description Message to indicate a console message with a stack table is expanded\n   */\n  stackMessageExpanded: 'Stack table expanded',\n  /**\n   *@description Message to indicate a console message with a stack table is collapsed\n   */\n  stackMessageCollapsed: 'Stack table collapsed',\n  /**\n   *@description Message to offer insights for a console error message\n   */\n  explainThisError: 'Understand this error',\n  /**\n   *@description Message to offer insights for a console warning message\n   */\n  explainThisWarning: 'Understand this warning',\n  /**\n   *@description Message to offer insights for a console message\n   */\n  explainThisMessage: 'Understand this message',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/console/ConsoleViewMessage.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst elementToMessage = new WeakMap<Element, ConsoleViewMessage>();\n\nexport const getMessageForElement = (element: Element): ConsoleViewMessage|undefined => {\n  return elementToMessage.get(element);\n};\n\n// This value reflects the 18px min-height of .console-message, plus the\n// 1px border of .console-message-wrapper. Keep in sync with consoleView.css.\nconst defaultConsoleRowHeight = 19;\n\nconst parameterToRemoteObject = (runtimeModel: SDK.RuntimeModel.RuntimeModel|null):\n    (parameter?: SDK.RemoteObject.RemoteObject|Protocol.Runtime.RemoteObject|string) => SDK.RemoteObject.RemoteObject =>\n        (parameter?: string|SDK.RemoteObject.RemoteObject|Protocol.Runtime.RemoteObject) => {\n          if (parameter instanceof SDK.RemoteObject.RemoteObject) {\n            return parameter;\n          }\n          if (!runtimeModel) {\n            return SDK.RemoteObject.RemoteObject.fromLocalObject(parameter);\n          }\n          if (typeof parameter === 'object') {\n            return runtimeModel.createRemoteObject(parameter);\n          }\n          return runtimeModel.createRemoteObjectFromPrimitiveValue(parameter);\n        };\n\nconst EXPLAIN_HOVER_ACTION_ID = 'explain.console-message.hover';\nconst EXPLAIN_CONTEXT_ERROR_ACTION_ID = 'explain.console-message.context.error';\nconst EXPLAIN_CONTEXT_WARNING_ACTION_ID = 'explain.console-message.context.warning';\nconst EXPLAIN_CONTEXT_OTHER_ACTION_ID = 'explain.console-message.context.other';\n\nconst hoverButtonObserver = new IntersectionObserver(results => {\n  for (const result of results) {\n    if (result.intersectionRatio > 0) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightHoverButtonShown);\n    }\n  }\n});\n\nexport class ConsoleViewMessage implements ConsoleViewportElement {\n  protected message: SDK.ConsoleModel.ConsoleMessage;\n  private readonly linkifier: Components.Linkifier.Linkifier;\n  private repeatCountInternal: number;\n  private closeGroupDecorationCount: number;\n  private consoleGroupInternal: ConsoleGroupViewMessage|null;\n  private selectableChildren: {\n    element: HTMLElement,\n    forceSelect: () => void,\n  }[];\n  private readonly messageResized: (arg0: Common.EventTarget.EventTargetEvent<UI.TreeOutline.TreeElement>) => void;\n  // The wrapper that contains consoleRowWrapper and other elements in a column.\n  protected elementInternal: HTMLElement|null;\n  // The element that wraps console message elements in a row.\n  protected consoleRowWrapper: HTMLElement|null = null;\n  private readonly previewFormatter: ObjectUI.RemoteObjectPreviewFormatter.RemoteObjectPreviewFormatter;\n  private searchRegexInternal: RegExp|null;\n  protected messageIcon: IconButton.Icon.Icon|null;\n  private traceExpanded: boolean;\n  private expandTrace: ((arg0: boolean) => void)|null;\n  protected anchorElement: HTMLElement|null;\n  protected contentElementInternal: HTMLElement|null;\n  private nestingLevelMarkers: HTMLElement[]|null;\n  private searchHighlightNodes: Element[];\n  private searchHighlightNodeChanges: UI.UIUtils.HighlightChange[];\n  private isVisibleInternal: boolean;\n  private cachedHeight: number;\n  private messagePrefix: string;\n  private timestampElement: HTMLElement|null;\n  private inSimilarGroup: boolean;\n  private similarGroupMarker: HTMLElement|null;\n  private lastInSimilarGroup: boolean;\n  private groupKeyInternal: string;\n  protected repeatCountElement: UI.UIUtils.DevToolsSmallBubble|null;\n  private requestResolver: Logs.RequestResolver.RequestResolver;\n  private issueResolver: IssuesManager.IssueResolver.IssueResolver;\n  #adjacentUserCommandResult: boolean = false;\n\n  /** Formatting Error#stack is asynchronous. Allow tests to wait for the result */\n  #formatErrorStackPromiseForTest = Promise.resolve();\n\n  constructor(\n      consoleMessage: SDK.ConsoleModel.ConsoleMessage, linkifier: Components.Linkifier.Linkifier,\n      requestResolver: Logs.RequestResolver.RequestResolver, issueResolver: IssuesManager.IssueResolver.IssueResolver,\n      onResize: (arg0: Common.EventTarget.EventTargetEvent<UI.TreeOutline.TreeElement>) => void) {\n    this.message = consoleMessage;\n    this.linkifier = linkifier;\n    this.requestResolver = requestResolver;\n    this.issueResolver = issueResolver;\n    this.repeatCountInternal = 1;\n    this.closeGroupDecorationCount = 0;\n    this.selectableChildren = [];\n    this.messageResized = onResize;\n    this.elementInternal = null;\n\n    this.previewFormatter = new ObjectUI.RemoteObjectPreviewFormatter.RemoteObjectPreviewFormatter();\n    this.searchRegexInternal = null;\n    this.messageIcon = null;\n    this.traceExpanded = false;\n    this.expandTrace = null;\n    this.anchorElement = null;\n    this.contentElementInternal = null;\n    this.nestingLevelMarkers = null;\n    this.searchHighlightNodes = [];\n    this.searchHighlightNodeChanges = [];\n    this.isVisibleInternal = false;\n    this.cachedHeight = 0;\n    this.messagePrefix = '';\n    this.timestampElement = null;\n    this.inSimilarGroup = false;\n    this.similarGroupMarker = null;\n    this.lastInSimilarGroup = false;\n    this.groupKeyInternal = '';\n    this.repeatCountElement = null;\n    this.consoleGroupInternal = null;\n  }\n\n  setInsight(insight: HTMLElement): void {\n    this.elementInternal?.querySelector('devtools-console-insight')?.remove();\n    this.elementInternal?.append(insight);\n    this.elementInternal?.classList.toggle('has-insight', true);\n    insight.addEventListener('close', () => {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightClosed);\n      this.elementInternal?.classList.toggle('has-insight', false);\n      insight.addEventListener('animationend', () => {\n        this.elementInternal?.removeChild(insight);\n      }, {\n        once: true,\n      });\n    }, {once: true});\n  }\n\n  element(): HTMLElement {\n    return this.toMessageElement();\n  }\n\n  wasShown(): void {\n    this.isVisibleInternal = true;\n  }\n\n  onResize(): void {\n  }\n\n  willHide(): void {\n    this.isVisibleInternal = false;\n    this.cachedHeight = this.element().offsetHeight;\n  }\n\n  isVisible(): boolean {\n    return this.isVisibleInternal;\n  }\n\n  fastHeight(): number {\n    if (this.cachedHeight) {\n      return this.cachedHeight;\n    }\n    return this.approximateFastHeight();\n  }\n\n  approximateFastHeight(): number {\n    return defaultConsoleRowHeight;\n  }\n\n  consoleMessage(): SDK.ConsoleModel.ConsoleMessage {\n    return this.message;\n  }\n\n  formatErrorStackPromiseForTest(): Promise<void> {\n    return this.#formatErrorStackPromiseForTest;\n  }\n\n  protected buildMessage(): HTMLElement {\n    let messageElement;\n    let messageText: Common.UIString.LocalizedString|string = this.message.messageText;\n    if (this.message.source === Common.Console.FrontendMessageSource.ConsoleAPI) {\n      switch (this.message.type) {\n        case Protocol.Runtime.ConsoleAPICalledEventType.Trace:\n          messageElement = this.format(this.message.parameters || ['console.trace']);\n          break;\n        case Protocol.Runtime.ConsoleAPICalledEventType.Clear:\n          messageElement = document.createElement('span');\n          messageElement.classList.add('console-info');\n          if (Common.Settings.Settings.instance().moduleSetting('preserve-console-log').get()) {\n            messageElement.textContent = i18nString(UIStrings.consoleclearWasPreventedDueTo);\n          } else {\n            messageElement.textContent = i18nString(UIStrings.consoleWasCleared);\n          }\n          UI.Tooltip.Tooltip.install(\n              messageElement, i18nString(UIStrings.clearAllMessagesWithS, {\n                PH1: String(UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutTitleForAction('console.clear')),\n              }));\n          break;\n        case Protocol.Runtime.ConsoleAPICalledEventType.Dir: {\n          const obj = this.message.parameters ? this.message.parameters[0] : undefined;\n          const args = ['%O', obj];\n          messageElement = this.format(args);\n          break;\n        }\n        case Protocol.Runtime.ConsoleAPICalledEventType.Profile:\n        case Protocol.Runtime.ConsoleAPICalledEventType.ProfileEnd:\n          messageElement = this.format([messageText]);\n          break;\n        default: {\n          if (this.message.type === Protocol.Runtime.ConsoleAPICalledEventType.Assert) {\n            this.messagePrefix = i18nString(UIStrings.assertionFailed);\n          }\n          if (this.message.parameters && this.message.parameters.length === 1) {\n            const parameter = this.message.parameters[0];\n            if (typeof parameter !== 'string' && parameter.type === 'string') {\n              messageElement = this.tryFormatAsError((parameter.value as string));\n            }\n          }\n          const args = this.message.parameters || [messageText];\n          messageElement = messageElement || this.format(args);\n        }\n      }\n    } else {\n      if (this.message.source === Protocol.Log.LogEntrySource.Network) {\n        messageElement = this.formatAsNetworkRequest() || this.format([messageText]);\n      } else {\n        const messageInParameters = this.message.parameters && messageText === (this.message.parameters[0] as string);\n        // These terms are locked because the console message will not be translated anyway.\n        if (this.message.source === Protocol.Log.LogEntrySource.Violation) {\n          messageText = i18nString(UIStrings.violationS, {PH1: messageText});\n        } else if (this.message.source === Protocol.Log.LogEntrySource.Intervention) {\n          messageText = i18nString(UIStrings.interventionS, {PH1: messageText});\n        } else if (this.message.source === Protocol.Log.LogEntrySource.Deprecation) {\n          messageText = i18nString(UIStrings.deprecationS, {PH1: messageText});\n        }\n        const args = this.message.parameters || [messageText];\n        if (messageInParameters) {\n          args[0] = messageText;\n        }\n        messageElement = this.format(args);\n      }\n    }\n    messageElement.classList.add('console-message-text');\n\n    const formattedMessage = document.createElement('span');\n    formattedMessage.classList.add('source-code');\n    this.anchorElement = this.buildMessageAnchor();\n    if (this.anchorElement) {\n      formattedMessage.appendChild(this.anchorElement);\n    }\n    formattedMessage.appendChild(messageElement);\n    return formattedMessage;\n  }\n\n  private formatAsNetworkRequest(): HTMLElement|null {\n    const request = Logs.NetworkLog.NetworkLog.requestForConsoleMessage(this.message);\n    if (!request) {\n      return null;\n    }\n    const messageElement = document.createElement('span');\n    if (this.message.level === Protocol.Log.LogEntryLevel.Error) {\n      UI.UIUtils.createTextChild(messageElement, request.requestMethod + ' ');\n      const linkElement = Components.Linkifier.Linkifier.linkifyRevealable(\n          request, request.url(), request.url(), undefined, undefined, 'network-request');\n      // Focus is handled by the viewport.\n      linkElement.tabIndex = -1;\n      this.selectableChildren.push({element: linkElement, forceSelect: () => linkElement.focus()});\n      messageElement.appendChild(linkElement);\n      if (request.failed) {\n        UI.UIUtils.createTextChildren(messageElement, ' ', request.localizedFailDescription || '');\n      }\n      if (request.statusCode !== 0) {\n        UI.UIUtils.createTextChildren(messageElement, ' ', String(request.statusCode));\n      }\n      const statusText = request.getInferredStatusText();\n      if (statusText) {\n        UI.UIUtils.createTextChildren(messageElement, ' (', statusText, ')');\n      }\n    } else {\n      const messageText = this.message.messageText;\n      const fragment = this.linkifyWithCustomLinkifier(messageText, (text, url, lineNumber, columnNumber) => {\n        const linkElement = url === request.url() ?\n            Components.Linkifier.Linkifier.linkifyRevealable(\n                (request as SDK.NetworkRequest.NetworkRequest), url, request.url(), undefined, undefined,\n                'network-request') :\n            Components.Linkifier.Linkifier.linkifyURL(\n                url, ({text, lineNumber, columnNumber} as Components.Linkifier.LinkifyURLOptions));\n        linkElement.tabIndex = -1;\n        this.selectableChildren.push({element: linkElement, forceSelect: () => linkElement.focus()});\n        return linkElement;\n      });\n      messageElement.appendChild(fragment);\n    }\n    return messageElement;\n  }\n\n  private createAffectedResourceLinks(): HTMLElement[] {\n    const elements = [];\n    const requestId = this.message.getAffectedResources()?.requestId;\n    if (requestId) {\n      const icon = new RequestLinkIcon.RequestLinkIcon.RequestLinkIcon();\n      icon.classList.add('resource-links');\n      icon.data = {\n        affectedRequest: {requestId},\n        requestResolver: this.requestResolver,\n        displayURL: false,\n      };\n      elements.push(icon);\n    }\n    const issueId = this.message.getAffectedResources()?.issueId;\n    if (issueId) {\n      const icon = new IssueCounter.IssueLinkIcon.IssueLinkIcon();\n      icon.classList.add('resource-links');\n      icon.data = {issueId, issueResolver: this.issueResolver};\n      elements.push(icon);\n    }\n    return elements;\n  }\n\n  #getLinkifierMetric(): Host.UserMetrics.Action|undefined {\n    const request = Logs.NetworkLog.NetworkLog.requestForConsoleMessage(this.message);\n    if (request?.resourceType().isStyleSheet()) {\n      return Host.UserMetrics.Action.StyleSheetInitiatorLinkClicked;\n    }\n    return undefined;\n  }\n\n  protected buildMessageAnchor(): HTMLElement|null {\n    const runtimeModel = this.message.runtimeModel();\n    if (!runtimeModel) {\n      return null;\n    }\n\n    const linkify = ({stackFrameWithBreakpoint, scriptId, stackTrace, url, line, column}:\n                         SDK.ConsoleModel.ConsoleMessage): HTMLElement|null => {\n      const userMetric = this.#getLinkifierMetric();\n      if (stackFrameWithBreakpoint) {\n        return this.linkifier.maybeLinkifyConsoleCallFrame(runtimeModel.target(), stackFrameWithBreakpoint, {\n          inlineFrameIndex: 0,\n          revealBreakpoint: true,\n          userMetric,\n        });\n      }\n      if (scriptId) {\n        return this.linkifier.linkifyScriptLocation(\n            runtimeModel.target(), scriptId, url || Platform.DevToolsPath.EmptyUrlString, line,\n            {columnNumber: column, inlineFrameIndex: 0, userMetric});\n      }\n      if (stackTrace && stackTrace.callFrames.length) {\n        return this.linkifier.linkifyStackTraceTopFrame(runtimeModel.target(), stackTrace);\n      }\n      if (url && url !== 'undefined') {\n        return this.linkifier.linkifyScriptLocation(\n            runtimeModel.target(), /* scriptId */ null, url, line,\n            {columnNumber: column, inlineFrameIndex: 0, userMetric});\n      }\n      return null;\n    };\n    const anchorElement = linkify(this.message);\n    // Append a space to prevent the anchor text from being glued to the console message when the user selects and copies the console messages.\n    if (anchorElement) {\n      anchorElement.tabIndex = -1;\n      this.selectableChildren.push({\n        element: anchorElement,\n        forceSelect: () => anchorElement.focus(),\n      });\n      const anchorWrapperElement = document.createElement('span');\n      anchorWrapperElement.classList.add('console-message-anchor');\n      anchorWrapperElement.appendChild(anchorElement);\n\n      for (const element of this.createAffectedResourceLinks()) {\n        UI.UIUtils.createTextChild(anchorWrapperElement, ' ');\n        anchorWrapperElement.append(element);\n      }\n\n      UI.UIUtils.createTextChild(anchorWrapperElement, ' ');\n      return anchorWrapperElement;\n    }\n    return null;\n  }\n\n  private buildMessageWithStackTrace(runtimeModel: SDK.RuntimeModel.RuntimeModel): HTMLElement {\n    const toggleElement = document.createElement('div');\n    toggleElement.classList.add('console-message-stack-trace-toggle');\n    const contentElement = toggleElement.createChild('div', 'console-message-stack-trace-wrapper');\n\n    const messageElement = this.buildMessage();\n    const icon = IconButton.Icon.create('triangle-right', 'console-message-expand-icon');\n    const clickableElement = contentElement.createChild('div');\n    UI.ARIAUtils.setExpanded(clickableElement, false);\n    clickableElement.appendChild(icon);\n    // Intercept focus to avoid highlight on click.\n    clickableElement.tabIndex = -1;\n    clickableElement.appendChild(messageElement);\n    const stackTraceElement = contentElement.createChild('div');\n    const stackTracePreview = Components.JSPresentationUtils.buildStackTracePreviewContents(\n        runtimeModel.target(), this.linkifier,\n        {stackTrace: this.message.stackTrace, tabStops: undefined, widthConstrained: true});\n    stackTraceElement.appendChild(stackTracePreview.element);\n    for (const linkElement of stackTracePreview.links) {\n      this.selectableChildren.push({element: linkElement, forceSelect: () => linkElement.focus()});\n    }\n    stackTraceElement.classList.add('hidden');\n    UI.ARIAUtils.setLabel(\n        contentElement, `${messageElement.textContent} ${i18nString(UIStrings.stackMessageCollapsed)}`);\n    UI.ARIAUtils.markAsGroup(stackTraceElement);\n\n    // We debounce the trace expansion metric in case this was accidental.\n    const DEBOUNCE_MS = 300;\n    let debounce: number|undefined;\n    this.expandTrace = (expand: boolean) => {\n      if (expand) {\n        debounce = window.setTimeout(() => {\n          Host.userMetrics.actionTaken(Host.UserMetrics.Action.TraceExpanded);\n        }, DEBOUNCE_MS);\n      } else {\n        clearTimeout(debounce);\n      }\n      icon.name = expand ? 'triangle-down' : 'triangle-right';\n      stackTraceElement.classList.toggle('hidden', !expand);\n      const stackTableState =\n          expand ? i18nString(UIStrings.stackMessageExpanded) : i18nString(UIStrings.stackMessageCollapsed);\n      UI.ARIAUtils.setLabel(contentElement, `${messageElement.textContent} ${stackTableState}`);\n      UI.ARIAUtils.alert(stackTableState);\n      UI.ARIAUtils.setExpanded(clickableElement, expand);\n      this.traceExpanded = expand;\n    };\n\n    const toggleStackTrace = (event: Event): void => {\n      if (UI.UIUtils.isEditing() || contentElement.hasSelection()) {\n        return;\n      }\n      this.expandTrace && this.expandTrace(stackTraceElement.classList.contains('hidden'));\n      event.consume();\n    };\n\n    clickableElement.addEventListener('click', toggleStackTrace, false);\n    if (this.message.type === Protocol.Runtime.ConsoleAPICalledEventType.Trace &&\n        Common.Settings.Settings.instance().moduleSetting('console-trace-expand').get()) {\n      this.expandTrace(true);\n    }\n\n    // @ts-ignore\n    toggleElement._expandStackTraceForTest = this.expandTrace.bind(this, true);\n    return toggleElement;\n  }\n\n  private format(rawParameters: (string|SDK.RemoteObject.RemoteObject|Protocol.Runtime.RemoteObject|undefined)[]):\n      HTMLElement {\n    // This node is used like a Builder. Values are continually appended onto it.\n    const formattedResult = document.createElement('span');\n    if (this.messagePrefix) {\n      formattedResult.createChild('span').textContent = this.messagePrefix;\n    }\n    if (!rawParameters.length) {\n      return formattedResult;\n    }\n\n    // Formatting code below assumes that parameters are all wrappers whereas frontend console\n    // API allows passing arbitrary values as messages (strings, numbers, etc.). Wrap them here.\n    // FIXME: Only pass runtime wrappers here.\n    let parameters = rawParameters.map(parameterToRemoteObject(this.message.runtimeModel()));\n\n    // There can be string log and string eval result. We distinguish between them based on message type.\n    const shouldFormatMessage =\n        SDK.RemoteObject.RemoteObject.type((parameters as SDK.RemoteObject.RemoteObject[])[0]) === 'string' &&\n        (this.message.type !== SDK.ConsoleModel.FrontendMessageType.Result ||\n         this.message.level === Protocol.Log.LogEntryLevel.Error);\n\n    // Multiple parameters with the first being a format string. Save unused substitutions.\n    if (shouldFormatMessage) {\n      parameters = this.formatWithSubstitutionString(\n          (parameters[0].description as string), parameters.slice(1), formattedResult);\n      if (parameters.length) {\n        UI.UIUtils.createTextChild(formattedResult, ' ');\n      }\n    }\n\n    // Single parameter, or unused substitutions from above.\n    for (let i = 0; i < parameters.length; ++i) {\n      // Inline strings when formatting.\n      if (shouldFormatMessage && parameters[i].type === 'string') {\n        formattedResult.appendChild(this.linkifyStringAsFragment(parameters[i].description || ''));\n      } else {\n        formattedResult.appendChild(this.formatParameter(parameters[i], false, true));\n      }\n      if (i < parameters.length - 1) {\n        UI.UIUtils.createTextChild(formattedResult, ' ');\n      }\n    }\n    return formattedResult;\n  }\n\n  protected formatParameter(\n      output: SDK.RemoteObject.RemoteObject, forceObjectFormat?: boolean, includePreview?: boolean): HTMLElement {\n    if (output.customPreview()) {\n      return new ObjectUI.CustomPreviewComponent.CustomPreviewComponent(output).element as HTMLElement;\n    }\n\n    const outputType = forceObjectFormat ? 'object' : (output.subtype || output.type);\n    let element;\n    switch (outputType) {\n      case 'error':\n        element = this.formatParameterAsError(output);\n        break;\n      case 'function':\n        element = this.formatParameterAsFunction(output, includePreview);\n        break;\n      case 'array':\n      case 'arraybuffer':\n      case 'blob':\n      case 'dataview':\n      case 'generator':\n      case 'iterator':\n      case 'map':\n      case 'object':\n      case 'promise':\n      case 'proxy':\n      case 'set':\n      case 'typedarray':\n      case 'wasmvalue':\n      case 'weakmap':\n      case 'weakset':\n      case 'webassemblymemory':\n        element = this.formatParameterAsObject(output, includePreview);\n        break;\n      case 'node':\n        element = output.isNode() ? this.formatParameterAsNode(output) : this.formatParameterAsObject(output, false);\n        break;\n      case 'trustedtype':\n        element = this.formatParameterAsObject(output, false);\n        break;\n      case 'string':\n        element = this.formatParameterAsString(output);\n        break;\n      case 'boolean':\n      case 'date':\n      case 'null':\n      case 'number':\n      case 'regexp':\n      case 'symbol':\n      case 'undefined':\n      case 'bigint':\n        element = this.formatParameterAsValue(output);\n        break;\n      default:\n        element = this.formatParameterAsValue(output);\n        console.error(`Tried to format remote object of unknown type ${outputType}.`);\n    }\n    element.classList.add(`object-value-${outputType}`);\n    element.classList.add('source-code');\n    return element;\n  }\n\n  private formatParameterAsValue(obj: SDK.RemoteObject.RemoteObject): HTMLElement {\n    const result = document.createElement('span');\n    const description = obj.description || '';\n    if (description.length > getMaxTokenizableStringLength()) {\n      const propertyValue = new ObjectUI.ObjectPropertiesSection.ExpandableTextPropertyValue(\n          document.createElement('span'), description, getLongStringVisibleLength());\n      result.appendChild(propertyValue.element);\n    } else {\n      UI.UIUtils.createTextChild(result, description);\n    }\n    result.addEventListener('contextmenu', this.contextMenuEventFired.bind(this, obj), false);\n    return result;\n  }\n\n  private formatParameterAsTrustedType(obj: SDK.RemoteObject.RemoteObject): HTMLElement {\n    const result = document.createElement('span');\n    const trustedContentSpan = document.createElement('span');\n    trustedContentSpan.appendChild(this.formatParameterAsString(obj));\n    trustedContentSpan.classList.add('object-value-string');\n    UI.UIUtils.createTextChild(result, `${obj.className} `);\n    result.appendChild(trustedContentSpan);\n    return result;\n  }\n\n  private formatParameterAsObject(obj: SDK.RemoteObject.RemoteObject, includePreview?: boolean): HTMLElement {\n    const titleElement = document.createElement('span');\n    titleElement.classList.add('console-object');\n    if (includePreview && obj.preview) {\n      titleElement.classList.add('console-object-preview');\n      this.previewFormatter.appendObjectPreview(titleElement, obj.preview, false /* isEntry */);\n      ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.appendMemoryIcon(titleElement, obj);\n    } else if (obj.type === 'function') {\n      const functionElement = titleElement.createChild('span');\n      void ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.formatObjectAsFunction(obj, functionElement, false);\n      titleElement.classList.add('object-value-function');\n    } else if (obj.subtype === 'trustedtype') {\n      titleElement.appendChild(this.formatParameterAsTrustedType(obj));\n    } else {\n      UI.UIUtils.createTextChild(titleElement, obj.description || '');\n    }\n\n    if (!obj.hasChildren || obj.customPreview()) {\n      return titleElement;\n    }\n\n    const note = titleElement.createChild('span', 'object-state-note info-note');\n    if (this.message.type === SDK.ConsoleModel.FrontendMessageType.QueryObjectResult) {\n      UI.Tooltip.Tooltip.install(note, i18nString(UIStrings.thisValueWillNotBeCollectedUntil));\n    } else {\n      UI.Tooltip.Tooltip.install(note, i18nString(UIStrings.thisValueWasEvaluatedUponFirst));\n    }\n\n    const section = new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection(obj, titleElement, this.linkifier);\n    section.element.classList.add('console-view-object-properties-section');\n    section.enableContextMenu();\n    section.setShowSelectionOnKeyboardFocus(true, true);\n    this.selectableChildren.push(section);\n    section.addEventListener(UI.TreeOutline.Events.ElementAttached, this.messageResized);\n    section.addEventListener(UI.TreeOutline.Events.ElementExpanded, this.messageResized);\n    section.addEventListener(UI.TreeOutline.Events.ElementCollapsed, this.messageResized);\n    return section.element;\n  }\n\n  private formatParameterAsFunction(originalFunction: SDK.RemoteObject.RemoteObject, includePreview?: boolean):\n      HTMLElement {\n    const result = document.createElement('span');\n    void SDK.RemoteObject.RemoteFunction.objectAsFunction(originalFunction)\n        .targetFunction()\n        .then(formatTargetFunction.bind(this));\n    return result;\n\n    function formatTargetFunction(this: ConsoleViewMessage, targetFunction: SDK.RemoteObject.RemoteObject): void {\n      const functionElement = document.createElement('span');\n      const promise = ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.formatObjectAsFunction(\n          targetFunction, functionElement, true, includePreview);\n      result.appendChild(functionElement);\n      if (targetFunction !== originalFunction) {\n        const note = result.createChild('span', 'object-state-note info-note');\n        UI.Tooltip.Tooltip.install(note, i18nString(UIStrings.functionWasResolvedFromBound));\n      }\n      result.addEventListener('contextmenu', this.contextMenuEventFired.bind(this, originalFunction), false);\n      void promise.then(() => this.formattedParameterAsFunctionForTest());\n    }\n  }\n\n  private formattedParameterAsFunctionForTest(): void {\n  }\n\n  private contextMenuEventFired(obj: SDK.RemoteObject.RemoteObject, event: Event): void {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.appendApplicableItems(obj);\n    void contextMenu.show();\n  }\n\n  protected renderPropertyPreviewOrAccessor(\n      object: SDK.RemoteObject.RemoteObject|null, property: Protocol.Runtime.PropertyPreview, propertyPath: {\n        name: (string|symbol),\n      }[]): HTMLElement {\n    if (property.type === 'accessor') {\n      return this.formatAsAccessorProperty(object, propertyPath.map(property => property.name.toString()), false);\n    }\n    return this.previewFormatter.renderPropertyPreview(\n        property.type, 'subtype' in property ? property.subtype : undefined, null, property.value);\n  }\n\n  private formatParameterAsNode(remoteObject: SDK.RemoteObject.RemoteObject): HTMLElement {\n    const result = document.createElement('span');\n\n    const domModel = remoteObject.runtimeModel().target().model(SDK.DOMModel.DOMModel);\n    if (!domModel) {\n      return result;\n    }\n    void domModel.pushObjectAsNodeToFrontend(remoteObject).then(async (node: SDK.DOMModel.DOMNode|null) => {\n      if (!node) {\n        result.appendChild(this.formatParameterAsObject(remoteObject, false));\n        return;\n      }\n      const renderResult = await UI.UIUtils.Renderer.render((node as Object));\n      if (renderResult) {\n        if (renderResult.tree) {\n          this.selectableChildren.push(renderResult.tree);\n          renderResult.tree.addEventListener(UI.TreeOutline.Events.ElementAttached, this.messageResized);\n          renderResult.tree.addEventListener(UI.TreeOutline.Events.ElementExpanded, this.messageResized);\n          renderResult.tree.addEventListener(UI.TreeOutline.Events.ElementCollapsed, this.messageResized);\n        }\n        result.appendChild(renderResult.node);\n      } else {\n        result.appendChild(this.formatParameterAsObject(remoteObject, false));\n      }\n      this.formattedParameterAsNodeForTest();\n    });\n\n    return result;\n  }\n\n  private formattedParameterAsNodeForTest(): void {\n  }\n\n  private formatParameterAsString(output: SDK.RemoteObject.RemoteObject): HTMLElement {\n    const description = output.description ?? '';\n    const text = Platform.StringUtilities.formatAsJSLiteral(description);\n    const result = document.createElement('span');\n    result.addEventListener('contextmenu', this.contextMenuEventFired.bind(this, output), false);\n    result.appendChild(this.linkifyStringAsFragment(text));\n    return result;\n  }\n\n  private formatParameterAsError(output: SDK.RemoteObject.RemoteObject): HTMLElement {\n    const result = document.createElement('span');\n\n    // Combine the ExceptionDetails for this error object with the parsed Error#stack.\n    // The Exceptiondetails include script IDs for stack frames, which allows more accurate\n    // linking.\n    const formatErrorStack =\n        async(errorObj: SDK.RemoteObject.RemoteObject, includeCausedByPrefix: boolean): Promise<void> => {\n      const error = SDK.RemoteObject.RemoteError.objectAsError(errorObj);\n      const [details, cause] = await Promise.all([error.exceptionDetails(), error.cause()]);\n      const errorElement =\n          this.tryFormatAsError(error.errorStack, details) ?? this.linkifyStringAsFragment(error.errorStack);\n      if (includeCausedByPrefix) {\n        errorElement.prepend('Caused by: ');\n      }\n      result.appendChild(errorElement);\n\n      if (cause && cause.subtype === 'error') {\n        await formatErrorStack(cause, /* includeCausedByPrefix */ true);\n      } else if (cause && cause.type === 'string') {\n        result.append(`Caused by: ${cause.value}`);\n      }\n    };\n\n    this.#formatErrorStackPromiseForTest = formatErrorStack(output, /* includeCausedByPrefix */ false);\n\n    return result;\n  }\n\n  private formatAsArrayEntry(output: SDK.RemoteObject.RemoteObject): HTMLElement {\n    return this.previewFormatter.renderPropertyPreview(\n        output.type, output.subtype, output.className, output.description);\n  }\n\n  private formatAsAccessorProperty(\n      object: SDK.RemoteObject.RemoteObject|null, propertyPath: string[], isArrayEntry: boolean): HTMLElement {\n    const rootElement =\n        ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement.createRemoteObjectAccessorPropertySpan(\n            object, propertyPath, onInvokeGetterClick.bind(this));\n\n    function onInvokeGetterClick(this: ConsoleViewMessage, result: SDK.RemoteObject.CallFunctionResult): void {\n      const wasThrown = result.wasThrown;\n      const object = result.object;\n      if (!object) {\n        return;\n      }\n      rootElement.removeChildren();\n      if (wasThrown) {\n        const element = rootElement.createChild('span');\n        element.textContent = i18nString(UIStrings.exception);\n        UI.Tooltip.Tooltip.install(element, (object.description as string));\n      } else if (isArrayEntry) {\n        rootElement.appendChild(this.formatAsArrayEntry(object));\n      } else {\n        // Make a PropertyPreview from the RemoteObject similar to the backend logic.\n        const maxLength = 100;\n        const type = object.type;\n        const subtype = object.subtype;\n        let description = '';\n        if (type !== 'function' && object.description) {\n          if (type === 'string' || subtype === 'regexp' || subtype === 'trustedtype') {\n            description = Platform.StringUtilities.trimMiddle(object.description, maxLength);\n          } else {\n            description = Platform.StringUtilities.trimEndWithMaxLength(object.description, maxLength);\n          }\n        }\n        rootElement.appendChild(\n            this.previewFormatter.renderPropertyPreview(type, subtype, object.className, description));\n      }\n    }\n\n    return rootElement;\n  }\n\n  private formatWithSubstitutionString(\n      formatString: string, parameters: SDK.RemoteObject.RemoteObject[],\n      formattedResult: HTMLElement): SDK.RemoteObject.RemoteObject[] {\n    const currentStyle = new Map();\n    const {tokens, args} = format(formatString, parameters);\n    for (const token of tokens) {\n      switch (token.type) {\n        case 'generic': {\n          formattedResult.append(this.formatParameter(token.value, true /* force */, false /* includePreview */));\n          break;\n        }\n        case 'optimal': {\n          formattedResult.append(this.formatParameter(token.value, false /* force */, true /* includePreview */));\n          break;\n        }\n        case 'string': {\n          if (currentStyle.size === 0) {\n            formattedResult.append(this.linkifyStringAsFragment(token.value));\n          } else {\n            const lines = token.value.split('\\n');\n            for (let i = 0; i < lines.length; i++) {\n              if (i > 0) {\n                formattedResult.append(document.createElement('br'));\n              }\n              const wrapper = document.createElement('span');\n              wrapper.style.setProperty('contain', 'paint');\n              wrapper.style.setProperty('display', 'inline-block');\n              wrapper.style.setProperty('max-width', '100%');\n              wrapper.appendChild(this.linkifyStringAsFragment(lines[i]));\n              for (const [property, {value, priority}] of currentStyle) {\n                wrapper.style.setProperty(property, value, priority);\n              }\n              formattedResult.append(wrapper);\n            }\n          }\n          break;\n        }\n        case 'style':\n          // Make sure that allowed properties do not interfere with link visibility.\n          updateStyle(currentStyle, token.value);\n          break;\n      }\n    }\n    return args;\n  }\n\n  matchesFilterRegex(regexObject: RegExp): boolean {\n    regexObject.lastIndex = 0;\n    const contentElement = this.contentElement();\n    const anchorText = this.anchorElement ? this.anchorElement.deepTextContent() : '';\n    return (Boolean(anchorText) && regexObject.test(anchorText.trim())) ||\n        regexObject.test(contentElement.deepTextContent().slice(anchorText.length));\n  }\n\n  matchesFilterText(filter: string): boolean {\n    const text = this.contentElement().deepTextContent();\n    return text.toLowerCase().includes(filter.toLowerCase());\n  }\n\n  updateTimestamp(): void {\n    if (!this.contentElementInternal) {\n      return;\n    }\n\n    if (Common.Settings.Settings.instance().moduleSetting('console-timestamps-enabled').get()) {\n      if (!this.timestampElement) {\n        this.timestampElement = document.createElement('span');\n        this.timestampElement.classList.add('console-timestamp');\n      }\n      this.timestampElement.textContent = UI.UIUtils.formatTimestamp(this.message.timestamp, false) + ' ';\n      UI.Tooltip.Tooltip.install(this.timestampElement, UI.UIUtils.formatTimestamp(this.message.timestamp, true));\n      this.contentElementInternal.insertBefore(this.timestampElement, this.contentElementInternal.firstChild);\n    } else if (this.timestampElement) {\n      this.timestampElement.remove();\n      this.timestampElement = null;\n    }\n  }\n\n  nestingLevel(): number {\n    let nestingLevel = 0;\n    for (let group = this.consoleGroup(); group !== null; group = group.consoleGroup()) {\n      nestingLevel++;\n    }\n    return nestingLevel;\n  }\n\n  setConsoleGroup(group: ConsoleGroupViewMessage): void {\n    // TODO(crbug.com/1477675): Figure out why `this.consoleGroupInternal` is\n    //     not null here and add an assertion.\n    this.consoleGroupInternal = group;\n  }\n\n  clearConsoleGroup(): void {\n    this.consoleGroupInternal = null;\n  }\n\n  consoleGroup(): ConsoleGroupViewMessage|null {\n    return this.consoleGroupInternal;\n  }\n\n  setInSimilarGroup(inSimilarGroup: boolean, isLast?: boolean): void {\n    this.inSimilarGroup = inSimilarGroup;\n    this.lastInSimilarGroup = inSimilarGroup && Boolean(isLast);\n    if (this.similarGroupMarker && !inSimilarGroup) {\n      this.similarGroupMarker.remove();\n      this.similarGroupMarker = null;\n    } else if (this.elementInternal && !this.similarGroupMarker && inSimilarGroup) {\n      this.similarGroupMarker = document.createElement('div');\n      this.similarGroupMarker.classList.add('nesting-level-marker');\n      this.consoleRowWrapper?.insertBefore(this.similarGroupMarker, this.consoleRowWrapper.firstChild);\n      this.similarGroupMarker.classList.toggle('group-closed', this.lastInSimilarGroup);\n    }\n  }\n\n  isLastInSimilarGroup(): boolean {\n    return Boolean(this.inSimilarGroup) && Boolean(this.lastInSimilarGroup);\n  }\n\n  resetCloseGroupDecorationCount(): void {\n    if (!this.closeGroupDecorationCount) {\n      return;\n    }\n    this.closeGroupDecorationCount = 0;\n    this.updateCloseGroupDecorations();\n  }\n\n  incrementCloseGroupDecorationCount(): void {\n    ++this.closeGroupDecorationCount;\n    this.updateCloseGroupDecorations();\n  }\n\n  private updateCloseGroupDecorations(): void {\n    if (!this.nestingLevelMarkers) {\n      return;\n    }\n    for (let i = 0, n = this.nestingLevelMarkers.length; i < n; ++i) {\n      const marker = this.nestingLevelMarkers[i];\n      marker.classList.toggle('group-closed', n - i <= this.closeGroupDecorationCount);\n    }\n  }\n\n  protected focusedChildIndex(): number {\n    if (!this.selectableChildren.length) {\n      return -1;\n    }\n    return this.selectableChildren.findIndex(child => child.element.hasFocus());\n  }\n\n  private onKeyDown(event: KeyboardEvent): void {\n    if (UI.UIUtils.isEditing() || !this.elementInternal || !this.elementInternal.hasFocus() ||\n        this.elementInternal.hasSelection()) {\n      return;\n    }\n    if (this.maybeHandleOnKeyDown(event)) {\n      event.consume(true);\n    }\n  }\n\n  maybeHandleOnKeyDown(event: KeyboardEvent): boolean {\n    // Handle trace expansion.\n    const focusedChildIndex = this.focusedChildIndex();\n    const isWrapperFocused = focusedChildIndex === -1;\n    if (this.expandTrace && isWrapperFocused) {\n      if ((event.key === 'ArrowLeft' && this.traceExpanded) || (event.key === 'ArrowRight' && !this.traceExpanded)) {\n        this.expandTrace(!this.traceExpanded);\n        return true;\n      }\n    }\n    if (!this.selectableChildren.length) {\n      return false;\n    }\n\n    if (event.key === 'ArrowLeft') {\n      this.elementInternal && this.elementInternal.focus();\n      return true;\n    }\n    if (event.key === 'ArrowRight') {\n      if (isWrapperFocused && this.selectNearestVisibleChild(0)) {\n        return true;\n      }\n    }\n    if (event.key === 'ArrowUp') {\n      const firstVisibleChild = this.nearestVisibleChild(0);\n      if (this.selectableChildren[focusedChildIndex] === firstVisibleChild && firstVisibleChild) {\n        this.elementInternal && this.elementInternal.focus();\n        return true;\n      }\n      if (this.selectNearestVisibleChild(focusedChildIndex - 1, true /* backwards */)) {\n        return true;\n      }\n    }\n    if (event.key === 'ArrowDown') {\n      if (isWrapperFocused && this.selectNearestVisibleChild(0)) {\n        return true;\n      }\n      if (!isWrapperFocused && this.selectNearestVisibleChild(focusedChildIndex + 1)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private selectNearestVisibleChild(fromIndex: number, backwards?: boolean): boolean {\n    const nearestChild = this.nearestVisibleChild(fromIndex, backwards);\n    if (nearestChild) {\n      nearestChild.forceSelect();\n      return true;\n    }\n    return false;\n  }\n\n  private nearestVisibleChild(fromIndex: number, backwards?: boolean): {\n    element: Element,\n    forceSelect: () => void,\n  }|null {\n    const childCount = this.selectableChildren.length;\n    if (fromIndex < 0 || fromIndex >= childCount) {\n      return null;\n    }\n    const direction = backwards ? -1 : 1;\n    let index = fromIndex;\n\n    while (!this.selectableChildren[index].element.offsetParent) {\n      index += direction;\n      if (index < 0 || index >= childCount) {\n        return null;\n      }\n    }\n    return this.selectableChildren[index];\n  }\n\n  focusLastChildOrSelf(): void {\n    if (this.elementInternal &&\n        !this.selectNearestVisibleChild(this.selectableChildren.length - 1, true /* backwards */)) {\n      this.elementInternal.focus();\n    }\n  }\n\n  setContentElement(element: HTMLElement): void {\n    console.assert(!this.contentElementInternal, 'Cannot set content element twice');\n    this.contentElementInternal = element;\n  }\n\n  getContentElement(): HTMLElement|null {\n    return this.contentElementInternal;\n  }\n\n  contentElement(): HTMLElement {\n    if (this.contentElementInternal) {\n      return this.contentElementInternal;\n    }\n\n    const contentElement = document.createElement('div');\n    contentElement.classList.add('console-message');\n    if (this.messageIcon) {\n      contentElement.appendChild(this.messageIcon);\n    }\n    this.contentElementInternal = contentElement;\n\n    const runtimeModel = this.message.runtimeModel();\n    let formattedMessage;\n    const shouldIncludeTrace = Boolean(this.message.stackTrace) &&\n        (this.message.source === Protocol.Log.LogEntrySource.Network ||\n         this.message.source === Protocol.Log.LogEntrySource.Violation ||\n         this.message.level === Protocol.Log.LogEntryLevel.Error ||\n         this.message.level === Protocol.Log.LogEntryLevel.Warning ||\n         this.message.type === Protocol.Runtime.ConsoleAPICalledEventType.Trace);\n    if (runtimeModel && shouldIncludeTrace) {\n      formattedMessage = this.buildMessageWithStackTrace(runtimeModel);\n    } else {\n      formattedMessage = this.buildMessage();\n    }\n    contentElement.appendChild(formattedMessage);\n\n    this.updateTimestamp();\n    return this.contentElementInternal;\n  }\n\n  toMessageElement(): HTMLElement {\n    if (this.elementInternal) {\n      return this.elementInternal;\n    }\n    this.elementInternal = document.createElement('div');\n    this.elementInternal.tabIndex = -1;\n    this.elementInternal.addEventListener('keydown', (this.onKeyDown.bind(this) as EventListener));\n    this.updateMessageElement();\n    this.elementInternal.classList.toggle('console-adjacent-user-command-result', this.#adjacentUserCommandResult);\n    return this.elementInternal;\n  }\n\n  updateMessageElement(): void {\n    if (!this.elementInternal) {\n      return;\n    }\n\n    this.elementInternal.className = 'console-message-wrapper';\n    this.elementInternal.setAttribute('jslog', `${VisualLogging.item('console-message').track({\n                                        click: true,\n                                        keydown: 'ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Enter|Space|Home|End',\n                                      })}`);\n    this.elementInternal.removeChildren();\n    this.consoleRowWrapper = this.elementInternal.createChild('div');\n    this.consoleRowWrapper.classList.add('console-row-wrapper');\n    if (this.message.isGroupStartMessage()) {\n      this.elementInternal.classList.add('console-group-title');\n    }\n    if (this.message.source === Common.Console.FrontendMessageSource.ConsoleAPI) {\n      this.elementInternal.classList.add('console-from-api');\n    }\n    if (this.inSimilarGroup) {\n      this.similarGroupMarker = (this.consoleRowWrapper.createChild('div', 'nesting-level-marker') as HTMLElement);\n      this.similarGroupMarker.classList.toggle('group-closed', this.lastInSimilarGroup);\n    }\n\n    this.nestingLevelMarkers = [];\n    for (let i = 0; i < this.nestingLevel(); ++i) {\n      this.nestingLevelMarkers.push(this.consoleRowWrapper.createChild('div', 'nesting-level-marker'));\n    }\n    this.updateCloseGroupDecorations();\n    elementToMessage.set(this.elementInternal, this);\n\n    switch (this.message.level) {\n      case Protocol.Log.LogEntryLevel.Verbose:\n        this.elementInternal.classList.add('console-verbose-level');\n        UI.ARIAUtils.setLabel(this.elementInternal, this.text);\n        break;\n      case Protocol.Log.LogEntryLevel.Info:\n        this.elementInternal.classList.add('console-info-level');\n        if (this.message.type === SDK.ConsoleModel.FrontendMessageType.System) {\n          this.elementInternal.classList.add('console-system-type');\n        }\n        UI.ARIAUtils.setLabel(this.elementInternal, this.text);\n        break;\n      case Protocol.Log.LogEntryLevel.Warning:\n        this.elementInternal.classList.add('console-warning-level');\n        this.elementInternal.role = 'log';\n        UI.ARIAUtils.setLabel(this.elementInternal, this.text);\n        break;\n      case Protocol.Log.LogEntryLevel.Error:\n        this.elementInternal.classList.add('console-error-level');\n        this.elementInternal.role = 'log';\n        UI.ARIAUtils.setLabel(this.elementInternal, this.text);\n        break;\n    }\n    this.updateMessageIcon();\n    if (this.shouldRenderAsWarning()) {\n      this.elementInternal.classList.add('console-warning-level');\n    }\n\n    this.consoleRowWrapper.appendChild(this.contentElement());\n\n    if (UI.ActionRegistry.ActionRegistry.instance().hasAction(EXPLAIN_HOVER_ACTION_ID) && this.shouldShowInsights()) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightConsoleMessageShown);\n      this.consoleRowWrapper.append(this.#createHoverButton());\n    }\n\n    if (this.repeatCountInternal > 1) {\n      this.showRepeatCountElement();\n    }\n  }\n\n  shouldShowInsights(): boolean {\n    if (this.message.source === Common.Console.FrontendMessageSource.ConsoleAPI &&\n        this.message.stackTrace?.callFrames[0]?.url === '') {\n      // Do not show insights for direct calls to Console APIs from within DevTools Console.\n      return false;\n    }\n    if (this.message.messageText === '' || this.message.source === Common.Console.FrontendMessageSource.SelfXss) {\n      return false;\n    }\n    return this.message.level === Protocol.Log.LogEntryLevel.Error ||\n        this.message.level === Protocol.Log.LogEntryLevel.Warning;\n  }\n\n  getExplainLabel(): string {\n    if (this.message.level === Protocol.Log.LogEntryLevel.Error) {\n      return i18nString(UIStrings.explainThisError);\n    }\n    if (this.message.level === Protocol.Log.LogEntryLevel.Warning) {\n      return i18nString(UIStrings.explainThisWarning);\n    }\n    return i18nString(UIStrings.explainThisMessage);\n  }\n\n  getExplainActionId(): string {\n    if (this.message.level === Protocol.Log.LogEntryLevel.Error) {\n      return EXPLAIN_CONTEXT_ERROR_ACTION_ID;\n    }\n    if (this.message.level === Protocol.Log.LogEntryLevel.Warning) {\n      return EXPLAIN_CONTEXT_WARNING_ACTION_ID;\n    }\n    return EXPLAIN_CONTEXT_OTHER_ACTION_ID;\n  }\n\n  #createHoverButton(): HTMLButtonElement {\n    const icon = new IconButton.Icon.Icon();\n    icon.data = {\n      iconName: 'lightbulb-spark',\n      color: 'var(--sys-color-primary)',\n      width: '16px',\n      height: '16px',\n    };\n    const button = document.createElement('button');\n    button.append(icon);\n    button.onclick = (event: Event) => {\n      event.stopPropagation();\n      UI.Context.Context.instance().setFlavor(ConsoleViewMessage, this);\n      const action = UI.ActionRegistry.ActionRegistry.instance().getAction(EXPLAIN_HOVER_ACTION_ID);\n      void action.execute();\n    };\n    const text = document.createElement('span');\n    text.innerText = this.getExplainLabel();\n    button.append(text);\n    button.classList.add('hover-button');\n    button.ariaLabel = this.getExplainLabel();\n    button.tabIndex = 0;\n    button.setAttribute('jslog', `${VisualLogging.action(EXPLAIN_HOVER_ACTION_ID).track({click: true})}`);\n    hoverButtonObserver.observe(button);\n    return button;\n  }\n\n  private shouldRenderAsWarning(): boolean {\n    return (this.message.level === Protocol.Log.LogEntryLevel.Verbose ||\n            this.message.level === Protocol.Log.LogEntryLevel.Info) &&\n        (this.message.source === Protocol.Log.LogEntrySource.Violation ||\n         this.message.source === Protocol.Log.LogEntrySource.Deprecation ||\n         this.message.source === Protocol.Log.LogEntrySource.Intervention ||\n         this.message.source === Protocol.Log.LogEntrySource.Recommendation);\n  }\n\n  private updateMessageIcon(): void {\n    if (this.messageIcon) {\n      // Instead of updating the existing icon, we simply re-render. This happens only for\n      // revoked exceptions so it doesn't need to be terribly efficient.\n      this.messageIcon.remove();\n      this.messageIcon = null;\n    }\n\n    let color = '';\n    let iconName = '';\n    let accessibleName = '';\n    if (this.message.level === Protocol.Log.LogEntryLevel.Warning) {\n      color = 'var(--icon-warning)';\n      iconName = 'warning-filled';\n      accessibleName = i18nString(UIStrings.warning);\n    } else if (this.message.level === Protocol.Log.LogEntryLevel.Error) {\n      color = 'var(--icon-error)';\n      iconName = 'cross-circle-filled';\n      accessibleName = i18nString(UIStrings.error);\n    } else if (this.message.originatesFromLogpoint) {\n      iconName = 'console-logpoint';\n      accessibleName = i18nString(UIStrings.logpoint);\n    } else if (this.message.originatesFromConditionalBreakpoint) {\n      iconName = 'console-conditional-breakpoint';\n      accessibleName = i18nString(UIStrings.cndBreakpoint);\n    }\n    if (!iconName) {\n      return;\n    }\n\n    this.messageIcon = new IconButton.Icon.Icon();\n    this.messageIcon.data = {\n      iconName,\n      color,\n      width: '14px',\n      height: '14px',\n    };\n    this.messageIcon.classList.add('message-level-icon');\n    if (this.contentElementInternal) {\n      this.contentElementInternal.insertBefore(this.messageIcon, this.contentElementInternal.firstChild);\n    }\n    UI.ARIAUtils.setLabel(this.messageIcon, accessibleName);\n  }\n\n  setAdjacentUserCommandResult(adjacentUserCommandResult: boolean): void {\n    this.#adjacentUserCommandResult = adjacentUserCommandResult;\n    this.elementInternal?.classList.toggle('console-adjacent-user-command-result', this.#adjacentUserCommandResult);\n  }\n\n  repeatCount(): number {\n    return this.repeatCountInternal || 1;\n  }\n\n  resetIncrementRepeatCount(): void {\n    this.repeatCountInternal = 1;\n    if (!this.repeatCountElement) {\n      return;\n    }\n\n    this.repeatCountElement.remove();\n    if (this.contentElementInternal) {\n      this.contentElementInternal.classList.remove('repeated-message');\n    }\n    this.repeatCountElement = null;\n  }\n\n  incrementRepeatCount(): void {\n    this.repeatCountInternal++;\n    this.showRepeatCountElement();\n  }\n\n  setRepeatCount(repeatCount: number): void {\n    this.repeatCountInternal = repeatCount;\n    this.showRepeatCountElement();\n  }\n\n  showRepeatCountElement(): void {\n    if (!this.elementInternal) {\n      return;\n    }\n\n    if (!this.repeatCountElement) {\n      this.repeatCountElement =\n          (document.createElement('span', {is: 'dt-small-bubble'}) as UI.UIUtils.DevToolsSmallBubble);\n      this.repeatCountElement.classList.add('console-message-repeat-count');\n      switch (this.message.level) {\n        case Protocol.Log.LogEntryLevel.Warning:\n          this.repeatCountElement.type = 'warning';\n          break;\n        case Protocol.Log.LogEntryLevel.Error:\n          this.repeatCountElement.type = 'error';\n          break;\n        case Protocol.Log.LogEntryLevel.Verbose:\n          this.repeatCountElement.type = 'verbose';\n          break;\n        default:\n          this.repeatCountElement.type = 'info';\n      }\n      if (this.shouldRenderAsWarning()) {\n        this.repeatCountElement.type = 'warning';\n      }\n\n      this.consoleRowWrapper?.insertBefore(this.repeatCountElement, this.contentElementInternal);\n      this.contentElement().classList.add('repeated-message');\n    }\n    this.repeatCountElement.textContent = `${this.repeatCountInternal}`;\n\n    let accessibleName;\n    if (this.message.level === Protocol.Log.LogEntryLevel.Warning) {\n      accessibleName = i18nString(UIStrings.warningS, {n: this.repeatCountInternal});\n    } else if (this.message.level === Protocol.Log.LogEntryLevel.Error) {\n      accessibleName = i18nString(UIStrings.errorS, {n: this.repeatCountInternal});\n    } else {\n      accessibleName = i18nString(UIStrings.repeatS, {n: this.repeatCountInternal});\n    }\n    UI.ARIAUtils.setLabel(this.repeatCountElement, accessibleName);\n  }\n\n  get text(): string {\n    return this.message.messageText;\n  }\n\n  toExportString(): string {\n    const lines = [];\n    const nodes = this.contentElement().childTextNodes();\n    const messageContent = nodes.map(Components.Linkifier.Linkifier.untruncatedNodeText).join('');\n    for (let i = 0; i < this.repeatCount(); ++i) {\n      lines.push(messageContent);\n    }\n    return lines.join('\\n');\n  }\n\n  toMessageTextString(): string {\n    const root = this.contentElement();\n    const consoleText = root.querySelector('.console-message-text');\n    if (consoleText) {\n      return consoleText.deepTextContent().trim();\n    }\n    // Fallback to SDK's message text.\n    return this.consoleMessage().messageText;\n  }\n\n  setSearchRegex(regex: RegExp|null): void {\n    if (this.searchHighlightNodeChanges && this.searchHighlightNodeChanges.length) {\n      UI.UIUtils.revertDomChanges(this.searchHighlightNodeChanges);\n    }\n    this.searchRegexInternal = regex;\n    this.searchHighlightNodes = [];\n    this.searchHighlightNodeChanges = [];\n    if (!this.searchRegexInternal) {\n      return;\n    }\n\n    const text = this.contentElement().deepTextContent();\n    let match;\n    this.searchRegexInternal.lastIndex = 0;\n    const sourceRanges = [];\n    while ((match = this.searchRegexInternal.exec(text)) && match[0]) {\n      sourceRanges.push(new TextUtils.TextRange.SourceRange(match.index, match[0].length));\n    }\n\n    if (sourceRanges.length) {\n      this.searchHighlightNodes =\n          UI.UIUtils.highlightSearchResults(this.contentElement(), sourceRanges, this.searchHighlightNodeChanges);\n    }\n  }\n\n  searchRegex(): RegExp|null {\n    return this.searchRegexInternal;\n  }\n\n  searchCount(): number {\n    return this.searchHighlightNodes.length;\n  }\n\n  searchHighlightNode(index: number): Element {\n    return this.searchHighlightNodes[index];\n  }\n\n  private async getInlineFrames(\n      debuggerModel: SDK.DebuggerModel.DebuggerModel, url: Platform.DevToolsPath.UrlString,\n      lineNumber: number|undefined, columnNumber: number|undefined): Promise<{frames: Chrome.DevTools.FunctionInfo[]}> {\n    const debuggerWorkspaceBinding = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance();\n    const projects = Workspace.Workspace.WorkspaceImpl.instance().projects();\n    const uiSourceCodes = projects.map(project => project.uiSourceCodeForURL(url)).flat().filter(f => Boolean(f)) as\n        Workspace.UISourceCode.UISourceCode[];\n    const scripts =\n        uiSourceCodes.map(uiSourceCode => debuggerWorkspaceBinding.scriptsForUISourceCode(uiSourceCode)).flat();\n    if (scripts.length) {\n      const location =\n          new SDK.DebuggerModel.Location(debuggerModel, scripts[0].scriptId, lineNumber || 0, columnNumber);\n      const functionInfo = await debuggerWorkspaceBinding.pluginManager.getFunctionInfo(scripts[0], location);\n      return functionInfo && 'frames' in functionInfo ? functionInfo : {frames: []};\n    }\n\n    return {frames: []};\n  }\n\n  // Expand inline stack frames in the formatted error in the stackTrace element, inserting new elements before the\n  // insertBefore anchor.\n  private async expandInlineStackFrames(\n      debuggerModel: SDK.DebuggerModel.DebuggerModel, prefix: string, suffix: string,\n      url: Platform.DevToolsPath.UrlString, lineNumber: number|undefined, columnNumber: number|undefined,\n      stackTrace: HTMLElement, insertBefore: HTMLElement): Promise<boolean> {\n    const {frames} = await this.getInlineFrames(debuggerModel, url, lineNumber, columnNumber);\n    if (!frames.length) {\n      return false;\n    }\n\n    for (let f = 0; f < frames.length; ++f) {\n      const {name} = frames[f];\n      const formattedLine = document.createElement('span');\n      formattedLine.appendChild(this.linkifyStringAsFragment(`${prefix} ${name} (`));\n      const scriptLocationLink = this.linkifier.linkifyScriptLocation(\n          debuggerModel.target(), null, url, lineNumber, {columnNumber, inlineFrameIndex: f});\n      scriptLocationLink.tabIndex = -1;\n      this.selectableChildren.push({element: scriptLocationLink, forceSelect: () => scriptLocationLink.focus()});\n      formattedLine.appendChild(scriptLocationLink);\n      formattedLine.appendChild(this.linkifyStringAsFragment(suffix));\n      stackTrace.insertBefore(formattedLine, insertBefore);\n    }\n    return true;\n  }\n\n  private createScriptLocationLinkForSyntaxError(\n      debuggerModel: SDK.DebuggerModel.DebuggerModel, exceptionDetails: Protocol.Runtime.ExceptionDetails): HTMLElement\n      |undefined {\n    const {scriptId, lineNumber, columnNumber} = exceptionDetails;\n    if (!scriptId) {\n      return;\n    }\n\n    // SyntaxErrors might not populate the URL field. Try to resolve it via scriptId.\n    const url =\n        exceptionDetails.url as Platform.DevToolsPath.UrlString || debuggerModel.scriptForId(scriptId)?.sourceURL;\n    if (!url) {\n      return;\n    }\n\n    const scriptLocationLink = this.linkifier.linkifyScriptLocation(\n        debuggerModel.target(), exceptionDetails.scriptId || null, url, lineNumber, {\n          columnNumber,\n          inlineFrameIndex: 0,\n          showColumnNumber: true,\n        });\n    scriptLocationLink.tabIndex = -1;\n    return scriptLocationLink;\n  }\n\n  private tryFormatAsError(string: string, exceptionDetails?: Protocol.Runtime.ExceptionDetails): HTMLElement|null {\n    const runtimeModel = this.message.runtimeModel();\n    if (!runtimeModel) {\n      return null;\n    }\n\n    const linkInfos = parseSourcePositionsFromErrorStack(runtimeModel, string);\n    if (!linkInfos?.length) {\n      return null;\n    }\n    if (exceptionDetails?.stackTrace) {\n      augmentErrorStackWithScriptIds(linkInfos, exceptionDetails.stackTrace);\n    }\n\n    const debuggerModel = runtimeModel.debuggerModel();\n    const formattedResult = document.createElement('div');\n\n    for (let i = 0; i < linkInfos.length; ++i) {\n      const newline = i < linkInfos.length - 1 ? '\\n' : '';\n      const {line, link} = linkInfos[i];\n      // Syntax errors don't have a stack frame that points to the source position\n      // where the error occurred. We use the source location from the\n      // exceptionDetails and append it to the end of the message instead.\n      if (!link && exceptionDetails && line.startsWith('SyntaxError')) {\n        formattedResult.appendChild(this.linkifyStringAsFragment(line));\n        const maybeScriptLocation = this.createScriptLocationLinkForSyntaxError(debuggerModel, exceptionDetails);\n        if (maybeScriptLocation) {\n          formattedResult.append(' (at ');\n          formattedResult.appendChild(maybeScriptLocation);\n          formattedResult.append(')');\n        }\n        formattedResult.append(newline);\n        continue;\n      }\n      if (!link) {\n        formattedResult.appendChild(this.linkifyStringAsFragment(`${line}${newline}`));\n        continue;\n      }\n      const formattedLine = document.createElement('span');\n      const suffix = `${link.suffix}${newline}`;\n      formattedLine.appendChild(this.linkifyStringAsFragment(link.prefix));\n      const scriptLocationLink = this.linkifier.linkifyScriptLocation(\n          debuggerModel.target(), link.scriptId || null, link.url, link.lineNumber, {\n            columnNumber: link.columnNumber,\n            inlineFrameIndex: 0,\n            showColumnNumber: true,\n          });\n      scriptLocationLink.tabIndex = -1;\n      this.selectableChildren.push({element: scriptLocationLink, forceSelect: () => scriptLocationLink.focus()});\n      formattedLine.appendChild(scriptLocationLink);\n      formattedLine.appendChild(this.linkifyStringAsFragment(suffix));\n      formattedResult.appendChild(formattedLine);\n\n      if (!link.enclosedInBraces) {\n        continue;\n      }\n\n      const prefixWithoutFunction = link.prefix.substring(0, link.prefix.lastIndexOf(' ', link.prefix.length - 3));\n\n      // If we were able to parse the function name from the stack trace line, try to replace it with an expansion of\n      // any inline frames.\n      const selectableChildIndex = this.selectableChildren.length - 1;\n      void this\n          .expandInlineStackFrames(\n              debuggerModel, prefixWithoutFunction, suffix, link.url, link.lineNumber, link.columnNumber,\n              formattedResult, formattedLine)\n          .then(modified => {\n            if (modified) {\n              formattedResult.removeChild(formattedLine);\n              this.selectableChildren.splice(selectableChildIndex, 1);\n            }\n          });\n    }\n\n    return formattedResult;\n  }\n\n  private linkifyWithCustomLinkifier(\n      string: string,\n      linkifier: (arg0: string, arg1: Platform.DevToolsPath.UrlString, arg2?: number, arg3?: number) => Node):\n      DocumentFragment {\n    if (string.length > getMaxTokenizableStringLength()) {\n      const propertyValue = new ObjectUI.ObjectPropertiesSection.ExpandableTextPropertyValue(\n          document.createElement('span'), string, getLongStringVisibleLength());\n      const fragment = document.createDocumentFragment();\n      fragment.appendChild(propertyValue.element);\n      return fragment;\n    }\n    const container = document.createDocumentFragment();\n    const tokens = ConsoleViewMessage.tokenizeMessageText(string);\n    let isBlob = false;\n    for (const token of tokens) {\n      if (!token.text) {\n        continue;\n      }\n      if (isBlob) {\n        token.text = `blob:${token.text}`;\n        isBlob = !isBlob;\n      }\n      if (token.text === '\\'blob:' && token === tokens[0]) {\n        isBlob = true;\n        token.text = '\\'';\n      }\n      switch (token.type) {\n        case 'url': {\n          const realURL = (token.text.startsWith('www.') ? 'http://' + token.text : token.text);\n          const splitResult = Common.ParsedURL.ParsedURL.splitLineAndColumn(realURL);\n          const sourceURL = Common.ParsedURL.ParsedURL.removeWasmFunctionInfoFromURL(splitResult.url);\n          let linkNode;\n          if (splitResult) {\n            linkNode = linkifier(token.text, sourceURL, splitResult.lineNumber, splitResult.columnNumber);\n          } else {\n            linkNode = linkifier(token.text, Platform.DevToolsPath.EmptyUrlString);\n          }\n          container.appendChild(linkNode);\n          break;\n        }\n        default:\n          container.appendChild(document.createTextNode(token.text));\n          break;\n      }\n    }\n    return container;\n  }\n\n  private linkifyStringAsFragment(string: string): DocumentFragment {\n    return this.linkifyWithCustomLinkifier(string, (text, url, lineNumber, columnNumber) => {\n      const options = {text, lineNumber, columnNumber};\n      const linkElement =\n          Components.Linkifier.Linkifier.linkifyURL(url, (options as Components.Linkifier.LinkifyURLOptions));\n      linkElement.tabIndex = -1;\n      this.selectableChildren.push({element: linkElement, forceSelect: () => linkElement.focus()});\n      return linkElement;\n    });\n  }\n\n  private static tokenizeMessageText(string: string): {\n    type?: string, text: string,\n  }[] {\n    const {tokenizerRegexes, tokenizerTypes} = getOrCreateTokenizers();\n    if (string.length > getMaxTokenizableStringLength()) {\n      return [{text: string, type: undefined}];\n    }\n    const results = TextUtils.TextUtils.Utils.splitStringByRegexes(string, tokenizerRegexes);\n    return results.map(result => ({text: result.value, type: tokenizerTypes[result.regexIndex]}));\n  }\n\n  groupKey(): string {\n    if (!this.groupKeyInternal) {\n      this.groupKeyInternal = this.message.groupCategoryKey() + ':' + this.groupTitle();\n    }\n    return this.groupKeyInternal;\n  }\n\n  groupTitle(): string {\n    const tokens = ConsoleViewMessage.tokenizeMessageText(this.message.messageText);\n    const result = tokens.reduce((acc, token) => {\n      let text: Common.UIString.LocalizedString|string = token.text;\n      if (token.type === 'url') {\n        text = i18nString(UIStrings.url);\n      } else if (token.type === 'time') {\n        text = i18nString(UIStrings.tookNms);\n      } else if (token.type === 'event') {\n        text = i18nString(UIStrings.someEvent);\n      } else if (token.type === 'milestone') {\n        text = i18nString(UIStrings.Mxx);\n      } else if (token.type === 'autofill') {\n        text = i18nString(UIStrings.attribute);\n      }\n      return acc + text;\n    }, '');\n    return result.replace(/[%]o/g, '');\n  }\n}\n\nlet tokenizerRegexes: RegExp[]|null = null;\nlet tokenizerTypes: string[]|null = null;\n\nfunction getOrCreateTokenizers(): {\n  tokenizerRegexes: Array<RegExp>,\n  tokenizerTypes: Array<string>,\n} {\n  if (!tokenizerRegexes || !tokenizerTypes) {\n    const controlCodes = '\\\\u0000-\\\\u0020\\\\u007f-\\\\u009f';\n    const linkStringRegex = new RegExp(\n        '(?:[a-zA-Z][a-zA-Z0-9+.-]{2,}:\\\\/\\\\/|data:|www\\\\.)[^\\\\s' + controlCodes + '\"]{2,}[^\\\\s' + controlCodes +\n            '\"\\')}\\\\],:;.!?]',\n        'u');\n    const pathLineRegex = /(?:\\/[\\w\\.-]*)+\\:[\\d]+/;\n    const timeRegex = /took [\\d]+ms/;\n    const eventRegex = /'\\w+' event/;\n    const milestoneRegex = /\\sM[6-7]\\d/;\n    const autofillRegex = /\\(suggested: \\\"[\\w-]+\\\"\\)/;\n    const handlers = new Map<RegExp, string>();\n    handlers.set(linkStringRegex, 'url');\n    handlers.set(pathLineRegex, 'url');\n    handlers.set(timeRegex, 'time');\n    handlers.set(eventRegex, 'event');\n    handlers.set(milestoneRegex, 'milestone');\n    handlers.set(autofillRegex, 'autofill');\n    tokenizerRegexes = Array.from(handlers.keys());\n    tokenizerTypes = Array.from(handlers.values());\n    return {tokenizerRegexes, tokenizerTypes};\n  }\n  return {tokenizerRegexes, tokenizerTypes};\n}\n\nexport class ConsoleGroupViewMessage extends ConsoleViewMessage {\n  private collapsedInternal: boolean;\n  private expandGroupIcon: IconButton.Icon.Icon|null;\n  private readonly onToggle: () => void;\n  private groupEndMessageInternal: ConsoleViewMessage|null;\n\n  constructor(\n      consoleMessage: SDK.ConsoleModel.ConsoleMessage, linkifier: Components.Linkifier.Linkifier,\n      requestResolver: Logs.RequestResolver.RequestResolver, issueResolver: IssuesManager.IssueResolver.IssueResolver,\n      onToggle: () => void, onResize: (arg0: Common.EventTarget.EventTargetEvent<UI.TreeOutline.TreeElement>) => void) {\n    console.assert(consoleMessage.isGroupStartMessage());\n    super(consoleMessage, linkifier, requestResolver, issueResolver, onResize);\n    this.collapsedInternal = consoleMessage.type === Protocol.Runtime.ConsoleAPICalledEventType.StartGroupCollapsed;\n    this.expandGroupIcon = null;\n    this.onToggle = onToggle;\n    this.groupEndMessageInternal = null;\n  }\n\n  private setCollapsed(collapsed: boolean): void {\n    this.collapsedInternal = collapsed;\n    if (this.expandGroupIcon) {\n      this.expandGroupIcon.name = this.collapsedInternal ? 'triangle-right' : 'triangle-down';\n    }\n    this.onToggle.call(null);\n  }\n\n  collapsed(): boolean {\n    return this.collapsedInternal;\n  }\n\n  override maybeHandleOnKeyDown(event: KeyboardEvent): boolean {\n    const focusedChildIndex = this.focusedChildIndex();\n    if (focusedChildIndex === -1) {\n      if ((event.key === 'ArrowLeft' && !this.collapsedInternal) ||\n          (event.key === 'ArrowRight' && this.collapsedInternal)) {\n        this.setCollapsed(!this.collapsedInternal);\n        return true;\n      }\n    }\n    return super.maybeHandleOnKeyDown(event);\n  }\n\n  override toMessageElement(): HTMLElement {\n    let element: HTMLElement|null = this.elementInternal || null;\n    if (!element) {\n      element = super.toMessageElement();\n      const iconType = this.collapsedInternal ? 'triangle-right' : 'triangle-down';\n      this.expandGroupIcon = IconButton.Icon.create(iconType, 'expand-group-icon');\n      // Intercept focus to avoid highlight on click.\n      this.contentElement().tabIndex = -1;\n      if (this.repeatCountElement) {\n        this.repeatCountElement.insertBefore(this.expandGroupIcon, this.repeatCountElement.firstChild);\n      } else {\n        this.consoleRowWrapper?.insertBefore(this.expandGroupIcon, this.contentElementInternal);\n      }\n      element.addEventListener('click', () => this.setCollapsed(!this.collapsedInternal));\n    }\n    return element;\n  }\n\n  override showRepeatCountElement(): void {\n    super.showRepeatCountElement();\n    if (this.repeatCountElement && this.expandGroupIcon) {\n      this.repeatCountElement.insertBefore(this.expandGroupIcon, this.repeatCountElement.firstChild);\n    }\n  }\n\n  messagesHidden(): boolean {\n    if (this.collapsed()) {\n      return true;\n    }\n    const parent = this.consoleGroup();\n    return Boolean(parent && parent.messagesHidden());\n  }\n\n  setGroupEnd(viewMessage: ConsoleViewMessage): void {\n    if (viewMessage.consoleMessage().type !== Protocol.Runtime.ConsoleAPICalledEventType.EndGroup) {\n      throw new Error('Invalid console message as group end');\n    }\n    if (this.groupEndMessageInternal !== null) {\n      throw new Error('Console group already has an end');\n    }\n    this.groupEndMessageInternal = viewMessage;\n  }\n\n  groupEnd(): ConsoleViewMessage|null {\n    return this.groupEndMessageInternal;\n  }\n}\n\nexport class ConsoleCommand extends ConsoleViewMessage {\n  private formattedCommand: HTMLElement|null;\n\n  constructor(\n      consoleMessage: SDK.ConsoleModel.ConsoleMessage, linkifier: Components.Linkifier.Linkifier,\n      requestResolver: Logs.RequestResolver.RequestResolver, issueResolver: IssuesManager.IssueResolver.IssueResolver,\n      onResize: (arg0: Common.EventTarget.EventTargetEvent<UI.TreeOutline.TreeElement>) => void) {\n    super(consoleMessage, linkifier, requestResolver, issueResolver, onResize);\n    this.formattedCommand = null;\n  }\n\n  override contentElement(): HTMLElement {\n    const contentElement = this.getContentElement();\n    if (contentElement) {\n      return contentElement;\n    }\n    const newContentElement = document.createElement('div');\n    this.setContentElement(newContentElement);\n    newContentElement.classList.add('console-user-command');\n    const userCommandIcon = new IconButton.Icon.Icon();\n    userCommandIcon.data = {iconName: 'chevron-right', color: 'var(--icon-default)', width: '16px', height: '16px'};\n    userCommandIcon.classList.add('command-result-icon');\n    newContentElement.appendChild(userCommandIcon);\n\n    elementToMessage.set(newContentElement, this);\n    this.formattedCommand = document.createElement('span');\n    this.formattedCommand.classList.add('source-code');\n    this.formattedCommand.textContent = Platform.StringUtilities.replaceControlCharacters(this.text);\n    newContentElement.appendChild(this.formattedCommand);\n\n    if (this.formattedCommand.textContent.length < MaxLengthToIgnoreHighlighter) {\n      void CodeHighlighter.CodeHighlighter.highlightNode(this.formattedCommand, 'text/javascript')\n          .then(this.updateSearch.bind(this));\n    } else {\n      this.updateSearch();\n    }\n\n    this.updateTimestamp();\n    return newContentElement;\n  }\n\n  private updateSearch(): void {\n    this.setSearchRegex(this.searchRegex());\n  }\n}\n\nexport class ConsoleCommandResult extends ConsoleViewMessage {\n  override contentElement(): HTMLElement {\n    const element = super.contentElement();\n    if (!element.classList.contains('console-user-command-result')) {\n      element.classList.add('console-user-command-result');\n      if (this.consoleMessage().level === Protocol.Log.LogEntryLevel.Info) {\n        const icon = new IconButton.Icon.Icon();\n        icon.data = {iconName: 'chevron-left-dot', color: 'var(--icon-default)', width: '16px', height: '16px'};\n        icon.classList.add('command-result-icon');\n        element.insertBefore(icon, element.firstChild);\n      }\n    }\n    return element;\n  }\n}\n\nexport class ConsoleTableMessageView extends ConsoleViewMessage {\n  private dataGrid: DataGrid.SortableDataGrid.SortableDataGrid<unknown>|null;\n\n  constructor(\n      consoleMessage: SDK.ConsoleModel.ConsoleMessage, linkifier: Components.Linkifier.Linkifier,\n      requestResolver: Logs.RequestResolver.RequestResolver, issueResolver: IssuesManager.IssueResolver.IssueResolver,\n      onResize: (arg0: Common.EventTarget.EventTargetEvent<UI.TreeOutline.TreeElement>) => void) {\n    super(consoleMessage, linkifier, requestResolver, issueResolver, onResize);\n    console.assert(consoleMessage.type === Protocol.Runtime.ConsoleAPICalledEventType.Table);\n    this.dataGrid = null;\n  }\n\n  override wasShown(): void {\n    if (this.dataGrid) {\n      this.dataGrid.updateWidths();\n    }\n    super.wasShown();\n  }\n\n  override onResize(): void {\n    if (!this.isVisible()) {\n      return;\n    }\n    if (this.dataGrid) {\n      this.dataGrid.onResize();\n    }\n  }\n\n  override contentElement(): HTMLElement {\n    const contentElement = this.getContentElement();\n    if (contentElement) {\n      return contentElement;\n    }\n\n    const newContentElement = document.createElement('div');\n    newContentElement.classList.add('console-message');\n    if (this.messageIcon) {\n      newContentElement.appendChild(this.messageIcon);\n    }\n    this.setContentElement(newContentElement);\n\n    newContentElement.appendChild(this.buildTableMessage());\n    this.updateTimestamp();\n    return newContentElement;\n  }\n\n  private buildTableMessage(): HTMLElement {\n    const formattedMessage = document.createElement('span');\n    formattedMessage.classList.add('source-code');\n    this.anchorElement = this.buildMessageAnchor();\n    if (this.anchorElement) {\n      formattedMessage.appendChild(this.anchorElement);\n    }\n\n    const table = this.message.parameters && this.message.parameters.length ? this.message.parameters[0] : null;\n    if (!table) {\n      return this.buildMessage();\n    }\n    const actualTable = parameterToRemoteObject(this.message.runtimeModel())(table);\n    if (!actualTable || !actualTable.preview) {\n      return this.buildMessage();\n    }\n\n    const rawValueColumnSymbol = Symbol('rawValueColumn');\n    const columnNames: (string|symbol)[] = [];\n    const preview = actualTable.preview;\n    const rows = [];\n    for (let i = 0; i < preview.properties.length; ++i) {\n      const rowProperty = preview.properties[i];\n      let rowSubProperties: Protocol.Runtime.PropertyPreview[];\n      if (rowProperty.valuePreview && rowProperty.valuePreview.properties.length) {\n        rowSubProperties = rowProperty.valuePreview.properties;\n      } else if (rowProperty.value || rowProperty.value === '') {\n        rowSubProperties =\n            [{name: rawValueColumnSymbol as unknown as string, type: rowProperty.type, value: rowProperty.value}];\n      } else {\n        continue;\n      }\n\n      const rowValue = new Map<string|symbol, HTMLElement>();\n      const maxColumnsToRender = 20;\n      for (let j = 0; j < rowSubProperties.length; ++j) {\n        const cellProperty = rowSubProperties[j];\n        let columnRendered: true|boolean = columnNames.indexOf(cellProperty.name) !== -1;\n        if (!columnRendered) {\n          if (columnNames.length === maxColumnsToRender) {\n            continue;\n          }\n          columnRendered = true;\n          columnNames.push(cellProperty.name);\n        }\n\n        if (columnRendered) {\n          const cellElement =\n              this.renderPropertyPreviewOrAccessor(actualTable, cellProperty, [rowProperty, cellProperty]);\n          cellElement.classList.add('console-message-nowrap-below');\n          rowValue.set(cellProperty.name, cellElement);\n        }\n      }\n      rows.push({rowName: rowProperty.name, rowValue});\n    }\n\n    const flatValues = [];\n    for (const {rowName, rowValue} of rows) {\n      flatValues.push(rowName);\n      for (let j = 0; j < columnNames.length; ++j) {\n        flatValues.push(rowValue.get(columnNames[j]));\n      }\n    }\n    columnNames.unshift(i18nString(UIStrings.index));\n    const columnDisplayNames =\n        columnNames.map(name => name === rawValueColumnSymbol ? i18nString(UIStrings.value) : name.toString());\n\n    if (flatValues.length) {\n      this.dataGrid = DataGrid.SortableDataGrid.SortableDataGrid.create(\n          columnDisplayNames, flatValues, i18nString(UIStrings.console));\n      if (this.dataGrid) {\n        this.dataGrid.setStriped(true);\n        this.dataGrid.setFocusable(false);\n\n        const formattedResult = document.createElement('span');\n        formattedResult.classList.add('console-message-text');\n        const tableElement = formattedResult.createChild('div', 'console-message-formatted-table');\n        const dataGridContainer = tableElement.createChild('span');\n        tableElement.appendChild(this.formatParameter(actualTable, true, false));\n        const shadowRoot = dataGridContainer.attachShadow({mode: 'open'});\n        const dataGridWidget = this.dataGrid.asWidget();\n        dataGridWidget.markAsRoot();\n        dataGridWidget.show(shadowRoot as unknown as Element);\n        dataGridWidget.registerCSSFiles([consoleViewStyles, objectValueStyles]);\n        formattedMessage.appendChild(formattedResult);\n        this.dataGrid.renderInline();\n      }\n    }\n    return formattedMessage;\n  }\n\n  override approximateFastHeight(): number {\n    const table = this.message.parameters && this.message.parameters[0];\n    if (table && typeof table !== 'string' && table.preview) {\n      return defaultConsoleRowHeight * table.preview.properties.length;\n    }\n    return defaultConsoleRowHeight;\n  }\n}\n\n/**\n * The maximum length before strings are considered too long for syntax highlighting.\n * @const\n */\nconst MaxLengthToIgnoreHighlighter: number = 10000;\n\n/**\n * @const\n */\nexport const MaxLengthForLinks: number = 40;\n\nlet maxTokenizableStringLength = 10000;\nlet longStringVisibleLength = 5000;\n\nexport const getMaxTokenizableStringLength = (): number => {\n  return maxTokenizableStringLength;\n};\n\nexport const setMaxTokenizableStringLength = (length: number): void => {\n  maxTokenizableStringLength = length;\n};\n\nexport const getLongStringVisibleLength = (): number => {\n  return longStringVisibleLength;\n};\n\nexport const setLongStringVisibleLength = (length: number): void => {\n  longStringVisibleLength = length;\n};\n"]}