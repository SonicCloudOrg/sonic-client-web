{"version":3,"file":"RuleSetGrid.js","sourceRoot":"","sources":["../../../../../../../../front_end/panels/application/preloading/components/RuleSetGrid.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../../core/platform/platform.js';\nimport {assertNotNullOrUndefined} from '../../../../core/platform/platform.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as Protocol from '../../../../generated/protocol.js';\nimport * as DataGrid from '../../../../ui/components/data_grid/data_grid.js';\nimport * as IconButton from '../../../../ui/components/icon_button/icon_button.js';\nimport * as LegacyWrapper from '../../../../ui/components/legacy_wrapper/legacy_wrapper.js';\nimport type * as UI from '../../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../../ui/visual_logging/visual_logging.js';\nimport * as NetworkForward from '../../../network/forward/forward.js';\nimport * as PreloadingHelper from '../helper/helper.js';\n\nimport * as PreloadingString from './PreloadingString.js';\nimport ruleSetGridStyles from './ruleSetGrid.css.js';\n\nconst UIStrings = {\n  /**\n   *@description Column header: Short URL of rule set.\n   */\n  ruleSet: 'Rule set',\n  /**\n   *@description Column header: Show how many preloads are associated if valid, error counts if invalid.\n   */\n  status: 'Status',\n  /**\n   *@description button: Title of button to reveal the corresponding request of rule set in Elements panel\n   */\n  buttonClickToRevealInElementsPanel: 'Click to reveal in Elements panel',\n  /**\n   *@description button: Title of button to reveal the corresponding request of rule set in Network panel\n   */\n  buttonClickToRevealInNetworkPanel: 'Click to reveal in Network panel',\n  /**\n   *@description Value of status, specifying rule set contains how many errors.\n   */\n  errors: '{errorCount, plural, =1 {# error} other {# errors}}',\n  /**\n   *@description button: Title of button to reveal preloading attempts with filter by selected rule set\n   */\n  buttonRevealPreloadsAssociatedWithRuleSet: 'Reveal speculative loads associated with this rule set',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/application/preloading/components/RuleSetGrid.ts', UIStrings);\nexport const i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface RuleSetGridData {\n  rows: RuleSetGridRow[];\n  pageURL: Platform.DevToolsPath.UrlString;\n}\n\nexport interface RuleSetGridRow {\n  ruleSet: Protocol.Preload.RuleSet;\n  preloadsStatusSummary: string;\n}\n\n// Grid component to show SpeculationRules rule sets.\nexport class RuleSetGrid extends LegacyWrapper.LegacyWrapper.WrappableComponent<UI.Widget.VBox> {\n  static readonly litTagName = LitHtml.literal`devtools-resources-ruleset-grid`;\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #data: RuleSetGridData|null = null;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [ruleSetGridStyles];\n    this.#render();\n  }\n\n  update(data: RuleSetGridData): void {\n    this.#data = data;\n    this.#render();\n  }\n\n  #render(): void {\n    if (this.#data === null) {\n      return;\n    }\n\n    const reportsGridData: DataGrid.DataGridController.DataGridControllerData = {\n      columns: [\n        {\n          id: 'rule-set',\n          title: i18nString(UIStrings.ruleSet),\n          widthWeighting: 20,\n          hideable: false,\n          visible: true,\n          sortable: true,\n        },\n        {\n          id: 'status',\n          title: i18nString(UIStrings.status),\n          widthWeighting: 80,\n          hideable: false,\n          visible: true,\n          sortable: true,\n        },\n      ],\n      rows: this.#buildReportRows(),\n      striped: true,\n    };\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    LitHtml.render(LitHtml.html`\n      <div class=\"ruleset-container\"\n      jslog=${VisualLogging.pane('preloading-rules')}>\n        <${DataGrid.DataGridController.DataGridController.litTagName} .data=${\n            reportsGridData as DataGrid.DataGridController.DataGridControllerData}>\n        </${DataGrid.DataGridController.DataGridController.litTagName}>\n      </div>\n    `, this.#shadow, {host: this});\n    // clang-format on\n  }\n\n  #buildReportRows(): DataGrid.DataGridUtils.Row[] {\n    assertNotNullOrUndefined(this.#data);\n\n    const pageURL = this.#data.pageURL;\n    return this.#data.rows.map(\n        row => ({\n          cells: [\n            {columnId: 'id', value: row.ruleSet.id},\n            {\n              columnId: 'rule-set',\n              value: '',\n              renderer: () => ruleSetRenderer(row.ruleSet, pageURL),\n            },\n            {\n              columnId: 'status',\n              value: row.preloadsStatusSummary,\n              renderer: preloadsStatusSummary => statusRenderer(preloadsStatusSummary as string, row.ruleSet),\n            },\n          ],\n        }));\n  }\n}\n\ncustomElements.define('devtools-resources-ruleset-grid', RuleSetGrid);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-resources-ruleset-grid': RuleSetGrid;\n  }\n}\n\nfunction ruleSetRenderer(\n    ruleSet: Protocol.Preload.RuleSet, pageURL: Platform.DevToolsPath.UrlString): LitHtml.TemplateResult {\n  function ruleSetRendererInnerDocument(ruleSet: Protocol.Preload.RuleSet, location: string): LitHtml.TemplateResult {\n    assertNotNullOrUndefined(ruleSet.backendNodeId);\n\n    const revealSpeculationRulesInElements = async(): Promise<void> => {\n      assertNotNullOrUndefined(ruleSet.backendNodeId);\n\n      const target = SDK.TargetManager.TargetManager.instance().scopeTarget();\n      if (target === null) {\n        return;\n      }\n\n      await Common.Revealer.reveal(new SDK.DOMModel.DeferredDOMNode(target, ruleSet.backendNodeId));\n    };\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return LitHtml.html`\n      <button class=\"link\" role=\"link\"\n        @click=${revealSpeculationRulesInElements}\n        title=${i18nString(UIStrings.buttonClickToRevealInElementsPanel)}\n        style=${LitHtml.Directives.styleMap({\n          border: 'none',\n          background: 'none',\n          color: 'var(--icon-link)',\n          cursor: 'pointer',\n          'text-decoration': 'underline',\n          'padding-inline-start': '0',\n          'padding-inline-end': '0',\n        })}\n        jslog=${VisualLogging.action('reveal-in-elements').track({click: true})}\n      >\n        <${IconButton.Icon.Icon.litTagName}\n          .data=${{\n            iconName: 'code-circle',\n            color: 'var(--icon-link)',\n            width: '16px',\n            height: '16px',\n          } as IconButton.Icon.IconData}\n          style=${LitHtml.Directives.styleMap({\n            'vertical-align': 'sub',\n          })}\n        >\n        </${IconButton.Icon.Icon.litTagName}>\n        ${location}\n      </button>\n    `;\n    // clang-format on\n  }\n\n  function ruleSetRendererOutOfDocument(ruleSet: Protocol.Preload.RuleSet, location: string): LitHtml.TemplateResult {\n    assertNotNullOrUndefined(ruleSet.url);\n    assertNotNullOrUndefined(ruleSet.requestId);\n\n    const revealSpeculationRulesInNetwork = async(): Promise<void> => {\n      assertNotNullOrUndefined(ruleSet.requestId);\n      const request = SDK.TargetManager.TargetManager.instance()\n                          .scopeTarget()\n                          ?.model(SDK.NetworkManager.NetworkManager)\n                          ?.requestForId(ruleSet.requestId) ||\n          null;\n      if (request === null) {\n        return;\n      }\n\n      const requestLocation = NetworkForward.UIRequestLocation.UIRequestLocation.tab(\n          request, NetworkForward.UIRequestLocation.UIRequestTabs.Preview, {clearFilter: false});\n      await Common.Revealer.reveal(requestLocation);\n    };\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return LitHtml.html`\n      <button class=\"link\" role=\"link\"\n        @click=${revealSpeculationRulesInNetwork}\n        title=${i18nString(UIStrings.buttonClickToRevealInNetworkPanel)}\n        style=${LitHtml.Directives.styleMap({\n          border: 'none',\n          background: 'none',\n          color: 'var(--icon-link)',\n          cursor: 'pointer',\n          'text-decoration': 'underline',\n          'padding-inline-start': '0',\n          'padding-inline-end': '0',\n        })}\n      >\n        <${IconButton.Icon.Icon.litTagName}\n         .data=${{\n            iconName: 'arrow-up-down-circle',\n            color: 'var(--icon-link)',\n            width: '16px',\n            height: '16px',\n          } as IconButton.Icon.IconData}\n          style=${LitHtml.Directives.styleMap({\n            'vertical-align': 'sub',\n          })}\n        >\n        </${IconButton.Icon.Icon.litTagName}>\n        ${location}\n      </button>\n    `;\n    // clang-format on\n  }\n\n  const location = PreloadingString.ruleSetLocationShort(ruleSet, pageURL);\n\n  if (ruleSet.backendNodeId !== undefined) {\n    return ruleSetRendererInnerDocument(ruleSet, location);\n  }\n\n  if (ruleSet.url !== undefined && ruleSet.requestId) {\n    return ruleSetRendererOutOfDocument(ruleSet, location);\n  }\n\n  return LitHtml.html`${location}`;\n}\n\nfunction statusRenderer(preloadsStatusSummary: string, ruleSet: Protocol.Preload.RuleSet): LitHtml.TemplateResult {\n  function counts(preloadsStatusSummary: string, ruleSet: Protocol.Preload.RuleSet): LitHtml.TemplateResult {\n    const revealAttemptViewWithFilter = async(): Promise<void> => {\n      await Common.Revealer.reveal(new PreloadingHelper.PreloadingForward.AttemptViewWithFilter(ruleSet.id));\n    };\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return LitHtml.html`\n      <button class=\"link\" role=\"link\"\n        @click=${revealAttemptViewWithFilter}\n        title=${i18nString(UIStrings.buttonRevealPreloadsAssociatedWithRuleSet)}\n        style=${LitHtml.Directives.styleMap({\n          color: 'var(--sys-color-primary)',\n          'text-decoration': 'underline',\n          cursor: 'pointer',\n          border: 'none',\n          background: 'none',\n          'padding-inline-start': '0',\n          'padding-inline-end': '0',\n        })}\n        jslog=${VisualLogging.action('reveal-preloads').track({click: true})}>\n        ${preloadsStatusSummary}\n      </button>\n    `;\n    // clang-format on\n  }\n\n  function errors(): LitHtml.TemplateResult {\n    const nErrors = i18nString(UIStrings.errors, {errorCount: 1});\n    return LitHtml.html`\n      <span\n        style=${LitHtml.Directives.styleMap({\n      color: 'var(--sys-color-error)',\n    })}\n      >\n        ${nErrors}\n      </span>\n    `;\n  }\n\n  switch (ruleSet.errorType) {\n    case undefined:\n      return counts(preloadsStatusSummary, ruleSet);\n    case Protocol.Preload.RuleSetErrorType.SourceIsNotJsonObject:\n      return errors();\n    case Protocol.Preload.RuleSetErrorType.InvalidRulesSkipped:\n      return LitHtml.html`${errors()} ${counts(preloadsStatusSummary, ruleSet)}`;\n  }\n}\n"]}