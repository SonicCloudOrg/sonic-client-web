{"version":3,"file":"TimelineFlameChartNetworkDataProvider.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelineFlameChartNetworkDataProvider.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TraceEngine from '../../models/trace/trace.js';\nimport * as PerfUI from '../../ui/legacy/components/perf_ui/perf_ui.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as ThemeSupport from '../../ui/legacy/theme_support/theme_support.js';\n\nimport {NetworkTrackAppender} from './NetworkTrackAppender.js';\nimport timelineFlamechartPopoverStyles from './timelineFlamechartPopover.css.js';\nimport {FlameChartStyle, Selection} from './TimelineFlameChartView.js';\nimport {TimelineSelection} from './TimelineSelection.js';\n\nexport class TimelineFlameChartNetworkDataProvider implements PerfUI.FlameChart.FlameChartDataProvider {\n  #minimumBoundaryInternal: number;\n  #timeSpan: number;\n  #events: TraceEngine.Types.TraceEvents.SyntheticNetworkRequest[];\n  #maxLevel: number;\n  #networkTrackAppender: NetworkTrackAppender|null;\n\n  #timelineDataInternal?: PerfUI.FlameChart.FlameChartTimelineData|null;\n  #lastSelection?: Selection;\n  #traceEngineData: TraceEngine.Handlers.Types.TraceParseData|null;\n  #eventIndexByEvent: Map<TraceEngine.Types.TraceEvents.SyntheticNetworkRequest, number|null> = new Map();\n  constructor() {\n    this.#minimumBoundaryInternal = 0;\n    this.#timeSpan = 0;\n    this.#events = [];\n    this.#maxLevel = 0;\n\n    this.#networkTrackAppender = null;\n    this.#traceEngineData = null;\n  }\n\n  setModel(traceEngineData: TraceEngine.Handlers.Types.TraceParseData|null): void {\n    this.#timelineDataInternal = null;\n    this.#traceEngineData = traceEngineData;\n    this.#events = traceEngineData?.NetworkRequests.byTime || [];\n    this.#eventIndexByEvent.clear();\n\n    if (this.#traceEngineData) {\n      this.#setTimingBoundsData(this.#traceEngineData);\n    }\n  }\n\n  isEmpty(): boolean {\n    this.timelineData();\n    return !this.#events.length;\n  }\n\n  maxStackDepth(): number {\n    return this.#maxLevel;\n  }\n\n  hasTrackConfigurationMode(): boolean {\n    return false;\n  }\n\n  timelineData(): PerfUI.FlameChart.FlameChartTimelineData {\n    if (this.#timelineDataInternal && this.#timelineDataInternal.entryLevels.length !== 0) {\n      // The flame chart data is built already, so return the cached data.\n      return this.#timelineDataInternal;\n    }\n\n    this.#timelineDataInternal = PerfUI.FlameChart.FlameChartTimelineData.createEmpty();\n    if (!this.#traceEngineData) {\n      return this.#timelineDataInternal;\n    }\n\n    this.#events = this.#traceEngineData.NetworkRequests.byTime;\n    this.#networkTrackAppender = new NetworkTrackAppender(this.#traceEngineData, this.#timelineDataInternal);\n    this.#maxLevel = this.#networkTrackAppender.appendTrackAtLevel(0);\n    return this.#timelineDataInternal;\n  }\n\n  minimumBoundary(): number {\n    return this.#minimumBoundaryInternal;\n  }\n\n  totalTime(): number {\n    return this.#timeSpan;\n  }\n\n  setWindowTimes(startTime: number, endTime: number): void {\n    this.#updateTimelineData(startTime, endTime);\n  }\n\n  createSelection(index: number): TimelineSelection|null {\n    if (index === -1) {\n      return null;\n    }\n    const event = this.#events[index];\n    this.#lastSelection = new Selection(TimelineSelection.fromTraceEvent(event), index);\n    return this.#lastSelection.timelineSelection;\n  }\n\n  indexForEvent(event: TraceEngine.Types.TraceEvents.TraceEventData|\n                TraceEngine.Handlers.ModelHandlers.Frames.TimelineFrame): number|null {\n    // In the NetworkDataProvider we will never be dealing with frames, but we need to satisfy the interface for a DataProvider.\n    if (event instanceof TraceEngine.Handlers.ModelHandlers.Frames.TimelineFrame) {\n      return null;\n    }\n    if (!TraceEngine.Types.TraceEvents.isSyntheticNetworkRequestDetailsEvent(event)) {\n      return null;\n    }\n    const fromCache = this.#eventIndexByEvent.get(event);\n    // Cached value might be null, which is OK.\n    if (fromCache !== undefined) {\n      return fromCache;\n    }\n    const index = this.#events.indexOf(event);\n    const result = index > -1 ? index : null;\n    this.#eventIndexByEvent.set(event, result);\n    return result;\n  }\n\n  eventByIndex(entryIndex: number): TraceEngine.Types.TraceEvents.SyntheticNetworkRequest|null {\n    return this.#events.at(entryIndex) ?? null;\n  }\n\n  entryIndexForSelection(selection: TimelineSelection|null): number {\n    if (!selection) {\n      return -1;\n    }\n\n    if (this.#lastSelection && this.#lastSelection.timelineSelection.object === selection.object) {\n      return this.#lastSelection.entryIndex;\n    }\n\n    if (!TimelineSelection.isSyntheticNetworkRequestDetailsEventSelection(selection.object)) {\n      return -1;\n    }\n\n    const index = this.#events.indexOf(selection.object);\n    if (index !== -1) {\n      this.#lastSelection = new Selection(TimelineSelection.fromTraceEvent(selection.object), index);\n    }\n    return index;\n  }\n\n  entryColor(index: number): string {\n    if (!this.#networkTrackAppender) {\n      throw new Error('networkTrackAppender should not be empty');\n    }\n    return this.#networkTrackAppender.colorForEvent(this.#events[index]);\n  }\n\n  textColor(_index: number): string {\n    return FlameChartStyle.textColor;\n  }\n\n  entryTitle(index: number): string|null {\n    const event = this.#events[index];\n    const parsedURL = new Common.ParsedURL.ParsedURL(event.args.data.url);\n    return parsedURL.isValid ? `${parsedURL.displayName} (${parsedURL.host})` : event.args.data.url || null;\n  }\n\n  entryFont(_index: number): string|null {\n    return this.#networkTrackAppender?.font() || null;\n  }\n\n  /**\n   * Returns the pixels needed to decorate the event.\n   * The pixels compare to the start of the earliest event of the request.\n   *\n   * Request.beginTime(), which is used in FlameChart to calculate the unclippedBarX\n   * v\n   *    |----------------[ (URL text)    waiting time   |   request  ]--------|\n   *    ^start           ^sendStart                     ^headersEnd  ^Finish  ^end\n   * @param request\n   * @param unclippedBarX The start pixel of the request. It is calculated with request.beginTime() in FlameChart.\n   * @param timeToPixelRatio\n   * @returns the pixels to draw waiting time and left and right whiskers and url text\n   */\n  getDecorationPixels(\n      event: TraceEngine.Types.TraceEvents.SyntheticNetworkRequest, unclippedBarX: number,\n      timeToPixelRatio: number): {sendStart: number, headersEnd: number, finish: number, start: number, end: number} {\n    const beginTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.ts);\n    const timeToPixel = (time: number): number => Math.floor(unclippedBarX + (time - beginTime) * timeToPixelRatio);\n    const minBarWidthPx = 2;\n    const startTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.ts);\n    const endTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(\n        (event.ts + event.dur) as TraceEngine.Types.Timing.MicroSeconds);\n    const sendStartTime =\n        TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.args.data.syntheticData.sendStartTime);\n    const headersEndTime =\n        TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.args.data.syntheticData.downloadStart);\n    const sendStart = Math.max(timeToPixel(sendStartTime), unclippedBarX);\n    const headersEnd = Math.max(timeToPixel(headersEndTime), sendStart);\n    const finish = Math.max(\n        timeToPixel(TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.args.data.syntheticData.finishTime)),\n        headersEnd + minBarWidthPx);\n    const start = timeToPixel(startTime);\n    const end = Math.max(timeToPixel(endTime), finish);\n\n    return {sendStart, headersEnd, finish, start, end};\n  }\n\n  /**\n   * Decorates the entry:\n   *   Draw a waiting time between |sendStart| and |headersEnd|\n   *     By adding a extra transparent white layer\n   *   Draw a whisk between |start| and |sendStart|\n   *   Draw a whisk between |finish| and |end|\n   *     By draw another layer of background color to \"clear\" the area\n   *     Then draw the whisk\n   *   Draw the URL after the |sendStart|\n   *\n   *   |----------------[ (URL text)    waiting time   |   request  ]--------|\n   *   ^start           ^sendStart                     ^headersEnd  ^Finish  ^end\n   * @param index\n   * @param context\n   * @param barX The x pixel of the visible part request\n   * @param barY The y pixel of the visible part request\n   * @param barWidth The width of the visible part request\n   * @param barHeight The height of the visible part request\n   * @param unclippedBarX The start pixel of the request compare to the visible area. It is calculated with request.beginTime() in FlameChart.\n   * @param timeToPixelRatio\n   * @returns if the entry needs to be decorate, which is alway true if the request has \"timing\" field\n   */\n  decorateEntry(\n      index: number, context: CanvasRenderingContext2D, _text: string|null, barX: number, barY: number,\n      barWidth: number, barHeight: number, unclippedBarX: number, timeToPixelRatio: number): boolean {\n    const event = this.#events[index];\n\n    const {sendStart, headersEnd, finish, start, end} =\n        this.getDecorationPixels(event, unclippedBarX, timeToPixelRatio);\n\n    // Draw waiting time.\n    context.fillStyle = 'hsla(0, 100%, 100%, 0.8)';\n    context.fillRect(sendStart + 0.5, barY + 0.5, headersEnd - sendStart - 0.5, barHeight - 2);\n    // Clear portions of initial rect to prepare for the ticks.\n    context.fillStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--sys-color-cdt-base-container');\n    context.fillRect(barX, barY - 0.5, sendStart - barX, barHeight);\n    context.fillRect(finish, barY - 0.5, barX + barWidth - finish, barHeight);\n\n    // Draws left and right whiskers\n    function drawTick(begin: number, end: number, y: number): void {\n      const /** @const */ tickHeightPx = 6;\n      context.moveTo(begin, y - tickHeightPx / 2);\n      context.lineTo(begin, y + tickHeightPx / 2);\n      context.moveTo(begin, y);\n      context.lineTo(end, y);\n    }\n\n    context.beginPath();\n    context.lineWidth = 1;\n    context.strokeStyle = '#ccc';\n    const lineY = Math.floor(barY + barHeight / 2) + 0.5;\n    const leftTick = start + 0.5;\n    const rightTick = end - 0.5;\n    drawTick(leftTick, sendStart, lineY);\n    drawTick(rightTick, finish, lineY);\n    context.stroke();\n\n    const color = this.#colorForPriority(event.args.data.priority);\n    if (color) {\n      context.fillStyle = color;\n      context.fillRect(sendStart + 0.5, barY + 0.5, 3.5, 3.5);\n    }\n\n    // Draw request URL as text\n    const textStart = Math.max(sendStart, 0);\n    const textWidth = finish - textStart;\n    const /** @const */ minTextWidthPx = 20;\n    if (textWidth >= minTextWidthPx) {\n      let title = this.entryTitle(index) || '';\n      if (event.args.data.fromServiceWorker) {\n        title = '⚙ ' + title;\n      }\n      if (title) {\n        const /** @const */ textPadding = 4;\n        const /** @const */ textBaseline = 5;\n        const textBaseHeight = barHeight - textBaseline;\n        const trimmedText = UI.UIUtils.trimTextEnd(context, title, textWidth - 2 * textPadding);\n        context.fillStyle = '#333';\n        context.fillText(trimmedText, textStart + textPadding, barY + textBaseHeight);\n      }\n    }\n\n    return true;\n  }\n\n  forceDecoration(_index: number): boolean {\n    return true;\n  }\n\n  prepareHighlightedEntryInfo(index: number): Element|null {\n    const /** @const */ maxURLChars = 80;\n    const event = this.#events[index];\n    const element = document.createElement('div');\n    const root = UI.UIUtils.createShadowRootWithCoreStyles(element, {\n      cssFile: [timelineFlamechartPopoverStyles],\n      delegatesFocus: undefined,\n    });\n    const contents = root.createChild('div', 'timeline-flamechart-popover');\n    const startTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.ts);\n    const duration = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.dur);\n    if (startTime && isFinite(duration)) {\n      contents.createChild('span', 'timeline-info-network-time').textContent =\n          i18n.TimeUtilities.millisToString(duration, true);\n    }\n    const div = (contents.createChild('span') as HTMLElement);\n    div.textContent = PerfUI.NetworkPriorities.uiLabelForNetworkPriority((event.args.data.priority));\n    div.style.color = this.#colorForPriority(event.args.data.priority) || 'black';\n    contents.createChild('span').textContent = Platform.StringUtilities.trimMiddle(event.args.data.url, maxURLChars);\n    return element;\n  }\n\n  #colorForPriority(priority: Protocol.Network.ResourcePriority): string|null {\n    const value = PerfUI.NetworkPriorities.networkPriorityWeight(priority);\n    return value ? `hsla(214, 80%, 50%, ${value / 5})` : null;\n  }\n\n  /**\n   * Sets the minimum time and total time span of a trace using the\n   * new engine data.\n   */\n  #setTimingBoundsData(newTraceEngineData: TraceEngine.Handlers.Types.TraceParseData): void {\n    const {traceBounds} = newTraceEngineData.Meta;\n    const minTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(traceBounds.min);\n    const maxTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(traceBounds.max);\n    this.#minimumBoundaryInternal = minTime;\n    this.#timeSpan = minTime === maxTime ? 1000 : maxTime - this.#minimumBoundaryInternal;\n  }\n\n  /**\n   * When users zoom in the flamechart, we only want to show them the network\n   * requests between startTime and endTime. This function will call the\n   * trackAppender to update the timeline data, and then force to create a new\n   * PerfUI.FlameChart.FlameChartTimelineData instance to force the flamechart\n   * to re-render.\n   */\n  #updateTimelineData(startTime: number, endTime: number): void {\n    if (!this.#networkTrackAppender || !this.#timelineDataInternal) {\n      return;\n    }\n    this.#maxLevel = this.#networkTrackAppender.filterTimelineDataBetweenTimes(\n        TraceEngine.Types.Timing.MilliSeconds(startTime), TraceEngine.Types.Timing.MilliSeconds(endTime));\n\n    // TODO(crbug.com/1459225): Remove this recreating code.\n    // Force to create a new PerfUI.FlameChart.FlameChartTimelineData instance\n    // to force the flamechart to re-render. This also causes crbug.com/1459225.\n    this.#timelineDataInternal = PerfUI.FlameChart.FlameChartTimelineData.create({\n      entryLevels: this.#timelineDataInternal?.entryLevels,\n      entryTotalTimes: this.#timelineDataInternal?.entryTotalTimes,\n      entryStartTimes: this.#timelineDataInternal?.entryStartTimes,\n      groups: this.#timelineDataInternal?.groups,\n    });\n  }\n\n  preferredHeight(): number {\n    if (!this.#networkTrackAppender || this.#maxLevel === 0) {\n      return 0;\n    }\n    const group = this.#networkTrackAppender.group();\n    if (!group) {\n      return 0;\n    }\n    return group.style.height * (this.isExpanded() ? Platform.NumberUtilities.clamp(this.#maxLevel + 1, 4, 8.5) : 1);\n  }\n\n  isExpanded(): boolean {\n    return Boolean(this.#networkTrackAppender?.group()?.expanded);\n  }\n\n  formatValue(value: number, precision?: number): string {\n    return i18n.TimeUtilities.preciseMillisToString(value, precision);\n  }\n\n  canJumpToEntry(_entryIndex: number): boolean {\n    return false;\n  }\n\n  /**\n   * Returns a map of navigations that happened in the main frame, ignoring any\n   * that happened in other frames.\n   * The map's key is the frame ID.\n   **/\n  mainFrameNavigationStartEvents(): readonly TraceEngine.Types.TraceEvents.TraceEventNavigationStart[] {\n    if (!this.#traceEngineData) {\n      return [];\n    }\n    return this.#traceEngineData.Meta.mainFrameNavigations;\n  }\n}\n"]}