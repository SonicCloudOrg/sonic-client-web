{"version":3,"file":"TimelineTreeView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelineTreeView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as TimelineModel from '../../models/timeline_model/timeline_model.js';\nimport * as TraceEngine from '../../models/trace/trace.js';\nimport * as DataGrid from '../../ui/legacy/components/data_grid/data_grid.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {ActiveFilters} from './ActiveFilters.js';\nimport {getCategoryStyles, stringIsEventCategory} from './EventUICategory.js';\nimport * as Extensions from './extensions/extensions.js';\nimport {Tracker} from './FreshRecording.js';\nimport {targetForEvent} from './TargetForEvent.js';\nimport {TimelineRegExp} from './TimelineFilters.js';\nimport {type TimelineSelection} from './TimelineSelection.js';\nimport {TimelineUIUtils} from './TimelineUIUtils.js';\n\nconst UIStrings = {\n  /**\n   *@description Text for the performance of something\n   */\n  performance: 'Performance',\n  /**\n   *@description Time of a single activity, as opposed to the total time\n   */\n  selfTime: 'Self Time',\n  /**\n   *@description Text for the total time of something\n   */\n  totalTime: 'Total Time',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  activity: 'Activity',\n  /**\n   *@description Text of a DOM element in Timeline Tree View of the Performance panel\n   */\n  selectItemForDetails: 'Select item for details.',\n  /**\n   *@description Time in miliseconds\n   *@example {30.1} PH1\n   */\n  fms: '{PH1} ms',\n  /**\n   *@description Number followed by percent sign\n   *@example {20} PH1\n   */\n  percentPlaceholder: '{PH1} %',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  chromeExtensionsOverhead: '[`Chrome` extensions overhead]',\n  /**\n   * @description Text in Timeline Tree View of the Performance panel. The text is presented\n   * when developers investigate the performance of a page. 'V8 Runtime' labels the time\n   * spent in (i.e. runtime) the V8 JavaScript engine.\n   */\n  vRuntime: '[`V8` Runtime]',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  unattributed: '[unattributed]',\n  /**\n   *@description Text that refers to one or a group of webpages\n   */\n  page: 'Page',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  noGrouping: 'No Grouping',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  groupByActivity: 'Group by Activity',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  groupByCategory: 'Group by Category',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  groupByDomain: 'Group by Domain',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  groupByFrame: 'Group by Frame',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  groupBySubdomain: 'Group by Subdomain',\n  /**\n   *@description Text in Timeline Tree View of the Performance panel\n   */\n  groupByUrl: 'Group by URL',\n  /**\n   *@description Aria-label for grouping combo box in Timeline Details View\n   */\n  groupBy: 'Group by',\n  /**\n   * @description Title of the sidebar pane in the Performance panel which shows the stack (call\n   * stack) where the program spent the most time (out of all the call stacks) while executing.\n   */\n  heaviestStack: 'Heaviest stack',\n  /**\n   * @description Tooltip for the the Heaviest stack sidebar toggle in the Timeline Tree View of the\n   * Performance panel. Command to open/show the sidebar.\n   */\n  showHeaviestStack: 'Show Heaviest stack',\n  /**\n   * @description Tooltip for the the Heaviest stack sidebar toggle in the Timeline Tree View of the\n   * Performance panel. Command to close/hide the sidebar.\n   */\n  hideHeaviestStack: 'Hide Heaviest stack',\n  /**\n   * @description Screen reader announcement when the heaviest stack sidebar is shown in the Performance panel.\n   */\n  heaviestStackShown: 'Heaviest stack sidebar shown',\n  /**\n   * @description Screen reader announcement when the heaviest stack sidebar is hidden in the Performance panel.\n   */\n  heaviestStackHidden: 'Heaviest stack sidebar hidden',\n  /**\n   *@description Data grid name for Timeline Stack data grids\n   */\n  timelineStack: 'Timeline Stack',\n  /**\n  /*@description Text to search by matching case of the input button\n   */\n  matchCase: 'Match Case',\n  /**\n   *@description Text for searching with regular expression button\n   */\n  useRegularExpression: 'Use Regular Expression',\n  /**\n   * @description Text for Match whole word button\n   */\n  matchWholeWord: 'Match whole word',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/TimelineTreeView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class TimelineTreeView extends UI.Widget.VBox implements UI.SearchableView.Searchable {\n  #selectedEvents: TraceEngine.Types.TraceEvents.TraceEventData[]|null;\n  private searchResults: TimelineModel.TimelineProfileTree.Node[];\n  linkifier!: Components.Linkifier.Linkifier;\n  dataGrid!: DataGrid.SortableDataGrid.SortableDataGrid<GridNode>;\n  private lastHoveredProfileNode!: TimelineModel.TimelineProfileTree.Node|null;\n  private textFilterInternal!: TimelineRegExp;\n  private taskFilter!: TimelineModel.TimelineModelFilter.ExclusiveNameFilter;\n  protected startTime!: TraceEngine.Types.Timing.MilliSeconds;\n  protected endTime!: TraceEngine.Types.Timing.MilliSeconds;\n  splitWidget!: UI.SplitWidget.SplitWidget;\n  detailsView!: UI.Widget.Widget;\n  private searchableView!: UI.SearchableView.SearchableView;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private currentThreadSetting?: Common.Settings.Setting<any>;\n  private lastSelectedNodeInternal?: TimelineModel.TimelineProfileTree.Node|null;\n  private root?: TimelineModel.TimelineProfileTree.Node;\n  private currentResult?: number;\n  textFilterUI?: UI.Toolbar.ToolbarInput;\n  private caseSensitiveButton: UI.Toolbar.ToolbarToggle|undefined;\n  private regexButton: UI.Toolbar.ToolbarToggle|undefined;\n  private matchWholeWord: UI.Toolbar.ToolbarToggle|undefined;\n\n  #traceParseData: TraceEngine.Handlers.Types.TraceParseData|null = null;\n\n  constructor() {\n    super();\n    this.#selectedEvents = null;\n    this.element.classList.add('timeline-tree-view');\n\n    this.searchResults = [];\n  }\n\n  #eventNameForSorting(event: TraceEngine.Types.TraceEvents.TraceEventData): string {\n    const name = TimelineUIUtils.eventTitle(event) || event.name;\n    if (!this.#traceParseData) {\n      return name;\n    }\n    return name + ':@' + TraceEngine.Extras.URLForEntry.get(this.#traceParseData, event);\n  }\n\n  setSearchableView(searchableView: UI.SearchableView.SearchableView): void {\n    this.searchableView = searchableView;\n  }\n\n  setModelWithEvents(\n      selectedEvents: TraceEngine.Types.TraceEvents.TraceEventData[]|null,\n      traceParseData: TraceEngine.Handlers.Types.TraceParseData|null = null,\n      ): void {\n    this.#traceParseData = traceParseData;\n    this.#selectedEvents = selectedEvents;\n  }\n\n  traceParseData(): TraceEngine.Handlers.Types.TraceParseData|null {\n    return this.#traceParseData;\n  }\n\n  init(): void {\n    this.linkifier = new Components.Linkifier.Linkifier();\n\n    this.taskFilter = new TimelineModel.TimelineModelFilter.ExclusiveNameFilter([\n      TraceEngine.Types.TraceEvents.KnownEventName.RunTask,\n    ]);\n    this.textFilterInternal = new TimelineRegExp();\n\n    this.currentThreadSetting = Common.Settings.Settings.instance().createSetting('timeline-tree-current-thread', 0);\n    this.currentThreadSetting.addChangeListener(this.refreshTree, this);\n\n    const columns = ([] as DataGrid.DataGrid.ColumnDescriptor[]);\n    this.populateColumns(columns);\n\n    this.splitWidget = new UI.SplitWidget.SplitWidget(true, true, 'timeline-tree-view-details-split-widget');\n    const mainView = new UI.Widget.VBox();\n    const toolbar = new UI.Toolbar.Toolbar('', mainView.element);\n    toolbar.makeWrappable(true);\n    this.populateToolbar(toolbar);\n\n    this.dataGrid = new DataGrid.SortableDataGrid.SortableDataGrid({\n      displayName: i18nString(UIStrings.performance),\n      columns,\n      refreshCallback: undefined,\n      editCallback: undefined,\n      deleteCallback: undefined,\n    });\n    this.dataGrid.addEventListener(DataGrid.DataGrid.Events.SortingChanged, this.sortingChanged, this);\n    this.dataGrid.element.addEventListener('mousemove', this.onMouseMove.bind(this), true);\n    this.dataGrid.setResizeMethod(DataGrid.DataGrid.ResizeMethod.Last);\n    this.dataGrid.setRowContextMenuCallback(this.onContextMenu.bind(this));\n    this.dataGrid.asWidget().show(mainView.element);\n    this.dataGrid.addEventListener(DataGrid.DataGrid.Events.SelectedNode, this.updateDetailsForSelection, this);\n\n    this.detailsView = new UI.Widget.VBox();\n    this.detailsView.element.classList.add('timeline-details-view', 'timeline-details-view-body');\n    this.splitWidget.setMainWidget(mainView);\n    this.splitWidget.setSidebarWidget(this.detailsView);\n    this.splitWidget.hideSidebar();\n    this.splitWidget.show(this.element);\n    this.splitWidget.addEventListener(UI.SplitWidget.Events.ShowModeChanged, this.onShowModeChanged, this);\n\n    this.lastSelectedNodeInternal;\n  }\n\n  lastSelectedNode(): TimelineModel.TimelineProfileTree.Node|null|undefined {\n    return this.lastSelectedNodeInternal;\n  }\n\n  updateContents(selection: TimelineSelection): void {\n    this.setRange(selection.startTime, selection.endTime);\n  }\n\n  setRange(startTime: TraceEngine.Types.Timing.MilliSeconds, endTime: TraceEngine.Types.Timing.MilliSeconds): void {\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.refreshTree();\n  }\n\n  filters(): TimelineModel.TimelineModelFilter.TimelineModelFilter[] {\n    return [this.taskFilter, this.textFilterInternal, ...(ActiveFilters.instance().activeFilters())];\n  }\n\n  filtersWithoutTextFilter(): TimelineModel.TimelineModelFilter.TimelineModelFilter[] {\n    return [this.taskFilter, ...(ActiveFilters.instance().activeFilters())];\n  }\n\n  textFilter(): TimelineRegExp {\n    return this.textFilterInternal;\n  }\n\n  exposePercentages(): boolean {\n    return false;\n  }\n\n  populateToolbar(toolbar: UI.Toolbar.Toolbar): void {\n    this.caseSensitiveButton = new UI.Toolbar.ToolbarToggle(i18nString(UIStrings.matchCase));\n    this.caseSensitiveButton.setText('Aa');\n    this.caseSensitiveButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, () => {\n      this.#toggleFilterButton(this.caseSensitiveButton);\n    }, this);\n    toolbar.appendToolbarItem(this.caseSensitiveButton);\n\n    this.regexButton = new UI.Toolbar.ToolbarToggle(i18nString(UIStrings.useRegularExpression));\n    this.regexButton.setText('.*');\n    this.regexButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, () => {\n      this.#toggleFilterButton(this.regexButton);\n    }, this);\n    toolbar.appendToolbarItem(this.regexButton);\n\n    this.matchWholeWord = new UI.Toolbar.ToolbarToggle(i18nString(UIStrings.matchWholeWord), 'match-whole-word');\n    this.matchWholeWord.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, () => {\n      this.#toggleFilterButton(this.matchWholeWord);\n    }, this);\n    toolbar.appendToolbarItem(this.matchWholeWord);\n\n    const textFilterUI = new UI.Toolbar.ToolbarFilter();\n    this.textFilterUI = textFilterUI;\n    textFilterUI.addEventListener(UI.Toolbar.ToolbarInput.Event.TextChanged, this.#filterChanged, this);\n    toolbar.appendToolbarItem(textFilterUI);\n  }\n\n  selectedEvents(): TraceEngine.Types.TraceEvents.TraceEventData[] {\n    // TODO: can we make this type readonly?\n    return this.#selectedEvents || [];\n  }\n\n  onHover(_node: TimelineModel.TimelineProfileTree.Node|null): void {\n  }\n\n  appendContextMenuItems(_contextMenu: UI.ContextMenu.ContextMenu, _node: TimelineModel.TimelineProfileTree.Node):\n      void {\n  }\n\n  selectProfileNode(treeNode: TimelineModel.TimelineProfileTree.Node, suppressSelectedEvent: boolean): void {\n    const pathToRoot = [];\n    let node: (TimelineModel.TimelineProfileTree.Node|null)|TimelineModel.TimelineProfileTree.Node = treeNode;\n    for (; node; node = node.parent) {\n      pathToRoot.push(node);\n    }\n    for (let i = pathToRoot.length - 1; i > 0; --i) {\n      const gridNode = this.dataGridNodeForTreeNode(pathToRoot[i]);\n      if (gridNode && gridNode.dataGrid) {\n        gridNode.expand();\n      }\n    }\n    const gridNode = this.dataGridNodeForTreeNode(treeNode);\n    if (gridNode && gridNode.dataGrid) {\n      gridNode.reveal();\n      gridNode.select(suppressSelectedEvent);\n    }\n  }\n\n  refreshTree(): void {\n    if (!this.element.parentElement) {\n      // This function can be called in different views (Bottom-Up and\n      // Call Tree) by the same single event whenever the group-by\n      // dropdown changes value. Thus, we bail out whenever the view is\n      // not visible, which we know if the related element is detached\n      // from the document.\n      return;\n    }\n    this.linkifier.reset();\n    this.dataGrid.rootNode().removeChildren();\n    if (!this.#traceParseData) {\n      this.updateDetailsForSelection();\n      return;\n    }\n    this.root = this.buildTree();\n    const children = this.root.children();\n    let maxSelfTime = 0;\n    let maxTotalTime = 0;\n    const totalUsedTime = this.root.totalTime - this.root.selfTime;\n    for (const child of children.values()) {\n      maxSelfTime = Math.max(maxSelfTime, child.selfTime);\n      maxTotalTime = Math.max(maxTotalTime, child.totalTime);\n    }\n    for (const child of children.values()) {\n      // Exclude the idle time off the total calculation.\n      const gridNode = new TreeGridNode(child, totalUsedTime, maxSelfTime, maxTotalTime, this);\n      this.dataGrid.insertChild(gridNode);\n    }\n    this.sortingChanged();\n    this.updateDetailsForSelection();\n    if (this.searchableView) {\n      this.searchableView.refreshSearch();\n    }\n    const rootNode = this.dataGrid.rootNode();\n    if (rootNode.children.length > 0) {\n      rootNode.children[0].select(/* supressSelectedEvent */ true);\n    }\n  }\n\n  buildTree(): TimelineModel.TimelineProfileTree.Node {\n    throw new Error('Not Implemented');\n  }\n\n  buildTopDownTree(\n      doNotAggregate: boolean, groupIdCallback: ((arg0: TraceEngine.Types.TraceEvents.TraceEventData) => string)|null):\n      TimelineModel.TimelineProfileTree.Node {\n    return new TimelineModel.TimelineProfileTree.TopDownRootNode(\n        this.selectedEvents(), this.filters(), this.startTime, this.endTime, doNotAggregate, groupIdCallback);\n  }\n\n  populateColumns(columns: DataGrid.DataGrid.ColumnDescriptor[]): void {\n    columns.push(\n        ({id: 'self', title: i18nString(UIStrings.selfTime), width: '120px', fixedWidth: true, sortable: true} as\n         DataGrid.DataGrid.ColumnDescriptor));\n    columns.push(\n        ({id: 'total', title: i18nString(UIStrings.totalTime), width: '120px', fixedWidth: true, sortable: true} as\n         DataGrid.DataGrid.ColumnDescriptor));\n    columns.push(\n        ({id: 'activity', title: i18nString(UIStrings.activity), disclosure: true, sortable: true} as\n         DataGrid.DataGrid.ColumnDescriptor));\n  }\n\n  private sortingChanged(): void {\n    const columnId = this.dataGrid.sortColumnId();\n    if (!columnId) {\n      return;\n    }\n    let sortFunction;\n\n    const compareNameSortFn =\n        (a: DataGrid.SortableDataGrid.SortableDataGridNode<GridNode>,\n         b: DataGrid.SortableDataGrid.SortableDataGridNode<GridNode>): number => {\n          const nodeA = (a as TreeGridNode);\n          const nodeB = (b as TreeGridNode);\n          const eventA = nodeA.profileNode.event;\n          const eventB = nodeB.profileNode.event;\n          // Should not happen, but guard against the nodes not having events.\n          if (!eventA || !eventB) {\n            return 0;\n          }\n          if (!this.#traceParseData) {\n            return 0;\n          }\n          const nameA = this.#eventNameForSorting(eventA);\n          const nameB = this.#eventNameForSorting(eventB);\n          return nameA.localeCompare(nameB);\n        };\n\n    switch (columnId) {\n      case 'start-time':\n        sortFunction = compareStartTime;\n        break;\n      case 'self':\n        sortFunction = compareSelfTime;\n        break;\n      case 'total':\n        sortFunction = compareTotalTime;\n        break;\n      case 'activity':\n        sortFunction = compareNameSortFn;\n        break;\n      default:\n        console.assert(false, 'Unknown sort field: ' + columnId);\n        return;\n    }\n    this.dataGrid.sortNodes(sortFunction, !this.dataGrid.isSortOrderAscending());\n\n    function compareSelfTime(\n        a: DataGrid.SortableDataGrid.SortableDataGridNode<GridNode>,\n        b: DataGrid.SortableDataGrid.SortableDataGridNode<GridNode>): number {\n      const nodeA = a as TreeGridNode;\n      const nodeB = b as TreeGridNode;\n      return nodeA.profileNode.selfTime - nodeB.profileNode.selfTime;\n    }\n\n    function compareStartTime(\n        a: DataGrid.SortableDataGrid.SortableDataGridNode<GridNode>,\n        b: DataGrid.SortableDataGrid.SortableDataGridNode<GridNode>): number {\n      const nodeA = (a as TreeGridNode);\n      const nodeB = (b as TreeGridNode);\n      const eventA = nodeA.profileNode.event;\n      const eventB = nodeB.profileNode.event;\n      // Should not happen, but guard against the nodes not having events.\n      if (!eventA || !eventB) {\n        return 0;\n      }\n      return eventA.ts - eventB.ts;\n    }\n\n    function compareTotalTime(\n        a: DataGrid.SortableDataGrid.SortableDataGridNode<GridNode>,\n        b: DataGrid.SortableDataGrid.SortableDataGridNode<GridNode>): number {\n      const nodeA = a as TreeGridNode;\n      const nodeB = b as TreeGridNode;\n      return nodeA.profileNode.totalTime - nodeB.profileNode.totalTime;\n    }\n  }\n\n  #filterChanged(): void {\n    const searchQuery = this.textFilterUI && this.textFilterUI.value();\n    const caseSensitive = this.caseSensitiveButton !== undefined && this.caseSensitiveButton.toggled();\n    const isRegex = this.regexButton !== undefined && this.regexButton.toggled();\n    const matchWholeWord = this.matchWholeWord !== undefined && this.matchWholeWord.toggled();\n\n    this.textFilterInternal.setRegExp(\n        searchQuery ? Platform.StringUtilities.createSearchRegex(searchQuery, caseSensitive, isRegex, matchWholeWord) :\n                      null);\n    this.refreshTree();\n  }\n\n  #toggleFilterButton(toggleButton: UI.Toolbar.ToolbarToggle|undefined): void {\n    if (toggleButton) {\n      toggleButton.setToggled(!toggleButton.toggled());\n    }\n\n    this.#filterChanged();\n  }\n\n  private onShowModeChanged(): void {\n    if (this.splitWidget.showMode() === UI.SplitWidget.ShowMode.OnlyMain) {\n      return;\n    }\n    this.lastSelectedNodeInternal = undefined;\n    this.updateDetailsForSelection();\n  }\n\n  private updateDetailsForSelection(): void {\n    const selectedNode = this.dataGrid.selectedNode ? (this.dataGrid.selectedNode as TreeGridNode).profileNode : null;\n    if (selectedNode === this.lastSelectedNodeInternal) {\n      return;\n    }\n    this.lastSelectedNodeInternal = selectedNode;\n    if (this.splitWidget.showMode() === UI.SplitWidget.ShowMode.OnlyMain) {\n      return;\n    }\n    this.detailsView.detachChildWidgets();\n    this.detailsView.element.removeChildren();\n    if (selectedNode && this.showDetailsForNode(selectedNode)) {\n      return;\n    }\n    const banner = this.detailsView.element.createChild('div', 'full-widget-dimmed-banner');\n    UI.UIUtils.createTextChild(banner, i18nString(UIStrings.selectItemForDetails));\n  }\n\n  showDetailsForNode(_node: TimelineModel.TimelineProfileTree.Node): boolean {\n    return false;\n  }\n\n  private onMouseMove(event: Event): void {\n    const gridNode = event.target && (event.target instanceof Node) ?\n        (this.dataGrid.dataGridNodeFromNode((event.target as Node))) :\n        null;\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n    // @ts-expect-error\n    const profileNode = gridNode && gridNode._profileNode;\n    if (profileNode === this.lastHoveredProfileNode) {\n      return;\n    }\n    this.lastHoveredProfileNode = profileNode;\n    this.onHover(profileNode);\n  }\n\n  private onContextMenu(\n      contextMenu: UI.ContextMenu.ContextMenu, eventGridNode: DataGrid.DataGrid.DataGridNode<GridNode>): void {\n    const gridNode = (eventGridNode as GridNode);\n    if (gridNode.linkElement) {\n      contextMenu.appendApplicableItems(gridNode.linkElement);\n    }\n    const profileNode = gridNode.profileNode;\n    if (profileNode) {\n      this.appendContextMenuItems(contextMenu, profileNode);\n    }\n  }\n\n  dataGridNodeForTreeNode(treeNode: TimelineModel.TimelineProfileTree.Node): GridNode|null {\n    return profileNodeToTreeGridNode.get(treeNode) || null;\n  }\n\n  // UI.SearchableView.Searchable implementation\n\n  onSearchCanceled(): void {\n    this.searchResults = [];\n    this.currentResult = 0;\n  }\n\n  performSearch(searchConfig: UI.SearchableView.SearchConfig, _shouldJump: boolean, _jumpBackwards?: boolean): void {\n    this.searchResults = [];\n    this.currentResult = 0;\n    if (!this.root) {\n      return;\n    }\n    const searchRegex = searchConfig.toSearchRegex();\n    this.searchResults = this.root.searchTree(\n        event => TimelineUIUtils.testContentMatching(event, searchRegex.regex, this.#traceParseData || undefined));\n    this.searchableView.updateSearchMatchesCount(this.searchResults.length);\n  }\n\n  jumpToNextSearchResult(): void {\n    if (!this.searchResults.length || this.currentResult === undefined) {\n      return;\n    }\n    this.selectProfileNode(this.searchResults[this.currentResult], false);\n    this.currentResult = Platform.NumberUtilities.mod(this.currentResult + 1, this.searchResults.length);\n  }\n\n  jumpToPreviousSearchResult(): void {\n    if (!this.searchResults.length || this.currentResult === undefined) {\n      return;\n    }\n    this.selectProfileNode(this.searchResults[this.currentResult], false);\n    this.currentResult = Platform.NumberUtilities.mod(this.currentResult - 1, this.searchResults.length);\n  }\n\n  supportsCaseSensitiveSearch(): boolean {\n    return true;\n  }\n\n  supportsRegexSearch(): boolean {\n    return true;\n  }\n}\n\nexport class GridNode extends DataGrid.SortableDataGrid.SortableDataGridNode<GridNode> {\n  protected populated: boolean;\n  profileNode: TimelineModel.TimelineProfileTree.Node;\n  protected treeView: TimelineTreeView;\n  protected grandTotalTime: number;\n  protected maxSelfTime: number;\n  protected maxTotalTime: number;\n  linkElement: Element|null;\n\n  constructor(\n      profileNode: TimelineModel.TimelineProfileTree.Node, grandTotalTime: number, maxSelfTime: number,\n      maxTotalTime: number, treeView: TimelineTreeView) {\n    super(null, false);\n    this.populated = false;\n    this.profileNode = profileNode;\n    this.treeView = treeView;\n    this.grandTotalTime = grandTotalTime;\n    this.maxSelfTime = maxSelfTime;\n    this.maxTotalTime = maxTotalTime;\n    this.linkElement = null;\n  }\n\n  override createCell(columnId: string): HTMLElement {\n    if (columnId === 'activity') {\n      return this.createNameCell(columnId);\n    }\n    return this.createValueCell(columnId) || super.createCell(columnId);\n  }\n\n  private createNameCell(columnId: string): HTMLElement {\n    const cell = this.createTD(columnId);\n    const container = cell.createChild('div', 'name-container');\n    const iconContainer = container.createChild('div', 'activity-icon-container');\n    const icon = iconContainer.createChild('div', 'activity-icon');\n    const name = container.createChild('div', 'activity-name');\n    const event = this.profileNode.event;\n    if (this.profileNode.isGroupNode()) {\n      const treeView = (this.treeView as AggregatedTimelineTreeView);\n      const info = treeView.displayInfoForGroupNode(this.profileNode);\n      name.textContent = info.name;\n      icon.style.backgroundColor = info.color;\n      if (info.icon) {\n        iconContainer.insertBefore(info.icon, icon);\n      }\n    } else if (event) {\n      name.textContent = TimelineUIUtils.eventTitle(event);\n      const traceData = this.treeView.traceParseData();\n      const target = traceData ? targetForEvent(traceData, event) : null;\n      const linkifier = this.treeView.linkifier;\n      const isFreshRecording = Boolean(traceData && Tracker.instance().recordingIsFresh(traceData));\n      this.linkElement = TimelineUIUtils.linkifyTopCallFrame(event, target, linkifier, isFreshRecording);\n      if (this.linkElement) {\n        container.createChild('div', 'activity-link').appendChild(this.linkElement);\n      }\n      const eventStyle = TimelineUIUtils.eventStyle(event);\n      const eventCategory = eventStyle.category;\n      UI.ARIAUtils.setLabel(icon, eventCategory.title);\n      icon.style.backgroundColor = eventCategory.getComputedColorValue();\n      if (TraceEngine.Types.Extensions.isSyntheticExtensionEntry(event)) {\n        icon.style.backgroundColor = Extensions.ExtensionUI.extensionEntryColor(event);\n      }\n    }\n    return cell;\n  }\n\n  private createValueCell(columnId: string): HTMLElement|null {\n    if (columnId !== 'self' && columnId !== 'total' && columnId !== 'start-time') {\n      return null;\n    }\n\n    let showPercents = false;\n    let value: number;\n    let maxTime: number|undefined;\n    let event: TraceEngine.Types.TraceEvents.TraceEventData|null;\n    switch (columnId) {\n      case 'start-time': {\n        event = this.profileNode.event;\n        const traceParseData = this.treeView.traceParseData();\n        if (!traceParseData) {\n          throw new Error('Unable to load trace data for tree view');\n        }\n        const timings = event && TraceEngine.Helpers.Timing.eventTimingsMilliSeconds(event);\n        const startTime = timings?.startTime ?? 0;\n        value = startTime - TraceEngine.Helpers.Timing.microSecondsToMilliseconds(traceParseData.Meta.traceBounds.min);\n      } break;\n      case 'self':\n        value = this.profileNode.selfTime;\n        maxTime = this.maxSelfTime;\n        showPercents = true;\n        break;\n      case 'total':\n        value = this.profileNode.totalTime;\n        maxTime = this.maxTotalTime;\n        showPercents = true;\n        break;\n      default:\n        return null;\n    }\n    const cell = this.createTD(columnId);\n    cell.className = 'numeric-column';\n    cell.setAttribute('title', i18nString(UIStrings.fms, {PH1: value.toFixed(4)}));\n    const textDiv = cell.createChild('div');\n    textDiv.createChild('span').textContent = i18nString(UIStrings.fms, {PH1: value.toFixed(1)});\n\n    if (showPercents && this.treeView.exposePercentages()) {\n      textDiv.createChild('span', 'percent-column').textContent =\n          i18nString(UIStrings.percentPlaceholder, {PH1: (value / this.grandTotalTime * 100).toFixed(1)});\n    }\n    if (maxTime) {\n      textDiv.classList.add('background-percent-bar');\n      cell.createChild('div', 'background-bar-container').createChild('div', 'background-bar').style.width =\n          (value * 100 / maxTime).toFixed(1) + '%';\n    }\n    return cell;\n  }\n}\n\nexport class TreeGridNode extends GridNode {\n  constructor(\n      profileNode: TimelineModel.TimelineProfileTree.Node, grandTotalTime: number, maxSelfTime: number,\n      maxTotalTime: number, treeView: TimelineTreeView) {\n    super(profileNode, grandTotalTime, maxSelfTime, maxTotalTime, treeView);\n    this.setHasChildren(this.profileNode.hasChildren());\n    profileNodeToTreeGridNode.set(profileNode, this);\n  }\n\n  override populate(): void {\n    if (this.populated) {\n      return;\n    }\n    this.populated = true;\n    if (!this.profileNode.children) {\n      return;\n    }\n    for (const node of this.profileNode.children().values()) {\n      const gridNode = new TreeGridNode(node, this.grandTotalTime, this.maxSelfTime, this.maxTotalTime, this.treeView);\n      this.insertChildOrdered(gridNode);\n    }\n  }\n}\n\nconst profileNodeToTreeGridNode = new WeakMap<TimelineModel.TimelineProfileTree.Node, TreeGridNode>();\n\nexport class AggregatedTimelineTreeView extends TimelineTreeView {\n  protected readonly groupBySetting: Common.Settings.Setting<AggregatedTimelineTreeView.GroupBy>;\n  private readonly stackView: TimelineStackView;\n  private executionContextNamesByOrigin = new Map<Platform.DevToolsPath.UrlString, string>();\n\n  constructor() {\n    super();\n    this.groupBySetting = Common.Settings.Settings.instance().createSetting(\n        'timeline-tree-group-by', AggregatedTimelineTreeView.GroupBy.None);\n    this.groupBySetting.addChangeListener(this.refreshTree.bind(this));\n    this.init();\n    this.stackView = new TimelineStackView(this);\n    this.stackView.addEventListener(TimelineStackView.Events.SelectionChanged, this.onStackViewSelectionChanged, this);\n  }\n\n  setGroupBySettingForTests(groupBy: AggregatedTimelineTreeView.GroupBy): void {\n    this.groupBySetting.set(groupBy);\n  }\n\n  override updateContents(selection: TimelineSelection): void {\n    this.updateExtensionResolver();\n    super.updateContents(selection);\n    const rootNode = this.dataGrid.rootNode();\n    if (rootNode.children.length) {\n      rootNode.children[0].select(/* suppressSelectedEvent */ true);\n    }\n  }\n\n  private updateExtensionResolver(): void {\n    this.executionContextNamesByOrigin = new Map();\n    for (const runtimeModel of SDK.TargetManager.TargetManager.instance().models(SDK.RuntimeModel.RuntimeModel)) {\n      for (const context of runtimeModel.executionContexts()) {\n        this.executionContextNamesByOrigin.set(context.origin, context.name);\n      }\n    }\n  }\n\n  private beautifyDomainName(this: AggregatedTimelineTreeView, name: string): string {\n    if (AggregatedTimelineTreeView.isExtensionInternalURL(name as Platform.DevToolsPath.UrlString)) {\n      name = i18nString(UIStrings.chromeExtensionsOverhead);\n    } else if (AggregatedTimelineTreeView.isV8NativeURL(name as Platform.DevToolsPath.UrlString)) {\n      name = i18nString(UIStrings.vRuntime);\n    } else if (name.startsWith('chrome-extension')) {\n      name = this.executionContextNamesByOrigin.get(name as Platform.DevToolsPath.UrlString) || name;\n    }\n    return name;\n  }\n\n  displayInfoForGroupNode(node: TimelineModel.TimelineProfileTree.Node): {\n    name: string,\n    color: string,\n    icon: (Element|undefined),\n  } {\n    const categories = getCategoryStyles();\n    const color = node.id && node.event ? TimelineUIUtils.eventColor(node.event) : categories['other'].color;\n    const unattributed = i18nString(UIStrings.unattributed);\n\n    const id = typeof node.id === 'symbol' ? undefined : node.id;\n\n    switch (this.groupBySetting.get()) {\n      case AggregatedTimelineTreeView.GroupBy.Category: {\n        const idIsValid = id && stringIsEventCategory(id);\n        const category = idIsValid ? categories[id] || categories['other'] : {title: unattributed, color: unattributed};\n        return {name: category.title, color: category.color, icon: undefined};\n      }\n\n      case AggregatedTimelineTreeView.GroupBy.Domain:\n      case AggregatedTimelineTreeView.GroupBy.Subdomain: {\n        const domainName = id ? this.beautifyDomainName(id) : undefined;\n        return {name: domainName || unattributed, color: color, icon: undefined};\n      }\n\n      case AggregatedTimelineTreeView.GroupBy.EventName: {\n        if (!node.event) {\n          throw new Error('Unable to find event for group by operation');\n        }\n        const name = TimelineUIUtils.eventTitle(node.event);\n        return {\n          name: name,\n          color,\n          icon: undefined,\n        };\n      }\n\n      case AggregatedTimelineTreeView.GroupBy.URL:\n        break;\n\n      case AggregatedTimelineTreeView.GroupBy.Frame: {\n        const frame = id ? this.traceParseData()?.PageFrames.frames.get(id) : undefined;\n        const frameName = frame ? TimelineUIUtils.displayNameForFrame(frame) : i18nString(UIStrings.page);\n        return {name: frameName, color: color, icon: undefined};\n      }\n\n      default:\n        console.assert(false, 'Unexpected grouping type');\n    }\n    return {name: id || unattributed, color: color, icon: undefined};\n  }\n\n  override populateToolbar(toolbar: UI.Toolbar.Toolbar): void {\n    super.populateToolbar(toolbar);\n    const groupBy = AggregatedTimelineTreeView.GroupBy;\n    const options = [\n      {label: i18nString(UIStrings.noGrouping), value: groupBy.None},\n      {label: i18nString(UIStrings.groupByActivity), value: groupBy.EventName},\n      {label: i18nString(UIStrings.groupByCategory), value: groupBy.Category},\n      {label: i18nString(UIStrings.groupByDomain), value: groupBy.Domain},\n      {label: i18nString(UIStrings.groupByFrame), value: groupBy.Frame},\n      {label: i18nString(UIStrings.groupBySubdomain), value: groupBy.Subdomain},\n      {label: i18nString(UIStrings.groupByUrl), value: groupBy.URL},\n    ];\n    toolbar.appendToolbarItem(\n        new UI.Toolbar.ToolbarSettingComboBox(options, this.groupBySetting, i18nString(UIStrings.groupBy)));\n    toolbar.appendSpacer();\n    toolbar.appendToolbarItem(this.splitWidget.createShowHideSidebarButton(\n        i18nString(UIStrings.showHeaviestStack), i18nString(UIStrings.hideHeaviestStack),\n        i18nString(UIStrings.heaviestStackShown), i18nString(UIStrings.heaviestStackHidden)));\n  }\n\n  private buildHeaviestStack(treeNode: TimelineModel.TimelineProfileTree.Node):\n      TimelineModel.TimelineProfileTree.Node[] {\n    console.assert(Boolean(treeNode.parent), 'Attempt to build stack for tree root');\n    let result: TimelineModel.TimelineProfileTree.Node[] = [];\n    // Do not add root to the stack, as it's the tree itself.\n    for (let node: TimelineModel.TimelineProfileTree.Node = treeNode; node && node.parent; node = node.parent) {\n      result.push(node);\n    }\n    result = result.reverse();\n    for (let node: TimelineModel.TimelineProfileTree.Node = treeNode;\n         node && node.children() && node.children().size;) {\n      const children = Array.from(node.children().values());\n      node = children.reduce((a, b) => a.totalTime > b.totalTime ? a : b);\n      result.push(node);\n    }\n    return result;\n  }\n\n  override exposePercentages(): boolean {\n    return true;\n  }\n\n  private onStackViewSelectionChanged(): void {\n    const treeNode = this.stackView.selectedTreeNode();\n    if (treeNode) {\n      this.selectProfileNode(treeNode, true);\n    }\n  }\n\n  override showDetailsForNode(node: TimelineModel.TimelineProfileTree.Node): boolean {\n    const stack = this.buildHeaviestStack(node);\n    this.stackView.setStack(stack, node);\n    this.stackView.show(this.detailsView.element);\n    return true;\n  }\n\n  protected groupingFunction(groupBy: string): ((arg0: TraceEngine.Types.TraceEvents.TraceEventData) => string)|null {\n    const GroupBy = AggregatedTimelineTreeView.GroupBy;\n    switch (groupBy) {\n      case GroupBy.None:\n        return null;\n      case GroupBy.EventName:\n        return (event: TraceEngine.Types.TraceEvents.TraceEventData) => TimelineUIUtils.eventStyle(event).title;\n      case GroupBy.Category:\n        return (event: TraceEngine.Types.TraceEvents.TraceEventData) => TimelineUIUtils.eventStyle(event).category.name;\n      case GroupBy.Subdomain:\n        return this.domainByEvent.bind(this, false);\n      case GroupBy.Domain:\n        return this.domainByEvent.bind(this, true);\n      case GroupBy.URL:\n        return (event: TraceEngine.Types.TraceEvents.TraceEventData) => {\n          const traceParsedData = this.traceParseData();\n          return traceParsedData ? TraceEngine.Extras.URLForEntry.get(traceParsedData, event) ?? '' : '';\n        };\n      case GroupBy.Frame:\n        return (event: TraceEngine.Types.TraceEvents.TraceEventData) => {\n          const frameId = TraceEngine.Helpers.Trace.frameIDForEvent(event);\n          return frameId || this.traceParseData()?.Meta.mainFrameId || '';\n        };\n      default:\n        console.assert(false, `Unexpected aggregation setting: ${groupBy}`);\n        return null;\n    }\n  }\n\n  private domainByEvent(groupSubdomains: boolean, event: TraceEngine.Types.TraceEvents.TraceEventData): string {\n    const traceParsedData = this.traceParseData();\n    if (!traceParsedData) {\n      return '';\n    }\n    const url = TraceEngine.Extras.URLForEntry.get(traceParsedData, event);\n    if (!url) {\n      return '';\n    }\n    if (AggregatedTimelineTreeView.isExtensionInternalURL(url)) {\n      return AggregatedTimelineTreeView.extensionInternalPrefix;\n    }\n    if (AggregatedTimelineTreeView.isV8NativeURL(url)) {\n      return AggregatedTimelineTreeView.v8NativePrefix;\n    }\n    const parsedURL = Common.ParsedURL.ParsedURL.fromString(url);\n    if (!parsedURL) {\n      return '';\n    }\n    if (parsedURL.scheme === 'chrome-extension') {\n      return parsedURL.scheme + '://' + parsedURL.host;\n    }\n    if (!groupSubdomains) {\n      return parsedURL.host;\n    }\n    if (/^[.0-9]+$/.test(parsedURL.host)) {\n      return parsedURL.host;\n    }\n    const domainMatch = /([^.]*\\.)?[^.]*$/.exec(parsedURL.host);\n    return domainMatch && domainMatch[0] || '';\n  }\n\n  private static isExtensionInternalURL(url: Platform.DevToolsPath.UrlString): boolean {\n    return url.startsWith(AggregatedTimelineTreeView.extensionInternalPrefix);\n  }\n\n  private static isV8NativeURL(url: Platform.DevToolsPath.UrlString): boolean {\n    return url.startsWith(AggregatedTimelineTreeView.v8NativePrefix);\n  }\n\n  private static readonly extensionInternalPrefix = 'extensions::';\n  private static readonly v8NativePrefix = 'native ';\n}\nexport namespace AggregatedTimelineTreeView {\n  export enum GroupBy {\n    None = 'None',\n    EventName = 'EventName',\n    Category = 'Category',\n    Domain = 'Domain',\n    Subdomain = 'Subdomain',\n    URL = 'URL',\n    Frame = 'Frame',\n  }\n}\n\nexport class CallTreeTimelineTreeView extends AggregatedTimelineTreeView {\n  constructor() {\n    super();\n    this.dataGrid.markColumnAsSortedBy('total', DataGrid.DataGrid.Order.Descending);\n  }\n\n  override buildTree(): TimelineModel.TimelineProfileTree.Node {\n    const grouping = this.groupBySetting.get();\n    return this.buildTopDownTree(false, this.groupingFunction(grouping));\n  }\n}\n\nexport class BottomUpTimelineTreeView extends AggregatedTimelineTreeView {\n  constructor() {\n    super();\n    this.dataGrid.markColumnAsSortedBy('self', DataGrid.DataGrid.Order.Descending);\n  }\n\n  override buildTree(): TimelineModel.TimelineProfileTree.Node {\n    return new TimelineModel.TimelineProfileTree.BottomUpRootNode(\n        this.selectedEvents(), this.textFilter(), this.filtersWithoutTextFilter(), this.startTime, this.endTime,\n        this.groupingFunction(this.groupBySetting.get()));\n  }\n}\n\nexport class TimelineStackView extends\n    Common.ObjectWrapper.eventMixin<TimelineStackView.EventTypes, typeof UI.Widget.VBox>(UI.Widget.VBox) {\n  private readonly treeView: TimelineTreeView;\n  private readonly dataGrid: DataGrid.ViewportDataGrid.ViewportDataGrid<unknown>;\n\n  constructor(treeView: TimelineTreeView) {\n    super();\n    const header = this.element.createChild('div', 'timeline-stack-view-header');\n    header.textContent = i18nString(UIStrings.heaviestStack);\n    this.treeView = treeView;\n    const columns = ([\n      {id: 'total', title: i18nString(UIStrings.totalTime), fixedWidth: true, width: '110px'},\n      {id: 'activity', title: i18nString(UIStrings.activity)},\n    ] as DataGrid.DataGrid.ColumnDescriptor[]);\n    this.dataGrid = new DataGrid.ViewportDataGrid.ViewportDataGrid({\n      displayName: i18nString(UIStrings.timelineStack),\n      columns,\n      deleteCallback: undefined,\n      editCallback: undefined,\n      refreshCallback: undefined,\n    });\n    this.dataGrid.setResizeMethod(DataGrid.DataGrid.ResizeMethod.Last);\n    this.dataGrid.addEventListener(DataGrid.DataGrid.Events.SelectedNode, this.onSelectionChanged, this);\n    this.dataGrid.asWidget().show(this.element);\n  }\n\n  setStack(stack: TimelineModel.TimelineProfileTree.Node[], selectedNode: TimelineModel.TimelineProfileTree.Node):\n      void {\n    const rootNode = this.dataGrid.rootNode();\n    rootNode.removeChildren();\n    let nodeToReveal: GridNode|null = null;\n    const totalTime = Math.max.apply(Math, stack.map(node => node.totalTime));\n    for (const node of stack) {\n      const gridNode = new GridNode(node, totalTime, totalTime, totalTime, this.treeView);\n      rootNode.appendChild(gridNode);\n      if (node === selectedNode) {\n        nodeToReveal = gridNode;\n      }\n    }\n    if (nodeToReveal) {\n      nodeToReveal.revealAndSelect();\n    }\n  }\n\n  selectedTreeNode(): TimelineModel.TimelineProfileTree.Node|null {\n    const selectedNode = this.dataGrid.selectedNode;\n    return selectedNode && (selectedNode as GridNode).profileNode;\n  }\n\n  private onSelectionChanged(): void {\n    this.dispatchEventToListeners(TimelineStackView.Events.SelectionChanged);\n  }\n}\n\nexport namespace TimelineStackView {\n  export const enum Events {\n    SelectionChanged = 'SelectionChanged',\n  }\n\n  export type EventTypes = {\n    [Events.SelectionChanged]: void,\n  };\n}\n"]}