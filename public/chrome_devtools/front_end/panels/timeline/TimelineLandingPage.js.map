{"version":3,"file":"TimelineLandingPage.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelineLandingPage.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as PanelFeedback from '../../ui/components/panel_feedback/panel_feedback.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport * as Components from './components/components.js';\n\nconst UIStrings = {\n  /**\n   * @description Text for an option to learn more about something\n   */\n  learnmore: 'LearnÂ more',\n  /**\n   * @description Text in Timeline Panel of the Performance panel\n   */\n  wasd: 'WASD',\n  /**\n   * @description Text in Timeline Panel of the Performance panel\n   * @example {record} PH1\n   * @example {Ctrl + R} PH2\n   */\n  clickTheRecordButtonSOrHitSTo: 'Click the record button {PH1} or hit {PH2} to start a new recording.',\n  /**\n   * @description Text in Timeline Panel of the Performance panel\n   * @example {reload button} PH1\n   * @example {Ctrl + R} PH2\n   */\n  clickTheReloadButtonSOrHitSTo: 'Click the reload button {PH1} or hit {PH2} to record the page load.',\n  /**\n   * @description Text in Timeline Panel of the Performance panel\n   * @example {Ctrl + U} PH1\n   * @example {Learn more} PH2\n   */\n  afterRecordingSelectAnAreaOf:\n      'After recording, select an area of interest in the overview by dragging. Then, zoom and pan the timeline with the mousewheel or {PH1} keys. {PH2}',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/TimelineLandingPage.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ninterface Options {\n  isNode?: boolean;\n}\n\nexport class TimelineLandingPage extends UI.Widget.VBox {\n  private readonly toggleRecordAction: UI.ActionRegistration.Action;\n\n  #splitWidget?: UI.SplitWidget.SplitWidget;\n\n  constructor(toggleRecordAction: UI.ActionRegistration.Action, options?: Options) {\n    super();\n\n    this.toggleRecordAction = toggleRecordAction;\n\n    this.contentElement.classList.add('timeline-landing-page', 'fill');\n    if (Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.TIMELINE_OBSERVATIONS)) {\n      this.renderLandingPage();\n    } else {\n      this.renderLegacyLandingPage(options);\n    }\n  }\n\n  override onResize(): void {\n    const useNarrowLayout = this.contentElement.offsetWidth < 500;\n    if (useNarrowLayout) {\n      this.#splitWidget?.setVertical(false);\n    } else {\n      this.#splitWidget?.setVertical(true);\n    }\n  }\n\n  private renderLandingPage(): void {\n    const mainWidget = new UI.Widget.Widget();\n    mainWidget.contentElement.append(new Components.LiveMetricsView.LiveMetricsView());\n\n    const sidebarWidget = new UI.Widget.Widget();\n    sidebarWidget.contentElement.append(new Components.LiveMetricsView.LiveMetricsNextSteps());\n\n    this.#splitWidget = new UI.SplitWidget.SplitWidget(true, true);\n    this.#splitWidget.setMainWidget(mainWidget);\n    this.#splitWidget.setSidebarWidget(sidebarWidget);\n\n    this.#splitWidget.show(this.contentElement);\n  }\n\n  private renderLegacyLandingPage(options?: Options): void {\n    function encloseWithTag(tagName: string, contents: string): HTMLElement {\n      const e = document.createElement(tagName);\n      e.textContent = contents;\n      return e;\n    }\n\n    const learnMoreNode = UI.XLink.XLink.create(\n        'https://developer.chrome.com/docs/devtools/evaluate-performance/', i18nString(UIStrings.learnmore), undefined,\n        undefined, 'learn-more');\n\n    const recordKey = encloseWithTag(\n        'b',\n        UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutsForAction('timeline.toggle-recording')[0].title());\n    const reloadKey = encloseWithTag(\n        'b', UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutsForAction('timeline.record-reload')[0].title());\n    const navigateNode = encloseWithTag('b', i18nString(UIStrings.wasd));\n\n    this.contentElement.classList.add('legacy');\n    const centered = this.contentElement.createChild('div');\n\n    const recordButton = UI.UIUtils.createInlineButton(UI.Toolbar.Toolbar.createActionButton(this.toggleRecordAction));\n    const reloadButton =\n        UI.UIUtils.createInlineButton(UI.Toolbar.Toolbar.createActionButtonForId('timeline.record-reload'));\n\n    centered.createChild('p').appendChild(i18n.i18n.getFormatLocalizedString(\n        str_, UIStrings.clickTheRecordButtonSOrHitSTo, {PH1: recordButton, PH2: recordKey}));\n\n    centered.createChild('p').appendChild(i18n.i18n.getFormatLocalizedString(\n        str_, UIStrings.clickTheReloadButtonSOrHitSTo, {PH1: reloadButton, PH2: reloadKey}));\n\n    centered.createChild('p').appendChild(i18n.i18n.getFormatLocalizedString(\n        str_, UIStrings.afterRecordingSelectAnAreaOf, {PH1: navigateNode, PH2: learnMoreNode}));\n\n    if (options?.isNode) {\n      const previewSection = new PanelFeedback.PanelFeedback.PanelFeedback();\n      previewSection.data = {\n        feedbackUrl: 'https://crbug.com/1354548' as Platform.DevToolsPath.UrlString,\n        quickStartUrl: 'https://goo.gle/js-profiler-deprecation' as Platform.DevToolsPath.UrlString,\n        quickStartLinkText: i18nString(UIStrings.learnmore),\n      };\n      centered.appendChild(previewSection);\n      const feedbackButton = new PanelFeedback.FeedbackButton.FeedbackButton();\n      feedbackButton.data = {\n        feedbackUrl: 'https://crbug.com/1354548' as Platform.DevToolsPath.UrlString,\n      };\n      centered.appendChild(feedbackButton);\n    }\n  }\n}\n"]}