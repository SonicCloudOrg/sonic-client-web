{"version":3,"file":"CompilerScriptMapping.test.js","sourceRoot":"","sources":["../../../../../../front_end/models/bindings/CompilerScriptMapping.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport {createTarget} from '../../testing/EnvironmentHelpers.js';\nimport {describeWithMockConnection} from '../../testing/MockConnection.js';\nimport {MockProtocolBackend} from '../../testing/MockScopeChain.js';\nimport {encodeSourceMap} from '../../testing/SourceMapEncoder.js';\nimport * as TextUtils from '../text_utils/text_utils.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nimport * as Bindings from './bindings.js';\n\ndescribeWithMockConnection('CompilerScriptMapping', () => {\n  let backend: MockProtocolBackend;\n  let debuggerWorkspaceBinding: Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding;\n  let workspace: Workspace.Workspace.WorkspaceImpl;\n\n  beforeEach(() => {\n    const targetManager = SDK.TargetManager.TargetManager.instance();\n    workspace = Workspace.Workspace.WorkspaceImpl.instance({forceNew: true});\n    const resourceMapping = new Bindings.ResourceMapping.ResourceMapping(targetManager, workspace);\n    debuggerWorkspaceBinding = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance(\n        {forceNew: true, resourceMapping, targetManager});\n    backend = new MockProtocolBackend();\n    Bindings.IgnoreListManager.IgnoreListManager.instance({forceNew: true, debuggerWorkspaceBinding});\n  });\n\n  const waitForUISourceCodeAdded =\n      (url: string, target: SDK.Target.Target): Promise<Workspace.UISourceCode.UISourceCode> =>\n          debuggerWorkspaceBinding.waitForUISourceCodeAdded(url as Platform.DevToolsPath.UrlString, target);\n  const waitForUISourceCodeRemoved = (uiSourceCode: Workspace.UISourceCode.UISourceCode): Promise<void> =>\n      new Promise(resolve => {\n        const {eventType, listener} =\n            workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeRemoved, event => {\n              if (event.data === uiSourceCode) {\n                workspace.removeEventListener(eventType, listener);\n                resolve();\n              }\n            });\n      });\n\n  it('creates UISourceCodes with the correct content type', async () => {\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const sources = ['foo.js', 'bar.ts', 'baz.jsx'];\n    const scriptInfo = {url: `${sourceRoot}/bundle.js`, content: '1;\\n'};\n    const sourceMapInfo = {url: `${scriptInfo.url}.map`, content: {version: 3, mappings: '', sourceRoot, sources}};\n\n    await Promise.all([\n      ...sources.map(name => waitForUISourceCodeAdded(`${sourceRoot}/${name}`, target).then(uiSourceCode => {\n        assert.isTrue(uiSourceCode.contentType().isFromSourceMap());\n        assert.isTrue(uiSourceCode.contentType().isScript());\n      })),\n      backend.addScript(target, scriptInfo, sourceMapInfo),\n    ]);\n  });\n\n  it('removes webpack hashes from display names', async () => {\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const sources = ['foo.js?a1b2', 'two%20words.ts?c3d4', '?e5f6'];\n    const scriptInfo = {url: `${sourceRoot}/bundle.js`, content: '1;\\n'};\n    const sourceMapInfo = {url: `${scriptInfo.url}.map`, content: {version: 3, mappings: '', sourceRoot, sources}};\n\n    const namesPromise = Promise.all(\n        sources.map(\n            name =>\n                waitForUISourceCodeAdded(`${sourceRoot}/${name}`, target).then(uiSourceCode => uiSourceCode.name())),\n    );\n    await backend.addScript(target, scriptInfo, sourceMapInfo);\n\n    assert.deepEqual(await namesPromise, ['foo.js', 'two words.ts', '?e5f6']);\n  });\n\n  it('creates UISourceCodes with the correct media type', async () => {\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const scriptInfo = {\n      url: `${sourceRoot}/bundle.js`,\n      content: 'foo();\\nbar();\\nbaz();\\n',\n    };\n    const sourceMapInfo = {\n      url: `${scriptInfo.url}.map`,\n      content: encodeSourceMap(['0:0 => foo.js:0:0', '1:0 => bar.ts:0:0', '2:0 => baz.jsx:0:0'], sourceRoot),\n    };\n\n    const [fooUISourceCode, barUISourceCode, bazUISourceCode] = await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/foo.js`, target),\n      waitForUISourceCodeAdded(`${sourceRoot}/bar.ts`, target),\n      waitForUISourceCodeAdded(`${sourceRoot}/baz.jsx`, target),\n      backend.addScript(target, scriptInfo, sourceMapInfo),\n    ]);\n\n    assert.strictEqual(fooUISourceCode.mimeType(), 'text/javascript');\n    assert.strictEqual(barUISourceCode.mimeType(), 'text/typescript');\n    assert.strictEqual(bazUISourceCode.mimeType(), 'text/jsx');\n  });\n\n  it('creates UISourceCodes with the correct content and metadata', async () => {\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const sourceContent = 'const x = 1; console.log(x)';\n    const scriptInfo = {\n      url: `${sourceRoot}/script.min.js`,\n      content: 'console.log(1);',\n    };\n    const sourceMapInfo = {\n      url: `${scriptInfo.url}.map`,\n      content: {version: 1, mappings: '', sources: ['script.js'], sourcesContent: [sourceContent], sourceRoot},\n    };\n    const [uiSourceCode] = await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/script.js`, target),\n      backend.addScript(target, scriptInfo, sourceMapInfo),\n    ]);\n\n    const metadata = await uiSourceCode.requestMetadata();\n    assert.strictEqual(metadata?.contentSize, sourceContent.length);\n\n    const content = await uiSourceCode.requestContentData();\n    assert.instanceOf(content, TextUtils.ContentData.ContentData);\n    assert.strictEqual(content.text, sourceContent);\n  });\n\n  it('creates separate UISourceCodes for separate targets', async () => {\n    // Create a main target and a worker child target.\n    const mainTarget = createTarget({\n      id: 'main' as Protocol.Target.TargetID,\n      type: SDK.Target.Type.Frame,\n    });\n    const workerTarget = createTarget({\n      id: 'worker' as Protocol.Target.TargetID,\n      type: SDK.Target.Type.ServiceWorker,\n      parentTarget: mainTarget,\n    });\n\n    const sourceRoot = 'http://example.com';\n    const scriptInfo = {\n      url: `${sourceRoot}/script.min.js`,\n      content: 'console.log(1);',\n    };\n    const sourceMapInfo = {\n      url: `${scriptInfo.url}.map`,\n      content: encodeSourceMap(['0:0 => script.js:0:0'], sourceRoot),\n    };\n\n    // Register the same script for both targets, and wait until the `CompilerScriptMapping`\n    // adds a UISourceCode for the `script.js` that is listed in the source map for each of\n    // the two targets.\n    const [mainUISourceCode, mainScript, workerUISourceCode, workerScript] = await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/script.js`, mainTarget),\n      backend.addScript(mainTarget, scriptInfo, sourceMapInfo),\n      waitForUISourceCodeAdded(`${sourceRoot}/script.js`, workerTarget),\n      backend.addScript(workerTarget, scriptInfo, sourceMapInfo),\n    ]);\n\n    assert.notStrictEqual(mainUISourceCode, workerUISourceCode);\n    for (const {script, uiSourceCode} of\n             [{script: mainScript, uiSourceCode: mainUISourceCode},\n              {script: workerScript, uiSourceCode: workerUISourceCode}]) {\n      const rawLocations = await debuggerWorkspaceBinding.uiLocationToRawLocations(uiSourceCode, 0, 0);\n      assert.lengthOf(rawLocations, 1);\n      const [rawLocation] = rawLocations;\n      assert.strictEqual(rawLocation.script(), script);\n      const uiLocation = await debuggerWorkspaceBinding.rawLocationToUILocation(rawLocation);\n      assert.strictEqual(uiLocation!.uiSourceCode, uiSourceCode);\n    }\n  });\n\n  it('creates separate UISourceCodes for content scripts', async () => {\n    // By default content scripts are ignore listed, which will prevent processing the\n    // source map. We need to disable that option.\n    Bindings.IgnoreListManager.IgnoreListManager.instance().unIgnoreListContentScripts();\n\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const scriptInfo = {\n      url: `${sourceRoot}/script.min.js`,\n      content: 'console.log(1);',\n    };\n    const sourceMapInfo = {\n      url: `${scriptInfo.url}.map`,\n      content: encodeSourceMap(['0:0 => script.js:0:0'], sourceRoot),\n    };\n\n    // Register `script.min.js` as regular script first.\n    const regularScriptInfo = {...scriptInfo, isContentScript: false};\n    const [regularUISourceCode, regularScript] = await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/script.js`, target),\n      backend.addScript(target, regularScriptInfo, sourceMapInfo),\n    ]);\n\n    // Now register the same `script.min.js` as content script.\n    const contentScriptInfo = {...scriptInfo, isContentScript: true};\n    const [contentUISourceCode, contentScript] = await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/script.js`, target),\n      backend.addScript(target, contentScriptInfo, sourceMapInfo),\n    ]);\n\n    assert.notStrictEqual(regularUISourceCode, contentUISourceCode);\n    for (const {script, uiSourceCode} of\n             [{script: regularScript, uiSourceCode: regularUISourceCode},\n              {script: contentScript, uiSourceCode: contentUISourceCode}]) {\n      const rawLocations = await debuggerWorkspaceBinding.uiLocationToRawLocations(uiSourceCode, 0, 0);\n      assert.lengthOf(rawLocations, 1);\n      const [rawLocation] = rawLocations;\n      assert.strictEqual(rawLocation.script(), script);\n      const uiLocation = await debuggerWorkspaceBinding.rawLocationToUILocation(rawLocation);\n      assert.strictEqual(uiLocation!.uiSourceCode, uiSourceCode);\n    }\n  });\n\n  it('correctly marks known 3rdparty UISourceCodes', async () => {\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const scriptInfo = {\n      url: `${sourceRoot}/bundle.js`,\n      content: '1;\\n',\n    };\n    const sourceMapInfo = {\n      url: `${scriptInfo.url}.map`,\n      content: {\n        version: 3,\n        mappings: '',\n        sourceRoot,\n        sources: ['app.ts', 'lib.ts'],\n        ignoreList: [1],\n      },\n    };\n\n    await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/app.ts`, target).then(uiSourceCode => {\n        assert.isFalse(uiSourceCode.isKnownThirdParty(), '`app.ts` is not a known 3rdparty script');\n      }),\n      waitForUISourceCodeAdded(`${sourceRoot}/lib.ts`, target).then(uiSourceCode => {\n        assert.isTrue(uiSourceCode.isKnownThirdParty(), '`lib.ts` is a known 3rdparty script');\n      }),\n      backend.addScript(target, scriptInfo, sourceMapInfo),\n    ]);\n  });\n\n  it('correctly maps to inline <script>s with `//# sourceURL` annotations', async () => {\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const scriptInfo = {\n      url: `${sourceRoot}/test.out.js`,\n      content: 'function f(x) {\\n  console.log(x);\\n}\\n',\n      startLine: 4,\n      startOffset: 12,\n      hasSourceURL: true,\n    };\n    const sourceMapInfo = {\n      url: `${scriptInfo.url}.map`,\n      content: encodeSourceMap(\n          [\n            '0:0 => test.ts:0:0',\n            '1:0 => test.ts:1:0',\n            '1:2 => test.ts:1:2',\n            '2:0 => test.ts:2:0',\n          ],\n          sourceRoot),\n    };\n\n    const [uiSourceCode, script] = await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/test.ts`, target),\n      backend.addScript(target, scriptInfo, sourceMapInfo),\n    ]);\n\n    const rawLocations = await debuggerWorkspaceBinding.uiLocationToRawLocations(uiSourceCode, 1, 2);\n    assert.lengthOf(rawLocations, 1);\n    const [rawLocation] = rawLocations;\n    assert.strictEqual(rawLocation.script(), script);\n    assert.strictEqual(rawLocation.lineNumber, 1);\n    assert.strictEqual(rawLocation.columnNumber, 2);\n    const uiLocation = await debuggerWorkspaceBinding.rawLocationToUILocation(rawLocation);\n    assert.strictEqual(uiLocation!.uiSourceCode, uiSourceCode);\n    assert.strictEqual(uiLocation!.lineNumber, 1);\n    assert.strictEqual(uiLocation!.columnNumber, 2);\n  });\n\n  it('correctly removes UISourceCodes when detaching a sourcemap', async () => {\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const scriptInfo = {\n      url: `${sourceRoot}/test.out.js`,\n      content: '1\\n2\\n',\n    };\n    const sourceMapInfo = {\n      url: `${scriptInfo.url}.map`,\n      content: encodeSourceMap(\n          [\n            '0:0 => a.ts:0:0',\n            '1:0 => b.ts:1:0',\n          ],\n          sourceRoot),\n    };\n\n    const [, , script] = await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/a.ts`, target),\n      waitForUISourceCodeAdded(`${sourceRoot}/b.ts`, target),\n      backend.addScript(target, scriptInfo, sourceMapInfo),\n    ]);\n\n    script.debuggerModel.sourceMapManager().detachSourceMap(script);\n\n    assert.isNull(\n        workspace.uiSourceCodeForURL(`${sourceRoot}/a.ts` as Platform.DevToolsPath.UrlString),\n        '`a.ts` should not be around anymore');\n    assert.isNull(\n        workspace.uiSourceCodeForURL(`${sourceRoot}/b.ts` as Platform.DevToolsPath.UrlString),\n        '`b.ts` should not be around anymore');\n  });\n\n  it('correctly reports source-mapped lines', async () => {\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const scriptInfo = {\n      url: `${sourceRoot}/test.out.js`,\n      content: 'function f(x) {\\n  console.log(x);\\n}\\n',\n    };\n    const sourceMapInfo = {\n      url: `${scriptInfo.url}.map`,\n      content: encodeSourceMap(\n          [\n            '0:9 => test.ts:0:1',\n            '1:0 => test.ts:4:0',\n            '1:2 => test.ts:4:2',\n            '2:0 => test.ts:2:0',\n          ],\n          sourceRoot),\n    };\n\n    const [uiSourceCode] = await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/test.ts`, target),\n      backend.addScript(target, scriptInfo, sourceMapInfo),\n    ]);\n\n    const mappedLines = await debuggerWorkspaceBinding.getMappedLines(uiSourceCode);\n    assert.deepEqual(mappedLines, new Set([0, 2, 4]));\n  });\n\n  describe('supports modern Web development workflows', () => {\n    it('supports webpack code splitting', async () => {\n      // This is basically the \"Shared code with webpack entry point code-splitting\" scenario\n      // outlined in http://go/devtools-source-identities, where two routes (`route1.ts` and\n      // `route2.ts`) share some common code (`shared.ts`), and webpack is configured to spit\n      // out a dedicated bundle for each route (`route1.js` and `route2.js`). The demo can be\n      // found at https://devtools-source-identities.glitch.me/webpack-code-split/ for further\n      // reference.\n      const target = createTarget();\n      const sourceRoot = 'webpack:///src';\n\n      // Load the script and source map for the first route.\n      const route1ScriptInfo = {\n        url: 'http://example.com/route1.js',\n        content: 'function f(x){}\\nf(1)',\n      };\n      const route1SourceMapInfo = {\n        url: `${route1ScriptInfo.url}.map`,\n        content: encodeSourceMap(['0:0 => shared.ts:0:0', '1:0 => route1.ts:0:0'], sourceRoot),\n      };\n      const [route1UISourceCode, firstSharedUISourceCode, route1Script] = await Promise.all([\n        waitForUISourceCodeAdded(`${sourceRoot}/route1.ts`, target),\n        waitForUISourceCodeAdded(`${sourceRoot}/shared.ts`, target),\n        backend.addScript(target, route1ScriptInfo, route1SourceMapInfo),\n      ]);\n\n      // Both `route1.ts` and `shared.ts` are referred to only by `route1.js` at this point.\n      assert.deepEqual(await debuggerWorkspaceBinding.uiLocationToRawLocations(route1UISourceCode, 0), [\n        route1Script.debuggerModel.createRawLocation(route1Script, 1, 0),\n      ]);\n      assert.deepEqual(await debuggerWorkspaceBinding.uiLocationToRawLocations(firstSharedUISourceCode, 0), [\n        route1Script.debuggerModel.createRawLocation(route1Script, 0, 0),\n      ]);\n\n      // Load the script and source map for the second route. At this point a new `shared.ts` should\n      // appear, replacing the original `shared.ts` UISourceCode.\n      const route2ScriptInfo = {\n        url: 'http://example.com/route2.js',\n        content: 'function f(x){}\\nf(2)',\n      };\n      const route2SourceMapInfo = {\n        url: `${route2ScriptInfo.url}.map`,\n        content: encodeSourceMap(['0:0 => shared.ts:0:0', '1:0 => route2.ts:0:0'], sourceRoot),\n      };\n      const [route2UISourceCode, secondSharedUISourceCode, route2Script] = await Promise.all([\n        waitForUISourceCodeAdded(`${sourceRoot}/route2.ts`, target),\n        waitForUISourceCodeAdded(`${sourceRoot}/shared.ts`, target),\n        backend.addScript(target, route2ScriptInfo, route2SourceMapInfo),\n        waitForUISourceCodeRemoved(firstSharedUISourceCode),\n      ]);\n\n      // Now `route1.ts` is provided exclusively by `route1.js`...\n      const route1UILocation = route1UISourceCode.uiLocation(0, 0);\n      const route1Locations = await debuggerWorkspaceBinding.uiLocationToRawLocations(\n          route1UILocation.uiSourceCode, route1UILocation.lineNumber, route1UILocation.columnNumber);\n      assert.lengthOf(route1Locations, 1);\n      const [route1Location] = route1Locations;\n      assert.strictEqual(route1Location.script(), route1Script);\n      assert.deepEqual(await debuggerWorkspaceBinding.rawLocationToUILocation(route1Location), route1UILocation);\n\n      // ...and `route2.ts` is provided exclusively by `route2.js`...\n      const route2UILocation = route2UISourceCode.uiLocation(0, 0);\n      const route2Locations = await debuggerWorkspaceBinding.uiLocationToRawLocations(\n          route2UILocation.uiSourceCode, route2UILocation.lineNumber, route2UILocation.columnNumber);\n      assert.lengthOf(route2Locations, 1);\n      const [route2Location] = route2Locations;\n      assert.strictEqual(route2Location.script(), route2Script);\n      assert.deepEqual(await debuggerWorkspaceBinding.rawLocationToUILocation(route2Location), route2UILocation);\n\n      // ...but `shared.ts` is provided by both `route1.js` and `route2.js`.\n      const sharedUILocation = secondSharedUISourceCode.uiLocation(0, 0);\n      const sharedLocations = await debuggerWorkspaceBinding.uiLocationToRawLocations(\n          sharedUILocation.uiSourceCode, sharedUILocation.lineNumber, sharedUILocation.columnNumber);\n      assert.sameMembers(sharedLocations.map(location => location.script()), [route1Script, route2Script]);\n      for (const location of sharedLocations) {\n        assert.deepEqual(await debuggerWorkspaceBinding.rawLocationToUILocation(location), sharedUILocation);\n      }\n    });\n\n    it('supports webpack hot module replacement', async () => {\n      // This simulates the webpack HMR machinery, where originally a `bundle.js` is served,\n      // which includes embedded authored code for `lib.js` and `app.js`, both of which map\n      // to `bundle.js`. Later an update script is sent that replaces `app.js` with a newer\n      // version, while sending the same authored code for `lib.js` (presumably because the\n      // devserver figured the file might have changed). Now the initial `app.js` should be\n      // removed and `bundle.js` will have un-mapped locations for the `app.js` part. The\n      // new `app.js` will point to the update script. `lib.js` remains unchanged.\n      //\n      // This is a generalization of https://crbug.com/1403362 and http://crbug.com/1403432,\n      // which both present special cases of the general stale mapping problem.\n      const target = createTarget();\n      const sourceRoot = 'webpack:///src';\n\n      // Load the original bundle.\n      const originalScriptInfo = {\n        url: 'http://example.com/bundle.js',\n        content: 'const f = console.log;\\nf(\"Hello from the original bundle\");',\n      };\n      const originalSourceMapInfo = {\n        url: `${originalScriptInfo.url}.map`,\n        content: encodeSourceMap(\n            [\n              '0:0 => lib.js:0:0',\n              'lib.js: const f = console.log;',\n              '1:0 => app.js:0:0',\n              'app.js: f(\"Hello from the original bundle\")',\n            ],\n            sourceRoot),\n      };\n      const [originalLibUISourceCode, originalAppUISourceCode, originalScript] = await Promise.all([\n        waitForUISourceCodeAdded(`${sourceRoot}/lib.js`, target),\n        waitForUISourceCodeAdded(`${sourceRoot}/app.js`, target),\n        backend.addScript(target, originalScriptInfo, originalSourceMapInfo),\n      ]);\n\n      // Initially the original `bundle.js` maps to the original `app.js` and `lib.js`.\n      assert.deepEqual(\n          await debuggerWorkspaceBinding.rawLocationToUILocation(\n              originalScript.debuggerModel.createRawLocation(originalScript, 0, 0)),\n          originalLibUISourceCode.uiLocation(0, 0));\n      assert.deepEqual(\n          await debuggerWorkspaceBinding.rawLocationToUILocation(\n              originalScript.debuggerModel.createRawLocation(originalScript, 1, 0)),\n          originalAppUISourceCode.uiLocation(0, 0));\n\n      // Inject the HMR update script.\n      const updateScriptInfo = {\n        url: 'http://example.com/hot.update.1234.js',\n        content: 'f(\"Hello from the update\");',\n      };\n      const updateSourceMapInfo = {\n        url: `${updateScriptInfo.url}.map`,\n        content: encodeSourceMap(\n            [\n              '0:0 => app.js:0:0',\n              'lib.js: const f = console.log;',\n              'app.js: f(\"Hello from the update\")',\n            ],\n            sourceRoot),\n      };\n      const [updateAppUISourceCode, , updateScript] = await Promise.all([\n        waitForUISourceCodeAdded(`${sourceRoot}/app.js`, target),\n        // The original `app.js` should disappear as part of the HMR update.\n        waitForUISourceCodeRemoved(originalAppUISourceCode),\n        backend.addScript(target, updateScriptInfo, updateSourceMapInfo),\n      ]);\n\n      // Now we have a new `app.js`...\n      assert.notStrictEqual(updateAppUISourceCode, originalAppUISourceCode);\n      assert.isEmpty(await debuggerWorkspaceBinding.uiLocationToRawLocations(originalAppUISourceCode, 0, 0));\n      assert.deepEqual(await debuggerWorkspaceBinding.uiLocationToRawLocations(updateAppUISourceCode, 0, 0), [\n        updateScript.debuggerModel.createRawLocation(updateScript, 0, 0),\n      ]);\n\n      // ...and the `app.js` mapping of the `bundle.js` is now gone...\n      const {uiSourceCode} = (await debuggerWorkspaceBinding.rawLocationToUILocation(\n          originalScript.debuggerModel.createRawLocation(originalScript, 1, 0)))!;\n      assert.notStrictEqual(uiSourceCode, originalAppUISourceCode);\n      assert.notStrictEqual(uiSourceCode, updateAppUISourceCode);\n\n      // ...while the `lib.js` mapping of `bundle.js` is still intact (because it\n      // was the same content).\n      assert.deepEqual(\n          await debuggerWorkspaceBinding.rawLocationToUILocation(\n              originalScript.debuggerModel.createRawLocation(originalScript, 0, 0)),\n          originalLibUISourceCode.uiLocation(0, 0));\n    });\n  });\n\n  it('assumes UTF-8 encoding for source files embedded in source maps', async () => {\n    const target = createTarget();\n\n    const sourceRoot = 'http://example.com';\n    const sourceContent = 'console.log(\"Ahoj svÄ›te!\");';\n    const scriptInfo = {\n      url: `${sourceRoot}/script.min.js`,\n      content: sourceContent,\n    };\n    const sourceMapInfo = {\n      url: `${scriptInfo.url}.map`,\n      content: {version: 3, mappings: '', sources: ['script.js'], sourcesContent: [sourceContent], sourceRoot},\n    };\n    const [uiSourceCode] = await Promise.all([\n      waitForUISourceCodeAdded(`${sourceRoot}/script.js`, target),\n      backend.addScript(target, scriptInfo, sourceMapInfo),\n    ]);\n\n    const metadata = await uiSourceCode.requestMetadata();\n    assert.notStrictEqual(metadata?.contentSize, sourceContent.length);\n    const sourceUTF8 = new TextEncoder().encode(sourceContent);\n    assert.strictEqual(metadata?.contentSize, sourceUTF8.length);\n  });\n});\n"]}