{"version":3,"file":"FederatedAuthUserInfoRequestIssue.test.js","sourceRoot":"","sources":["../../../../../../front_end/models/issues_manager/FederatedAuthUserInfoRequestIssue.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAI7B,OAAO,EAAC,kBAAkB,EAAC,MAAM,qCAAqC,CAAC;AACvE,OAAO,EAAC,eAAe,EAAC,MAAM,kCAAkC,CAAC;AACjE,OAAO,KAAK,aAAa,MAAM,qCAAqC,CAAC;AAErE,SAAS,mBAAmB,CACxB,wCAAkG;IAEpG,OAAO;QACL,IAAI,gHAAsE;QAC1E,OAAO,EAAE,EAAC,wCAAwC,EAAC;KACpD,CAAC;AACJ,CAAC;AAED,kBAAkB,CAAC,mCAAmC,EAAE,GAAG,EAAE;IAC3D,MAAM,SAAS,GAAG,IAAI,eAAe,CAAC,EAAE,CAA2C,CAAC;IAEpF,EAAE,CAAC,0CAA0C,EAAE,GAAG,EAAE;QAClD,MAAM,YAAY,GAAG;;;;;;;;;;SAUpB,CAAC;QACF,KAAK,MAAM,WAAW,IAAI,YAAY,EAAE,CAAC;YACvC,MAAM,YAAY,GAAG;gBACnB,uCAAuC,EAAE,WAAW;aACrD,CAAC;YACF,MAAM,KAAK,GAAG,mBAAmB,CAAC,YAAY,CAAC,CAAC;YAChD,MAAM,kCAAkC,GACpC,aAAa,CAAC,iCAAiC,CAAC,iCAAiC,CAAC,kBAAkB,CAChG,SAAS,EAAE,KAAK,CAAC,CAAC;YAC1B,MAAM,CAAC,QAAQ,CAAC,kCAAkC,EAAE,CAAC,CAAC,CAAC;YACvD,MAAM,iCAAiC,GAAG,kCAAkC,CAAC,CAAC,CAAC,CAAC;YAEhF,MAAM,CAAC,WAAW,CAAC,iCAAiC,CAAC,WAAW,EAAE,wDAA0C,CAAC;YAC7G,MAAM,CAAC,eAAe,CAAC,iCAAiC,CAAC,OAAO,EAAE,EAAE,YAAY,CAAC,CAAC;YAClF,MAAM,CAAC,WAAW,CAAC,iCAAiC,CAAC,OAAO,EAAE,4DAA0C,CAAC;YACzG,MAAM,CAAC,SAAS,CAAC,iCAAiC,CAAC,cAAc,EAAE,CAAC,CAAC;QACvE,CAAC;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport {describeWithLocale} from '../../testing/EnvironmentHelpers.js';\nimport {MockIssuesModel} from '../../testing/MockIssuesModel.js';\nimport * as IssuesManager from '../issues_manager/issues_manager.js';\n\nfunction createProtocolIssue(\n    federatedAuthUserInfoRequestIssueDetails: Protocol.Audits.FederatedAuthUserInfoRequestIssueDetails):\n    Protocol.Audits.InspectorIssue {\n  return {\n    code: Protocol.Audits.InspectorIssueCode.FederatedAuthUserInfoRequestIssue,\n    details: {federatedAuthUserInfoRequestIssueDetails},\n  };\n}\n\ndescribeWithLocale('FederatedAuthUserInfoRequestIssue', () => {\n  const mockModel = new MockIssuesModel([]) as unknown as SDK.IssuesModel.IssuesModel;\n\n  it('can be created for various error reasons', () => {\n    const errorReasons = [\n      Protocol.Audits.FederatedAuthUserInfoRequestIssueReason.NotSameOrigin,\n      Protocol.Audits.FederatedAuthUserInfoRequestIssueReason.NotIframe,\n      Protocol.Audits.FederatedAuthUserInfoRequestIssueReason.NotPotentiallyTrustworthy,\n      Protocol.Audits.FederatedAuthUserInfoRequestIssueReason.NoAPIPermission,\n      Protocol.Audits.FederatedAuthUserInfoRequestIssueReason.NotSignedInWithIdp,\n      Protocol.Audits.FederatedAuthUserInfoRequestIssueReason.NoAccountSharingPermission,\n      Protocol.Audits.FederatedAuthUserInfoRequestIssueReason.InvalidConfigOrWellKnown,\n      Protocol.Audits.FederatedAuthUserInfoRequestIssueReason.InvalidAccountsResponse,\n      Protocol.Audits.FederatedAuthUserInfoRequestIssueReason.NoReturningUserFromFetchedAccounts,\n    ];\n    for (const errorReason of errorReasons) {\n      const issueDetails = {\n        federatedAuthUserInfoRequestIssueReason: errorReason,\n      };\n      const issue = createProtocolIssue(issueDetails);\n      const federatedAuthUserInfoRequestIssues =\n          IssuesManager.FederatedAuthUserInfoRequestIssue.FederatedAuthUserInfoRequestIssue.fromInspectorIssue(\n              mockModel, issue);\n      assert.lengthOf(federatedAuthUserInfoRequestIssues, 1);\n      const federatedAuthUserInfoRequestIssue = federatedAuthUserInfoRequestIssues[0];\n\n      assert.strictEqual(federatedAuthUserInfoRequestIssue.getCategory(), IssuesManager.Issue.IssueCategory.Other);\n      assert.deepStrictEqual(federatedAuthUserInfoRequestIssue.details(), issueDetails);\n      assert.strictEqual(federatedAuthUserInfoRequestIssue.getKind(), IssuesManager.Issue.IssueKind.PageError);\n      assert.isNotNull(federatedAuthUserInfoRequestIssue.getDescription());\n    }\n  });\n});\n"]}