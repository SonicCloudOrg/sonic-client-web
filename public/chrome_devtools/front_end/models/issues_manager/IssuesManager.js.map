{"version":3,"file":"IssuesManager.js","sourceRoot":"","sources":["../../../../../../front_end/models/issues_manager/IssuesManager.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport {AttributionReportingIssue} from './AttributionReportingIssue.js';\nimport {BounceTrackingIssue} from './BounceTrackingIssue.js';\nimport {ClientHintIssue} from './ClientHintIssue.js';\nimport {ContentSecurityPolicyIssue} from './ContentSecurityPolicyIssue.js';\nimport {CookieDeprecationMetadataIssue} from './CookieDeprecationMetadataIssue.js';\nimport {CookieIssue} from './CookieIssue.js';\nimport {CorsIssue} from './CorsIssue.js';\nimport {CrossOriginEmbedderPolicyIssue, isCrossOriginEmbedderPolicyIssue} from './CrossOriginEmbedderPolicyIssue.js';\nimport {DeprecationIssue} from './DeprecationIssue.js';\nimport {FederatedAuthRequestIssue} from './FederatedAuthRequestIssue.js';\nimport {GenericIssue} from './GenericIssue.js';\nimport {HeavyAdIssue} from './HeavyAdIssue.js';\nimport {type Issue, type IssueKind} from './Issue.js';\nimport {Events} from './IssuesManagerEvents.js';\nimport {LowTextContrastIssue} from './LowTextContrastIssue.js';\nimport {MixedContentIssue} from './MixedContentIssue.js';\nimport {PropertyRuleIssue} from './PropertyRuleIssue.js';\nimport {QuirksModeIssue} from './QuirksModeIssue.js';\nimport {SharedArrayBufferIssue} from './SharedArrayBufferIssue.js';\nimport {SharedDictionaryIssue} from './SharedDictionaryIssue.js';\nimport {SourceFrameIssuesManager} from './SourceFrameIssuesManager.js';\nimport {StylesheetLoadingIssue} from './StylesheetLoadingIssue.js';\n\nexport {Events} from './IssuesManagerEvents.js';\n\nlet issuesManagerInstance: IssuesManager|null = null;\n\nfunction createIssuesForBlockedByResponseIssue(\n    issuesModel: SDK.IssuesModel.IssuesModel,\n    inspectorIssue: Protocol.Audits.InspectorIssue): CrossOriginEmbedderPolicyIssue[] {\n  const blockedByResponseIssueDetails = inspectorIssue.details.blockedByResponseIssueDetails;\n  if (!blockedByResponseIssueDetails) {\n    console.warn('BlockedByResponse issue without details received.');\n    return [];\n  }\n  if (isCrossOriginEmbedderPolicyIssue(blockedByResponseIssueDetails.reason)) {\n    return [new CrossOriginEmbedderPolicyIssue(blockedByResponseIssueDetails, issuesModel)];\n  }\n  return [];\n}\n\nconst issueCodeHandlers = new Map<\n    Protocol.Audits.InspectorIssueCode,\n    (model: SDK.IssuesModel.IssuesModel, inspectorIssue: Protocol.Audits.InspectorIssue) => Issue[]>([\n  [\n    Protocol.Audits.InspectorIssueCode.CookieIssue,\n    CookieIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.MixedContentIssue,\n    MixedContentIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.HeavyAdIssue,\n    HeavyAdIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.ContentSecurityPolicyIssue,\n    ContentSecurityPolicyIssue.fromInspectorIssue,\n  ],\n  [Protocol.Audits.InspectorIssueCode.BlockedByResponseIssue, createIssuesForBlockedByResponseIssue],\n  [\n    Protocol.Audits.InspectorIssueCode.SharedArrayBufferIssue,\n    SharedArrayBufferIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.SharedDictionaryIssue,\n    SharedDictionaryIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.LowTextContrastIssue,\n    LowTextContrastIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.CorsIssue,\n    CorsIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.QuirksModeIssue,\n    QuirksModeIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.AttributionReportingIssue,\n    AttributionReportingIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.GenericIssue,\n    GenericIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.DeprecationIssue,\n    DeprecationIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.ClientHintIssue,\n    ClientHintIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.FederatedAuthRequestIssue,\n    FederatedAuthRequestIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.BounceTrackingIssue,\n    BounceTrackingIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.StylesheetLoadingIssue,\n    StylesheetLoadingIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.PropertyRuleIssue,\n    PropertyRuleIssue.fromInspectorIssue,\n  ],\n  [\n    Protocol.Audits.InspectorIssueCode.CookieDeprecationMetadataIssue,\n    CookieDeprecationMetadataIssue.fromInspectorIssue,\n  ],\n]);\n\n/**\n * Each issue reported by the backend can result in multiple `Issue` instances.\n * Handlers are simple functions hard-coded into a map.\n */\nfunction createIssuesFromProtocolIssue(\n    issuesModel: SDK.IssuesModel.IssuesModel, inspectorIssue: Protocol.Audits.InspectorIssue): Issue[] {\n  const handler = issueCodeHandlers.get(inspectorIssue.code);\n  if (handler) {\n    return handler(issuesModel, inspectorIssue);\n  }\n  console.warn(`No handler registered for issue code ${inspectorIssue.code}`);\n  return [];\n}\n\nexport interface IssuesManagerCreationOptions {\n  forceNew: boolean;\n  /** Throw an error if this is not the first instance created */\n  ensureFirst: boolean;\n  showThirdPartyIssuesSetting?: Common.Settings.Setting<boolean>;\n  hideIssueSetting?: Common.Settings.Setting<HideIssueMenuSetting>;\n}\n\nexport type HideIssueMenuSetting = {\n  [x: string]: IssueStatus,\n};\n\nexport const enum IssueStatus {\n  Hidden = 'Hidden',\n  Unhidden = 'Unhidden',\n}\n\nexport function defaultHideIssueByCodeSetting(): HideIssueMenuSetting {\n  const setting: HideIssueMenuSetting = {};\n  return setting;\n}\n\nexport function getHideIssueByCodeSetting(): Common.Settings.Setting<HideIssueMenuSetting> {\n  return Common.Settings.Settings.instance().createSetting(\n      'hide-issue-by-code-setting-experiment-2021', defaultHideIssueByCodeSetting());\n}\n\n/**\n * The `IssuesManager` is the central storage for issues. It collects issues from all the\n * `IssuesModel` instances in the page, and deduplicates them wrt their primary key.\n * It also takes care of clearing the issues when it sees a main-frame navigated event.\n * Any client can subscribe to the events provided, and/or query the issues via the public\n * interface.\n *\n * Additionally, the `IssuesManager` can filter Issues. All Issues are stored, but only\n * Issues that are accepted by the filter cause events to be fired or are returned by\n * `IssuesManager#issues()`.\n */\nexport class IssuesManager extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements\n    SDK.TargetManager.SDKModelObserver<SDK.IssuesModel.IssuesModel> {\n  #eventListeners = new WeakMap<SDK.IssuesModel.IssuesModel, Common.EventTarget.EventDescriptor>();\n  #allIssues = new Map<string, Issue>();\n  #filteredIssues = new Map<string, Issue>();\n  #issueCounts = new Map<IssueKind, number>();\n  #hiddenIssueCount = new Map<IssueKind, number>();\n  #hasSeenPrimaryPageChanged = false;\n  #issuesById: Map<string, Issue> = new Map();\n  #issuesByOutermostTarget: WeakMap<SDK.Target.Target, Set<Issue>> = new Map();\n\n  constructor(\n      private readonly showThirdPartyIssuesSetting?: Common.Settings.Setting<boolean>,\n      private readonly hideIssueSetting?: Common.Settings.Setting<HideIssueMenuSetting>) {\n    super();\n    new SourceFrameIssuesManager(this);\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.IssuesModel.IssuesModel, this);\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.PrimaryPageChanged,\n        this.#onPrimaryPageChanged, this);\n    SDK.FrameManager.FrameManager.instance().addEventListener(\n        SDK.FrameManager.Events.FrameAddedToTarget, this.#onFrameAddedToTarget, this);\n\n    // issueFilter uses the 'show-third-party-issues' setting. Clients of IssuesManager need\n    // a full update when the setting changes to get an up-to-date issues list.\n    this.showThirdPartyIssuesSetting?.addChangeListener(() => this.#updateFilteredIssues());\n    this.hideIssueSetting?.addChangeListener(() => this.#updateFilteredIssues());\n    SDK.TargetManager.TargetManager.instance().observeTargets(\n        {\n          targetAdded: (target: SDK.Target.Target) => {\n            if (target.outermostTarget() === target) {\n              this.#updateFilteredIssues();\n            }\n          },\n          targetRemoved: (_: SDK.Target.Target) => {},\n        },\n        {scoped: true});\n  }\n\n  static instance(opts: IssuesManagerCreationOptions = {\n    forceNew: false,\n    ensureFirst: false,\n  }): IssuesManager {\n    if (issuesManagerInstance && opts.ensureFirst) {\n      throw new Error(\n          'IssuesManager was already created. Either set \"ensureFirst\" to false or make sure that this invocation is really the first one.');\n    }\n\n    if (!issuesManagerInstance || opts.forceNew) {\n      issuesManagerInstance = new IssuesManager(opts.showThirdPartyIssuesSetting, opts.hideIssueSetting);\n    }\n\n    return issuesManagerInstance;\n  }\n\n  static removeInstance(): void {\n    issuesManagerInstance = null;\n  }\n\n  /**\n   * Once we have seen at least one `PrimaryPageChanged` event, we can be reasonably sure\n   * that we also collected issues that were reported during the navigation to the current\n   * page. If we haven't seen a main frame navigated, we might have missed issues that arose\n   * during navigation.\n   */\n  reloadForAccurateInformationRequired(): boolean {\n    return !this.#hasSeenPrimaryPageChanged;\n  }\n\n  #onPrimaryPageChanged(\n      event: Common.EventTarget.EventTargetEvent<\n          {frame: SDK.ResourceTreeModel.ResourceTreeFrame, type: SDK.ResourceTreeModel.PrimaryPageChangeType}>): void {\n    const {frame, type} = event.data;\n    const keptIssues = new Map<string, Issue>();\n    for (const [key, issue] of this.#allIssues.entries()) {\n      if (issue.isAssociatedWithRequestId(frame.loaderId)) {\n        keptIssues.set(key, issue);\n        // Keep issues for prerendered target alive in case of prerender-activation.\n      } else if (\n          (type === SDK.ResourceTreeModel.PrimaryPageChangeType.Activation) &&\n          (frame.resourceTreeModel().target() === issue.model()?.target())) {\n        keptIssues.set(key, issue);\n        // Keep BounceTrackingIssues alive for non-user-initiated navigations.\n      } else if (\n          issue.code() === Protocol.Audits.InspectorIssueCode.BounceTrackingIssue ||\n          issue.code() === Protocol.Audits.InspectorIssueCode.CookieIssue) {\n        const networkManager = frame.resourceTreeModel().target().model(SDK.NetworkManager.NetworkManager);\n        if (networkManager?.requestForLoaderId(frame.loaderId as Protocol.Network.LoaderId)?.hasUserGesture() ===\n            false) {\n          keptIssues.set(key, issue);\n        }\n      }\n    }\n    this.#allIssues = keptIssues;\n    this.#hasSeenPrimaryPageChanged = true;\n    this.#updateFilteredIssues();\n  }\n\n  #onFrameAddedToTarget(event: Common.EventTarget.EventTargetEvent<{frame: SDK.ResourceTreeModel.ResourceTreeFrame}>):\n      void {\n    const {frame} = event.data;\n    // Determining third-party status usually requires the registered domain of the outermost frame.\n    // When DevTools is opened after navigation has completed, issues may be received\n    // before the outermost frame is available. Thus, we trigger a recalcuation of third-party-ness\n    // when we attach to the outermost frame.\n    if (frame.isOutermostFrame() && SDK.TargetManager.TargetManager.instance().isInScope(frame.resourceTreeModel())) {\n      this.#updateFilteredIssues();\n    }\n  }\n\n  modelAdded(issuesModel: SDK.IssuesModel.IssuesModel): void {\n    const listener = issuesModel.addEventListener(SDK.IssuesModel.Events.IssueAdded, this.#onIssueAddedEvent, this);\n    this.#eventListeners.set(issuesModel, listener);\n  }\n\n  modelRemoved(issuesModel: SDK.IssuesModel.IssuesModel): void {\n    const listener = this.#eventListeners.get(issuesModel);\n    if (listener) {\n      Common.EventTarget.removeEventListeners([listener]);\n    }\n  }\n\n  #onIssueAddedEvent(event: Common.EventTarget.EventTargetEvent<SDK.IssuesModel.IssueAddedEvent>): void {\n    const {issuesModel, inspectorIssue} = event.data;\n    const issues = createIssuesFromProtocolIssue(issuesModel, inspectorIssue);\n    for (const issue of issues) {\n      this.addIssue(issuesModel, issue);\n      const message = issue.maybeCreateConsoleMessage();\n      if (message) {\n        issuesModel.target().model(SDK.ConsoleModel.ConsoleModel)?.addMessage(message);\n      }\n    }\n  }\n\n  addIssue(issuesModel: SDK.IssuesModel.IssuesModel, issue: Issue): void {\n    // Ignore issues without proper description; they are invisible to the user and only cause confusion.\n    if (!issue.getDescription()) {\n      return;\n    }\n    const primaryKey = issue.primaryKey();\n    if (this.#allIssues.has(primaryKey)) {\n      return;\n    }\n    this.#allIssues.set(primaryKey, issue);\n\n    const outermostTarget = issuesModel.target().outermostTarget();\n    if (outermostTarget) {\n      let issuesForTarget = this.#issuesByOutermostTarget.get(outermostTarget);\n      if (!issuesForTarget) {\n        issuesForTarget = new Set();\n        this.#issuesByOutermostTarget.set(outermostTarget, issuesForTarget);\n      }\n      issuesForTarget.add(issue);\n    }\n    if (this.#issueFilter(issue)) {\n      this.#filteredIssues.set(primaryKey, issue);\n      this.#issueCounts.set(issue.getKind(), 1 + (this.#issueCounts.get(issue.getKind()) || 0));\n      const issueId = issue.getIssueId();\n      if (issueId) {\n        this.#issuesById.set(issueId, issue);\n      }\n      const values = this.hideIssueSetting?.get();\n      this.#updateIssueHiddenStatus(issue, values);\n      if (issue.isHidden()) {\n        this.#hiddenIssueCount.set(issue.getKind(), 1 + (this.#hiddenIssueCount.get(issue.getKind()) || 0));\n      }\n      this.dispatchEventToListeners(Events.IssueAdded, {issuesModel, issue});\n    }\n    // Always fire the \"count\" event even if the issue was filtered out.\n    // The result of `hasOnlyThirdPartyIssues` could still change.\n    this.dispatchEventToListeners(Events.IssuesCountUpdated);\n  }\n\n  issues(): Iterable<Issue> {\n    return this.#filteredIssues.values();\n  }\n\n  numberOfIssues(kind?: IssueKind): number {\n    if (kind) {\n      return (this.#issueCounts.get(kind) ?? 0) - this.numberOfHiddenIssues(kind);\n    }\n    return this.#filteredIssues.size - this.numberOfHiddenIssues();\n  }\n\n  numberOfHiddenIssues(kind?: IssueKind): number {\n    if (kind) {\n      return this.#hiddenIssueCount.get(kind) ?? 0;\n    }\n    let count = 0;\n    for (const num of this.#hiddenIssueCount.values()) {\n      count += num;\n    }\n    return count;\n  }\n\n  numberOfAllStoredIssues(): number {\n    return this.#allIssues.size;\n  }\n\n  #issueFilter(issue: Issue): boolean {\n    const scopeTarget = SDK.TargetManager.TargetManager.instance().scopeTarget();\n    if (!scopeTarget) {\n      return false;\n    }\n    if (!this.#issuesByOutermostTarget.get(scopeTarget)?.has(issue)) {\n      return false;\n    }\n    return this.showThirdPartyIssuesSetting?.get() || !issue.isCausedByThirdParty();\n  }\n\n  #updateIssueHiddenStatus(issue: Issue, values: HideIssueMenuSetting|undefined): void {\n    const code = issue.code();\n    // All issues are hidden via their code.\n    // For hiding we check whether the issue code is present and has a value of IssueStatus.Hidden\n    // assosciated with it. If all these conditions are met the issue is hidden.\n    // IssueStatus is set in hidden issues menu.\n    // In case a user wants to hide a specific issue, the issue code is added to \"code\" section\n    // of our setting and its value is set to IssueStatus.Hidden. Then issue then gets hidden.\n    if (values && values[code]) {\n      if (values[code] === IssueStatus.Hidden) {\n        issue.setHidden(true);\n        return;\n      }\n      issue.setHidden(false);\n      return;\n    }\n  }\n\n  #updateFilteredIssues(): void {\n    this.#filteredIssues.clear();\n    this.#issueCounts.clear();\n    this.#issuesById.clear();\n    this.#hiddenIssueCount.clear();\n    const values = this.hideIssueSetting?.get();\n    for (const [key, issue] of this.#allIssues) {\n      if (this.#issueFilter(issue)) {\n        this.#updateIssueHiddenStatus(issue, values);\n        this.#filteredIssues.set(key, issue);\n        this.#issueCounts.set(issue.getKind(), 1 + (this.#issueCounts.get(issue.getKind()) ?? 0));\n        if (issue.isHidden()) {\n          this.#hiddenIssueCount.set(issue.getKind(), 1 + (this.#hiddenIssueCount.get(issue.getKind()) || 0));\n        }\n        const issueId = issue.getIssueId();\n        if (issueId) {\n          this.#issuesById.set(issueId, issue);\n        }\n      }\n    }\n    this.dispatchEventToListeners(Events.FullUpdateRequired);\n    this.dispatchEventToListeners(Events.IssuesCountUpdated);\n  }\n\n  unhideAllIssues(): void {\n    for (const issue of this.#allIssues.values()) {\n      issue.setHidden(false);\n    }\n    this.hideIssueSetting?.set(defaultHideIssueByCodeSetting());\n  }\n\n  getIssueById(id: string): Issue|undefined {\n    return this.#issuesById.get(id);\n  }\n}\n\nexport interface IssueAddedEvent {\n  issuesModel: SDK.IssuesModel.IssuesModel;\n  issue: Issue;\n}\n\nexport type EventTypes = {\n  [Events.IssuesCountUpdated]: void,\n  [Events.FullUpdateRequired]: void,\n  [Events.IssueAdded]: IssueAddedEvent,\n};\n\n// @ts-ignore\nglobalThis.addIssueForTest = (issue: Protocol.Audits.InspectorIssue) => {\n  const mainTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n  const issuesModel = mainTarget?.model(SDK.IssuesModel.IssuesModel);\n  issuesModel?.issueAdded({issue});\n};\n"]}