{"version":3,"file":"LoggingConfig.test.js","sourceRoot":"","sources":["../../../../../../front_end/ui/visual_logging/LoggingConfig.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as VisualLogging from './visual_logging-testing.js';\n\ndescribe('LoggingConfig', () => {\n  let element: Element;\n\n  beforeEach(() => {\n    element = document.createElement('div');\n  });\n\n  it('identifies if element needs logging', () => {\n    assert.isFalse(VisualLogging.LoggingConfig.needsLogging(element));\n\n    element.setAttribute('jslog', 'TreeItem');\n    assert.isTrue(VisualLogging.LoggingConfig.needsLogging(element));\n  });\n\n  describe('reads simple logging config', () => {\n    it('for TreeItem', () => {\n      element.setAttribute('jslog', 'TreeItem');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.ve, 1);\n    });\n\n    it('for TextField', () => {\n      element.setAttribute('jslog', 'TextField');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.ve, 8);\n    });\n\n    it('for Action', () => {\n      element.setAttribute('jslog', 'Action');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.ve, 29);\n    });\n\n    it('for Preview', () => {\n      element.setAttribute('jslog', 'Preview');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.ve, 35);\n    });\n\n    it('for Panel', () => {\n      element.setAttribute('jslog', 'Panel');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.ve, 48);\n    });\n\n    it('for TableHeader', () => {\n      element.setAttribute('jslog', 'TableHeader');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.ve, 69);\n    });\n\n    it('for TableCell', () => {\n      element.setAttribute('jslog', 'TableCell');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.ve, 70);\n    });\n  });\n\n  it('throws on unknown visual element', () => {\n    element.setAttribute('jslog', 'NonExistentVisualElement');\n    assert.throws(() => VisualLogging.LoggingConfig.getLoggingConfig(element));\n  });\n\n  it('can parse complex track attribute', () => {\n    element.setAttribute('jslog', 'TreeItem; track:click, keydown: :|Enter; context:42');\n    const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n    assert.deepEqual(config.track, {click: true, keydown: ':|Enter'});\n  });\n\n  describe('can parse simple context attribute', () => {\n    it('for TreeItem', () => {\n      element.setAttribute('jslog', 'TreeItem;context:42');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.context, '42');\n    });\n\n    it('for Action', () => {\n      element.setAttribute('jslog', 'Action;context:console.clear');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.context, 'console.clear');\n    });\n\n    it('for Panel', () => {\n      element.setAttribute('jslog', 'Panel;context:developer-resources');\n      const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n      assert.strictEqual(config.context, 'developer-resources');\n    });\n  });\n\n  it('can parse parent attribute', () => {\n    element.setAttribute('jslog', 'TreeItem;parent:customProvider');\n    const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n    assert.strictEqual(config.parent, 'customProvider');\n  });\n\n  it('ignores whitespaces while parsing', () => {\n    element.setAttribute('jslog', 'TreeItem;     context:   42');\n    const config = VisualLogging.LoggingConfig.getLoggingConfig(element);\n    assert.strictEqual(config.context, '42');\n  });\n\n  it('builds a string config', () => {\n    const treeItem = VisualLogging.LoggingConfig.makeConfigStringBuilder.bind(null, 'TreeItem');\n    assert.strictEqual(`${treeItem()}`, 'TreeItem');\n    assert.strictEqual(`${treeItem().context(42)}`, 'TreeItem; context: 42');\n    assert.strictEqual(`${treeItem().track({click: true})}`, 'TreeItem; track: click');\n    assert.strictEqual(`${treeItem().track({click: true, change: true})}`, 'TreeItem; track: click, change');\n    assert.strictEqual(`${treeItem().track({keydown: 'Enter'})}`, 'TreeItem; track: keydown: Enter');\n    assert.strictEqual(\n        `${treeItem().context(42).track({keydown: 'Enter'})}`, 'TreeItem; context: 42; track: keydown: Enter');\n  });\n});\n"]}