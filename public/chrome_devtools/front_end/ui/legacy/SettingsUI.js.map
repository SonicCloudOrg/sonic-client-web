{"version":3,"file":"SettingsUI.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/SettingsUI.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2014 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Settings from '../components/settings/settings.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {InspectorView} from './InspectorView.js';\nimport {Tooltip} from './Tooltip.js';\nimport {CheckboxLabel, createOption} from './UIUtils.js';\n\nconst UIStrings = {\n  /**\n   *@description Note when a setting change will require the user to reload DevTools\n   */\n  srequiresReload: '*Requires reload',\n  /**\n   *@description Message to display if a setting change requires a reload of DevTools\n   */\n  oneOrMoreSettingsHaveChanged: 'One or more settings have changed which requires a reload to take effect.',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/SettingsUI.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport const createSettingCheckbox = function(\n    name: string, setting: Common.Settings.Setting<boolean>, omitParagraphElement?: boolean,\n    tooltip?: string): Element {\n  const label = CheckboxLabel.create(name, undefined, undefined, setting.name);\n  if (tooltip) {\n    Tooltip.install(label, tooltip);\n  }\n\n  const input = label.checkboxElement;\n  input.name = name;\n  bindCheckbox(input, setting);\n\n  if (omitParagraphElement) {\n    return label;\n  }\n\n  const p = document.createElement('p');\n  p.appendChild(label);\n  return p;\n};\n\nconst createSettingSelect = function(\n    name: string, options: Common.Settings.SimpleSettingOption[], requiresReload: boolean|null,\n    setting: Common.Settings.Setting<unknown>, subtitle?: string): HTMLElement {\n  const container = document.createElement('div');\n  const settingSelectElement = container.createChild('p');\n  settingSelectElement.classList.add('settings-select');\n  const label = settingSelectElement.createChild('label');\n  const select = (settingSelectElement.createChild('select', 'chrome-select') as HTMLSelectElement);\n  label.textContent = name;\n  if (subtitle) {\n    container.classList.add('chrome-select-label');\n    label.createChild('p').textContent = subtitle;\n  }\n  select.setAttribute('jslog', `${VisualLogging.dropDown().track({change: true}).context(setting.name)}`);\n  ARIAUtils.bindLabelToControl(label, select);\n\n  for (const option of options) {\n    if (option.text && typeof option.value === 'string') {\n      select.add(createOption(option.text, option.value, Platform.StringUtilities.toKebabCase(option.value)));\n    }\n  }\n\n  let reloadWarning: HTMLElement|(Element | null) = (null as Element | null);\n  if (requiresReload) {\n    reloadWarning = container.createChild('span', 'reload-warning hidden');\n    reloadWarning.textContent = i18nString(UIStrings.srequiresReload);\n    ARIAUtils.markAsAlert(reloadWarning);\n  }\n\n  const {deprecation} = setting;\n  if (deprecation) {\n    const warning = new Settings.SettingDeprecationWarning.SettingDeprecationWarning();\n    warning.data = deprecation;\n    label.appendChild(warning);\n  }\n\n  setting.addChangeListener(settingChanged);\n  settingChanged();\n  select.addEventListener('change', selectChanged, false);\n  return container;\n\n  function settingChanged(): void {\n    const newValue = setting.get();\n    for (let i = 0; i < options.length; i++) {\n      if (options[i].value === newValue) {\n        select.selectedIndex = i;\n      }\n    }\n    select.disabled = setting.disabled();\n  }\n\n  function selectChanged(): void {\n    // Don't use event.target.value to avoid conversion of the value to string.\n    setting.set(options[select.selectedIndex].value);\n    if (reloadWarning) {\n      reloadWarning.classList.remove('hidden');\n      InspectorView.instance().displayReloadRequiredWarning(i18nString(UIStrings.oneOrMoreSettingsHaveChanged));\n    }\n  }\n};\n\nexport const bindCheckbox = function(\n    inputElement: Element, setting: Common.Settings.Setting<boolean>, metric?: UserMetricOptions): void {\n  const input = (inputElement as HTMLInputElement);\n  function settingChanged(): void {\n    if (input.checked !== setting.get()) {\n      input.checked = setting.get();\n    }\n  }\n  setting.addChangeListener(settingChanged);\n  settingChanged();\n\n  function inputChanged(): void {\n    if (setting.get() !== input.checked) {\n      setting.set(input.checked);\n    }\n\n    if (setting.get() && metric?.enable) {\n      Host.userMetrics.actionTaken(metric.enable);\n    }\n\n    if (!setting.get() && metric?.disable) {\n      Host.userMetrics.actionTaken(metric.disable);\n    }\n\n    if (metric?.toggle) {\n      Host.userMetrics.actionTaken(metric.toggle);\n    }\n  }\n\n  input.addEventListener('change', inputChanged, false);\n};\n\nexport const createCustomSetting = function(name: string, element: Element): Element {\n  const p = document.createElement('p');\n  p.classList.add('settings-select');\n  const label = p.createChild('label');\n  label.textContent = name;\n  ARIAUtils.bindLabelToControl(label, element);\n  p.appendChild(element);\n  return p;\n};\n\nexport const createControlForSetting = function(\n    setting: Common.Settings.Setting<unknown>, subtitle?: string): HTMLElement|null {\n  const uiTitle = setting.title();\n  switch (setting.type()) {\n    case Common.Settings.SettingType.BOOLEAN: {\n      const component = new Settings.SettingCheckbox.SettingCheckbox();\n      component.data = {\n        setting: setting as Common.Settings.Setting<boolean>,\n      };\n      component.onchange = () => {\n        if (setting.reloadRequired()) {\n          InspectorView.instance().displayReloadRequiredWarning(i18nString(UIStrings.oneOrMoreSettingsHaveChanged));\n        }\n      };\n      return component;\n    }\n    case Common.Settings.SettingType.ENUM:\n      if (Array.isArray(setting.options())) {\n        return createSettingSelect(uiTitle, setting.options(), setting.reloadRequired(), setting, subtitle);\n      }\n      console.error('Enum setting defined without options');\n      return null;\n    default:\n      console.error('Invalid setting type: ' + setting.type());\n      return null;\n  }\n};\n\nexport interface SettingUI {\n  settingElement(): Element|null;\n}\n\n/**\n * Track toggle action as a whole or\n * track on and off action separately.\n */\nexport interface UserMetricOptions {\n  toggle?: Host.UserMetrics.Action;\n  enable?: Host.UserMetrics.Action;\n  disable?: Host.UserMetrics.Action;\n}\n"]}