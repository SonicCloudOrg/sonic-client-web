{"version":3,"file":"AnimationTimingUI.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/inline_editor/AnimationTimingUI.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as VisualLogging from '../../../visual_logging/visual_logging.js';\nimport * as UI from '../../legacy.js';\n\nimport {type AnimationTimingModel} from './AnimationTimingModel.js';\nimport {BezierUI} from './BezierUI.js';\nimport {CSSLinearEasingModel, type Point} from './CSSLinearEasingModel.js';\n\nconst DOUBLE_CLICK_DELAY = 500;\n\ntype Params = {\n  container: Element,\n  bezier: UI.Geometry.CubicBezier,\n  onBezierChange: (bezier: UI.Geometry.CubicBezier) => void,\n};\n\nclass BezierCurveUI {\n  #curveUI: BezierUI;\n  #bezier: UI.Geometry.CubicBezier;\n  #curve: Element;\n  #mouseDownPosition?: UI.Geometry.Point;\n  #controlPosition?: UI.Geometry.Point;\n  #selectedPoint?: number;\n  #onBezierChange: (bezier: UI.Geometry.CubicBezier) => void;\n\n  constructor({bezier, container, onBezierChange}: Params) {\n    this.#bezier = bezier;\n    this.#curveUI = new BezierUI({\n      width: 150,\n      height: 250,\n      marginTop: 50,\n      controlPointRadius: 7,\n      shouldDrawLine: true,\n    });\n\n    this.#curve = UI.UIUtils.createSVGChild(container, 'svg', 'bezier-curve');\n    this.#onBezierChange = onBezierChange;\n\n    UI.UIUtils.installDragHandle(\n        this.#curve, this.dragStart.bind(this), this.dragMove.bind(this), this.dragEnd.bind(this), 'default');\n  }\n\n  private dragStart(event: MouseEvent): boolean {\n    this.#mouseDownPosition = new UI.Geometry.Point(event.x, event.y);\n    const ui = this.#curveUI;\n    this.#controlPosition = new UI.Geometry.Point(\n        Platform.NumberUtilities.clamp((event.offsetX - ui.radius) / ui.curveWidth(), 0, 1),\n        (ui.curveHeight() + ui.marginTop + ui.radius - event.offsetY) / ui.curveHeight());\n\n    const firstControlPointIsCloser = this.#controlPosition.distanceTo(this.#bezier.controlPoints[0]) <\n        this.#controlPosition.distanceTo(this.#bezier.controlPoints[1]);\n    this.#selectedPoint = firstControlPointIsCloser ? 0 : 1;\n\n    this.#bezier.controlPoints[this.#selectedPoint] = this.#controlPosition;\n    this.#onBezierChange(this.#bezier);\n\n    event.consume(true);\n    return true;\n  }\n\n  private updateControlPosition(mouseX: number, mouseY: number): void {\n    if (this.#mouseDownPosition === undefined || this.#controlPosition === undefined ||\n        this.#selectedPoint === undefined) {\n      return;\n    }\n    const deltaX = (mouseX - this.#mouseDownPosition.x) / this.#curveUI.curveWidth();\n    const deltaY = (mouseY - this.#mouseDownPosition.y) / this.#curveUI.curveHeight();\n    const newPosition = new UI.Geometry.Point(\n        Platform.NumberUtilities.clamp(this.#controlPosition.x + deltaX, 0, 1), this.#controlPosition.y - deltaY);\n    this.#bezier.controlPoints[this.#selectedPoint] = newPosition;\n  }\n\n  private dragMove(event: MouseEvent): void {\n    this.updateControlPosition(event.x, event.y);\n    this.#onBezierChange(this.#bezier);\n  }\n\n  private dragEnd(event: MouseEvent): void {\n    this.updateControlPosition(event.x, event.y);\n    this.#onBezierChange(this.#bezier);\n  }\n\n  setBezier(bezier: UI.Geometry.CubicBezier): void {\n    this.#bezier = bezier;\n    this.draw();\n  }\n\n  draw(): void {\n    this.#curveUI.drawCurve(this.#bezier, this.#curve);\n  }\n}\n\ntype LinearEasingPresentationParams = {\n  width: number,\n  height: number,\n  marginTop: number,\n  pointRadius: number,\n};\ntype Position = {\n  x: number,\n  y: number,\n};\nclass LinearEasingPresentation {\n  params: LinearEasingPresentationParams;\n  renderedPositions?: Position[];\n\n  constructor(params: LinearEasingPresentationParams) {\n    this.params = params;\n  }\n\n  #curveWidth(): number {\n    return this.params.width - this.params.pointRadius * 2;\n  }\n\n  #curveHeight(): number {\n    return this.params.height - this.params.pointRadius * 2 - this.params.marginTop * 2;\n  }\n\n  #drawControlPoint(parentElement: Element, controlX: number, controlY: number, index: number): void {\n    const circle = UI.UIUtils.createSVGChild(parentElement, 'circle', 'bezier-control-circle');\n    circle.setAttribute(\n        'jslog', `${VisualLogging.controlPoint('bezier.linear-control-circle').track({drag: true, dblclick: true})}`);\n    circle.setAttribute('data-point-index', String(index));\n    circle.setAttribute('cx', String(controlX));\n    circle.setAttribute('cy', String(controlY));\n    circle.setAttribute('r', String(this.params.pointRadius));\n  }\n\n  timingPointToPosition(point: Point): Position {\n    return {\n      x: (point.input / 100) * this.#curveWidth() + this.params.pointRadius,\n      y: (1 - point.output) * this.#curveHeight() + this.params.pointRadius,\n    };\n  }\n\n  positionToTimingPoint(position: Position): Point {\n    return {\n      input: ((position.x - this.params.pointRadius) / this.#curveWidth()) * 100,\n      output: 1 - (position.y - this.params.pointRadius) / this.#curveHeight(),\n    };\n  }\n\n  draw(linearEasingModel: CSSLinearEasingModel, svg: Element): void {\n    svg.setAttribute('width', String(this.#curveWidth()));\n    svg.setAttribute('height', String(this.#curveHeight()));\n    svg.removeChildren();\n    const group = UI.UIUtils.createSVGChild(svg, 'g');\n\n    const positions = linearEasingModel.points().map(point => this.timingPointToPosition(point));\n    this.renderedPositions = positions;\n    let startingPoint = positions[0];\n    for (let i = 1; i < positions.length; i++) {\n      const position = positions[i];\n      const line = UI.UIUtils.createSVGChild(group, 'path', 'bezier-path linear-path');\n      line.setAttribute('d', `M ${startingPoint.x} ${startingPoint.y} L ${position.x} ${position.y}`);\n      line.setAttribute('data-line-index', String(i));\n      startingPoint = position;\n    }\n\n    for (let i = 0; i < positions.length; i++) {\n      const point = positions[i];\n      this.#drawControlPoint(group, point.x, point.y, i);\n    }\n  }\n}\n\nclass LinearEasingUI {\n  #model: CSSLinearEasingModel;\n  #onChange: (model: CSSLinearEasingModel) => void;\n  #presentation: LinearEasingPresentation;\n  #selectedPointIndex?: number;\n  #doubleClickTimer?: number;\n  #pointIndexForDoubleClick?: number;\n  #mouseDownPosition?: {x: number, y: number};\n\n  #svg: Element;\n\n  constructor({\n    model,\n    container,\n    onChange,\n  }: {\n    model: CSSLinearEasingModel,\n    container: HTMLElement,\n    onChange: (model: CSSLinearEasingModel) => void,\n  }) {\n    this.#model = model;\n    this.#onChange = onChange;\n    this.#presentation = new LinearEasingPresentation({\n      width: 150,\n      height: 250,\n      pointRadius: 7,\n      marginTop: 50,\n    });\n    this.#svg = UI.UIUtils.createSVGChild(container, 'svg', 'bezier-curve linear');\n\n    UI.UIUtils.installDragHandle(\n        this.#svg, this.#dragStart.bind(this), this.#dragMove.bind(this), this.#dragEnd.bind(this), 'default');\n  }\n\n  #handleLineClick(event: MouseEvent, lineIndex: number): void {\n    const newPoint = this.#presentation.positionToTimingPoint({x: event.offsetX, y: event.offsetY});\n    this.#model.addPoint(newPoint, lineIndex);\n    this.#selectedPointIndex = undefined;\n    this.#mouseDownPosition = undefined;\n  }\n\n  #handleControlPointClick(event: MouseEvent, pointIndex: number): void {\n    this.#selectedPointIndex = pointIndex;\n    this.#mouseDownPosition = {x: event.x, y: event.y};\n\n    // This is a workaround to understand whether the user double clicked\n    // a point or not. The reason is, we also want to handle drag interactions\n    // for the point and the way we install drag handlers (starting with mousedown event)\n    // doesn't allow us to register a `dblclick` handler. So, we're checking\n    // whether user double clicked (or mouse downed) a point with a timer.\n    // `#pointIndexForDoubleClick` holds the point clicked in a double click\n    // delay time frame. We reset that point after\n    // the DOUBLE_CLICK_DELAY time has passed.\n    clearTimeout(this.#doubleClickTimer);\n    if (this.#pointIndexForDoubleClick === this.#selectedPointIndex) {\n      this.#model.removePoint(this.#selectedPointIndex);\n      this.#pointIndexForDoubleClick = undefined;\n      this.#selectedPointIndex = undefined;\n      this.#mouseDownPosition = undefined;\n      return;\n    }\n\n    this.#pointIndexForDoubleClick = this.#selectedPointIndex;\n    this.#doubleClickTimer = window.setTimeout(() => {\n      this.#pointIndexForDoubleClick = undefined;\n    }, DOUBLE_CLICK_DELAY);\n  }\n\n  #dragStart(event: MouseEvent): boolean {\n    if (!(event.target instanceof SVGElement)) {\n      return false;\n    }\n\n    if (event.target.dataset.lineIndex !== undefined) {\n      this.#handleLineClick(event, Number(event.target.dataset.lineIndex));\n      event.consume(true);\n      return true;\n    }\n\n    if (event.target.dataset.pointIndex !== undefined) {\n      this.#handleControlPointClick(event, Number(event.target.dataset.pointIndex));\n      event.consume(true);\n      return true;\n    }\n\n    return false;\n  }\n\n  #updatePointPosition(mouseX: number, mouseY: number): void {\n    if (this.#selectedPointIndex === undefined || this.#mouseDownPosition === undefined) {\n      return;\n    }\n\n    const controlPosition = this.#presentation.renderedPositions?.[this.#selectedPointIndex];\n    if (!controlPosition) {\n      return;\n    }\n\n    const deltaX = mouseX - this.#mouseDownPosition.x;\n    const deltaY = mouseY - this.#mouseDownPosition.y;\n\n    this.#mouseDownPosition = {\n      x: mouseX,\n      y: mouseY,\n    };\n\n    const newPoint = {\n      x: controlPosition.x + deltaX,\n      y: controlPosition.y + deltaY,\n    };\n\n    this.#model.setPoint(this.#selectedPointIndex, this.#presentation.positionToTimingPoint(newPoint));\n  }\n\n  #dragMove(event: MouseEvent): void {\n    this.#updatePointPosition(event.x, event.y);\n    this.#onChange(this.#model);\n  }\n\n  #dragEnd(event: MouseEvent): void {\n    this.#updatePointPosition(event.x, event.y);\n    this.#onChange(this.#model);\n  }\n\n  setCSSLinearEasingModel(model: CSSLinearEasingModel): void {\n    this.#model = model;\n    this.draw();\n  }\n\n  draw(): void {\n    this.#presentation.draw(this.#model, this.#svg);\n  }\n}\n\nexport class PresetUI {\n  #linearEasingPresentation: LinearEasingPresentation;\n  #bezierPresentation: BezierUI;\n\n  constructor() {\n    this.#linearEasingPresentation = new LinearEasingPresentation({\n      width: 40,\n      height: 40,\n      marginTop: 0,\n      pointRadius: 2,\n    });\n\n    this.#bezierPresentation = new BezierUI({\n      width: 40,\n      height: 40,\n      marginTop: 0,\n      controlPointRadius: 2,\n      shouldDrawLine: false,\n    });\n  }\n\n  draw(model: AnimationTimingModel, svg: Element): void {\n    if (model instanceof CSSLinearEasingModel) {\n      this.#linearEasingPresentation.draw(model, svg);\n    } else if (model instanceof UI.Geometry.CubicBezier) {\n      this.#bezierPresentation.drawCurve(model, svg);\n    }\n  }\n}\n\ninterface AnimationTimingUIParams {\n  model: AnimationTimingModel;\n  onChange: (model: AnimationTimingModel) => void;\n}\nexport class AnimationTimingUI {\n  #container: HTMLElement;\n  #bezierContainer: HTMLElement;\n  #linearEasingContainer: HTMLElement;\n  #model: AnimationTimingModel;\n  #onChange: (model: AnimationTimingModel) => void;\n  #bezierCurveUI?: BezierCurveUI;\n  #linearEasingUI?: LinearEasingUI;\n\n  constructor({model, onChange}: AnimationTimingUIParams) {\n    this.#container = document.createElement('div');\n    this.#container.className = 'animation-timing-ui';\n    this.#container.style.width = '150px';\n    this.#container.style.height = '250px';\n\n    this.#bezierContainer = document.createElement('div');\n    this.#bezierContainer.classList.add('bezier-ui-container');\n    this.#linearEasingContainer = document.createElement('div');\n    this.#linearEasingContainer.classList.add('linear-easing-ui-container');\n\n    this.#container.appendChild(this.#bezierContainer);\n    this.#container.appendChild(this.#linearEasingContainer);\n\n    this.#model = model;\n    this.#onChange = onChange;\n\n    if (this.#model instanceof UI.Geometry.CubicBezier) {\n      this.#bezierCurveUI =\n          new BezierCurveUI({bezier: this.#model, container: this.#bezierContainer, onBezierChange: this.#onChange});\n    } else if (this.#model instanceof CSSLinearEasingModel) {\n      this.#linearEasingUI = new LinearEasingUI({\n        model: this.#model,\n        container: this.#linearEasingContainer,\n        onChange: this.#onChange,\n      });\n    }\n  }\n\n  element(): Element {\n    return this.#container;\n  }\n\n  setModel(model: AnimationTimingModel): void {\n    this.#model = model;\n    if (this.#model instanceof UI.Geometry.CubicBezier) {\n      if (this.#bezierCurveUI) {\n        this.#bezierCurveUI.setBezier(this.#model);\n      } else {\n        this.#bezierCurveUI =\n            new BezierCurveUI({bezier: this.#model, container: this.#bezierContainer, onBezierChange: this.#onChange});\n      }\n    } else if (this.#model instanceof CSSLinearEasingModel) {\n      if (this.#linearEasingUI) {\n        this.#linearEasingUI.setCSSLinearEasingModel(this.#model);\n      } else {\n        this.#linearEasingUI =\n            new LinearEasingUI({model: this.#model, container: this.#linearEasingContainer, onChange: this.#onChange});\n      }\n    }\n\n    this.draw();\n  }\n\n  draw(): void {\n    this.#linearEasingContainer.classList.toggle('hidden', !(this.#model instanceof CSSLinearEasingModel));\n    this.#bezierContainer.classList.toggle('hidden', !(this.#model instanceof UI.Geometry.CubicBezier));\n\n    if (this.#bezierCurveUI) {\n      this.#bezierCurveUI.draw();\n    }\n\n    if (this.#linearEasingUI) {\n      this.#linearEasingUI.draw();\n    }\n  }\n}\n"]}