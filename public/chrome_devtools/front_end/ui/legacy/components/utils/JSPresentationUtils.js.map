{"version":3,"file":"JSPresentationUtils.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/utils/JSPresentationUtils.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2008 Matt Lilek <webkit@mattlilek.com>\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport type * as Protocol from '../../../../generated/protocol.js';\nimport * as Bindings from '../../../../models/bindings/bindings.js';\nimport * as VisualLogging from '../../../visual_logging/visual_logging.js';\nimport * as UI from '../../legacy.js';\n\nimport jsUtilsStyles from './jsUtils.css.js';\nimport {Events as LinkifierEvents, Linkifier} from './Linkifier.js';\n\nconst UIStrings = {\n  /**\n   *@description Text to stop preventing the debugger from stepping into library code\n   */\n  removeFromIgnore: 'Remove from ignore list',\n  /**\n   *@description Text for scripts that should not be stepped into when debugging\n   */\n  addToIgnore: 'Add script to ignore list',\n  /**\n   * @description A link to show more frames when they are available. Never 0.\n   */\n  showSMoreFrames: '{n, plural, =1 {Show # more frame} other {Show # more frames}}',\n  /**\n   * @description A link to rehide frames that are by default hidden.\n   */\n  showLess: 'Show less',\n  /**\n   *@description Text indicating that source url of a link is currently unknown\n   */\n  unknownSource: 'unknown',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/utils/JSPresentationUtils.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nfunction populateContextMenu(link: Element, event: Event): void {\n  const contextMenu = new UI.ContextMenu.ContextMenu(event);\n  event.consume(true);\n  const uiLocation = Linkifier.uiLocation(link);\n  if (uiLocation &&\n      Bindings.IgnoreListManager.IgnoreListManager.instance().canIgnoreListUISourceCode(uiLocation.uiSourceCode)) {\n    if (Bindings.IgnoreListManager.IgnoreListManager.instance().isUserIgnoreListedURL(uiLocation.uiSourceCode.url())) {\n      contextMenu.debugSection().appendItem(\n          i18nString(UIStrings.removeFromIgnore),\n          () =>\n              Bindings.IgnoreListManager.IgnoreListManager.instance().unIgnoreListUISourceCode(uiLocation.uiSourceCode),\n          {jslogContext: 'remove-from-ignore-list'});\n    } else {\n      contextMenu.debugSection().appendItem(\n          i18nString(UIStrings.addToIgnore),\n          () => Bindings.IgnoreListManager.IgnoreListManager.instance().ignoreListUISourceCode(uiLocation.uiSourceCode),\n          {jslogContext: 'add-to-ignore-list'});\n    }\n  }\n  contextMenu.appendApplicableItems(event);\n  void contextMenu.show();\n}\n\nexport function buildStackTraceRows(\n    stackTrace: Protocol.Runtime.StackTrace,\n    target: SDK.Target.Target|null,\n    linkifier: Linkifier,\n    tabStops: boolean|undefined,\n    updateCallback?: (arg0: (StackTraceRegularRow|StackTraceAsyncRow)[]) => void,\n    showColumnNumber?: boolean,\n    ): (StackTraceRegularRow|StackTraceAsyncRow)[] {\n  const stackTraceRows: (StackTraceRegularRow|StackTraceAsyncRow)[] = [];\n\n  if (updateCallback) {\n    const throttler = new Common.Throttler.Throttler(100);\n    linkifier.addEventListener(LinkifierEvents.LiveLocationUpdated, () => {\n      void throttler.schedule(async () => updateHiddenRows(updateCallback, stackTraceRows));\n    });\n  }\n\n  function buildStackTraceRowsHelper(\n      stackTrace: Protocol.Runtime.StackTrace,\n      previousCallFrames: Protocol.Runtime.CallFrame[]|undefined = undefined): void {\n    let asyncRow: StackTraceAsyncRow|null = null;\n    if (previousCallFrames) {\n      asyncRow = {\n        asyncDescription: UI.UIUtils.asyncStackTraceLabel(stackTrace.description, previousCallFrames),\n        ignoreListHide: false,\n      };\n      stackTraceRows.push(asyncRow);\n    }\n    let hiddenCallFrames = 0;\n    let previousStackFrameWasBreakpointCondition = false;\n    for (const stackFrame of stackTrace.callFrames) {\n      let ignoreListHide = false;\n      const functionName = UI.UIUtils.beautifyFunctionName(stackFrame.functionName);\n      const link = linkifier.maybeLinkifyConsoleCallFrame(target, stackFrame, {\n        showColumnNumber: showColumnNumber,\n        tabStop: Boolean(tabStops),\n        inlineFrameIndex: 0,\n        revealBreakpoint: previousStackFrameWasBreakpointCondition,\n      });\n      if (link) {\n        link.setAttribute('jslog', `${VisualLogging.link('stack-trace').track({click: true})}`);\n        link.addEventListener('contextmenu', populateContextMenu.bind(null, link));\n        // TODO(crbug.com/1183325): fix race condition with uiLocation still being null here\n        // Note: This has always checked whether the call frame location *in the generated\n        // code* is ignore-listed or not. This can change after the live location updates,\n        // and is handled again in the linkifier live location update callback.\n        const uiLocation = Linkifier.uiLocation(link);\n        if (uiLocation &&\n            Bindings.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n                uiLocation.uiSourceCode)) {\n          ignoreListHide = true;\n        }\n        if (!link.textContent) {\n          link.textContent = i18nString(UIStrings.unknownSource);\n        }\n      }\n      if (ignoreListHide) {\n        ++hiddenCallFrames;\n      }\n      stackTraceRows.push({functionName, link, ignoreListHide});\n      previousStackFrameWasBreakpointCondition = [\n        SDK.DebuggerModel.COND_BREAKPOINT_SOURCE_URL,\n        SDK.DebuggerModel.LOGPOINT_SOURCE_URL,\n      ].includes(stackFrame.url);\n    }\n    if (asyncRow && hiddenCallFrames > 0 && hiddenCallFrames === stackTrace.callFrames.length) {\n      asyncRow.ignoreListHide = true;\n    }\n  }\n\n  buildStackTraceRowsHelper(stackTrace);\n  let previousCallFrames = stackTrace.callFrames;\n  for (let asyncStackTrace = stackTrace.parent; asyncStackTrace; asyncStackTrace = asyncStackTrace.parent) {\n    if (asyncStackTrace.callFrames.length) {\n      buildStackTraceRowsHelper(asyncStackTrace, previousCallFrames);\n    }\n    previousCallFrames = asyncStackTrace.callFrames;\n  }\n  return stackTraceRows;\n}\n\n/**\n * @param {function(!Array<!StackTraceRegularRow|!StackTraceAsyncRow>): *} renderCallback\n * @param {!Array<!StackTraceRegularRow|!StackTraceAsyncRow>} stackTraceRows\n */\nfunction updateHiddenRows(\n    renderCallback: (arg0: (StackTraceRegularRow|StackTraceAsyncRow)[]) => void,\n    stackTraceRows: (StackTraceRegularRow|StackTraceAsyncRow)[],\n    ): void {\n  let shouldHideSubCount = 0;  // keeps track of number hidden (regular) rows between asyncRows\n  let indexOfAsyncRow = stackTraceRows.length;\n\n  for (let i = stackTraceRows.length - 1; i >= 0; i--) {\n    const row = stackTraceRows[i];\n\n    if ('link' in row && row.link) {\n      // Note: This checks whether the call frame location *in the live location* is\n      // ignore-listed or not. When a source map is present, this corresponds to the\n      // location in the original source, not the generated source. Therefore, the\n      // ignore-list status might be different now from when the row was created.\n      const uiLocation = Linkifier.uiLocation(row.link);\n      if (uiLocation &&\n          Bindings.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n              uiLocation.uiSourceCode)) {\n        row.ignoreListHide = true;\n      }\n      if (row.ignoreListHide) {\n        shouldHideSubCount++;\n      }\n    }\n    if ('asyncDescription' in row) {\n      // hide current row if all (regular) rows since the previous asyncRow are hidden\n      if (shouldHideSubCount > 0 && shouldHideSubCount === indexOfAsyncRow - i - 1) {\n        row.ignoreListHide = true;\n      }\n      indexOfAsyncRow = i;\n      shouldHideSubCount = 0;\n    }\n  }\n  renderCallback(stackTraceRows);\n}\n\nexport function buildStackTracePreviewContents(\n    target: SDK.Target.Target|null, linkifier: Linkifier, options: Options = {\n      widthConstrained: false,\n      stackTrace: undefined,\n      tabStops: undefined,\n    }): {element: HTMLElement, links: HTMLElement[]} {\n  const {stackTrace, tabStops} = options;\n  const element = document.createElement('span');\n  element.classList.add('monospace');\n  element.classList.add('stack-preview-container');\n  element.classList.toggle('width-constrained', options.widthConstrained);\n  element.style.display = 'inline-block';\n  const shadowRoot =\n      UI.UIUtils.createShadowRootWithCoreStyles(element, {cssFile: [jsUtilsStyles], delegatesFocus: undefined});\n  const contentElement = shadowRoot.createChild('table', 'stack-preview-container');\n  contentElement.classList.toggle('width-constrained', options.widthConstrained);\n  if (!stackTrace) {\n    return {element, links: []};\n  }\n\n  const updateCallback = renderStackTraceTable.bind(null, contentElement);\n  const stackTraceRows =\n      buildStackTraceRows(stackTrace, target, linkifier, tabStops, updateCallback, options.showColumnNumber);\n  const links = renderStackTraceTable(contentElement, stackTraceRows);\n  return {element, links};\n}\n\nfunction renderStackTraceTable(\n    container: Element, stackTraceRows: (StackTraceRegularRow|StackTraceAsyncRow)[]): HTMLElement[] {\n  container.removeChildren();\n  let hiddenCallFramesCount = 0;\n  const links: HTMLElement[] = [];\n\n  for (const item of stackTraceRows) {\n    const row = container.createChild('tr');\n    if ('asyncDescription' in item) {\n      row.createChild('td').textContent = '\\n';\n      row.createChild('td', 'stack-preview-async-description').textContent = item.asyncDescription;\n      row.createChild('td');\n      row.createChild('td');\n    } else {\n      row.createChild('td').textContent = '\\n';\n      row.createChild('td', 'function-name').textContent = item.functionName;\n      row.createChild('td').textContent = ' @ ';\n      if (item.link) {\n        row.createChild('td', 'link').appendChild(item.link);\n        links.push(item.link);\n      }\n      if (item.ignoreListHide) {\n        ++hiddenCallFramesCount;\n      }\n    }\n    if (item.ignoreListHide) {\n      row.classList.add('hidden-row');\n    }\n    container.appendChild(row);\n  }\n\n  if (hiddenCallFramesCount) {\n    const showAllRow = container.createChild('tr', 'show-all-link');\n    showAllRow.createChild('td').textContent = '\\n';\n    const cell = showAllRow.createChild('td') as HTMLTableCellElement;\n    cell.colSpan = 4;\n    const showAllLink = cell.createChild('span', 'link');\n    showAllLink.textContent = i18nString(UIStrings.showSMoreFrames, {n: hiddenCallFramesCount});\n    showAllLink.addEventListener('click', () => {\n      container.classList.add('show-hidden-rows');\n      // If we are in a popup, this will trigger a re-layout\n      UI.GlassPane.GlassPane.containerMoved(container);\n    }, false);\n    const showLessRow = container.createChild('tr', 'show-less-link');\n    showLessRow.createChild('td').textContent = '\\n';\n    const showLesscell = showLessRow.createChild('td') as HTMLTableCellElement;\n    showLesscell.colSpan = 4;\n    const showLessLink = showLesscell.createChild('span', 'link');\n    showLessLink.textContent = i18nString(UIStrings.showLess);\n    showLessLink.addEventListener('click', () => {\n      container.classList.remove('show-hidden-rows');\n      // If we are in a popup, this will trigger a re-layout\n      UI.GlassPane.GlassPane.containerMoved(container);\n    }, false);\n  }\n  return links;\n}\n\nexport interface Options {\n  stackTrace: Protocol.Runtime.StackTrace|undefined;\n  tabStops: boolean|undefined;\n  // Whether the width of stack trace preview\n  // is constrained to its container or whether\n  // it can grow the container.\n  widthConstrained?: boolean;\n  showColumnNumber?: boolean;\n}\n\nexport interface StackTraceRegularRow {\n  functionName: string;\n  ignoreListHide: boolean;\n  link: HTMLElement|null;\n}\n\nexport interface StackTraceAsyncRow {\n  asyncDescription: string;\n  ignoreListHide: boolean;\n}\n"]}