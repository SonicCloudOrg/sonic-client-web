{"version":3,"file":"TimelineOverviewPane.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/perf_ui/TimelineOverviewPane.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4BG;AAEH,OAAO,KAAK,MAAM,MAAM,mCAAmC,CAAC;AAC5D,OAAO,KAAK,WAAW,MAAM,mCAAmC,CAAC;AACjE,OAAO,KAAK,EAAE,MAAM,iBAAiB,CAAC;AAEtC,OAAO,EAA+B,YAAY,EAAsC,MAAM,mBAAmB,CAAC;AAClH,OAAO,EAAC,0BAA0B,EAAC,MAAM,iCAAiC,CAAC;AAC3E,OAAO,0BAA0B,MAAM,+BAA+B,CAAC;AAEvE,MAAM,OAAO,oBAAqB,SAAQ,MAAM,CAAC,aAAa,CAAC,UAAU,CACrE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC;IACR,kBAAkB,CAA6B;IACvC,YAAY,CAAe;IAC3B,UAAU,CAAc;IACjC,aAAa,CAAc;IAC3B,gBAAgB,CAAqB;IACrC,OAAO,CAAuB;IACrB,YAAY,CAAe;IAC3B,eAAe,CAA6B;IACrD,aAAa,CAAU;IACvB,cAAc,CAAS;IACvB,SAAS,CAAS;IAClB,eAAe,CAAS;IACxB,aAAa,CAAS;IACtB,mBAAmB,CAAU;IAErC,YAAY,MAAc;QACxB,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,MAAM,GAAG,gBAAgB,CAAC;QAE5C,IAAI,CAAC,kBAAkB,GAAG,IAAI,0BAA0B,EAAE,CAAC;QAC3D,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACtE,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACpD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,EAAE,2BAA2B,CAAC,CAAC;QAC5F,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,EAAE,+BAA+B,CAAC,CAAC;QACnG,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;QACjF,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;QAEjF,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;QAC1C,IAAI,CAAC,YAAY,CAAC,gBAAgB,iFAA+C,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAC7G,IAAI,CAAC,YAAY,CAAC,gBAAgB,6DAAqC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;QACrG,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3D,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,EAAE,CAAC;QAEzB,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACzD,IAAI,CAAC,eAAe,GAAG,IAAI,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QAE3D,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QAEnB,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;QAC9B,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;IACnC,CAAC;IAED,6BAA6B;QAC3B,MAAM,iBAAiB,GAAG,IAAI,CAAC,YAAY,CAAC,6BAA6B,EAAE,CAAC;QAC5E,iBAAiB,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;QACnF,iBAAiB,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;IACrF,CAAC;IAEO,WAAW,CAAC,KAAY;QAC9B,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;YACxB,OAAO;QACT,CAAC;QACD,MAAM,UAAU,GAAI,KAAoB,CAAC;QACzC,MAAM,MAAM,GAAI,KAAK,CAAC,MAAsB,CAAC;QAC7C,MAAM,8BAA8B,GAChC,MAAM,CAAC,qBAAqB,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,qBAAqB,EAAE,CAAC,IAAI,CAAC;QACvF,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC,OAAO,GAAG,8BAA8B,CAAC;QAC1E,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3D,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;QAChD,KAAK,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;IAC9D,CAAC;IAEO,KAAK,CAAC,iBAAiB;QAC7B,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;QAC5C,MAAM,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;QAC9B,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzG,MAAM,QAAQ,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAC;QACnD,MAAM,eAAe,GAAI,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,KAAK,IAAI,CAAe,CAAC;QACpF,QAAQ,CAAC,MAAM,CAAC,GAAG,eAAe,CAAC,CAAC;QACpC,OAAO,QAAQ,CAAC;IAClB,CAAC;IAEO,UAAU;QAChB,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;QAC/C,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;IAC3B,CAAC;IAEQ,QAAQ;QACf,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEQ,QAAQ;QACf,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;IAC3B,CAAC;IAEQ,QAAQ;QACf,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;QACvC,IAAI,KAAK,KAAK,IAAI,CAAC,SAAS,EAAE,CAAC;YAC7B,OAAO;QACT,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,mBAAmB,CAAC,gBAAoC;QACtD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;YACtD,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;QACrC,CAAC;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,gBAAgB,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;YACjD,gBAAgB,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;YAC3D,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACtD,CAAC;QACD,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzC,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAED,IAAI,kBAAkB,CAAC,SAAkB;QACvC,IAAI,CAAC,YAAY,CAAC,kBAAkB,GAAG,SAAS,CAAC;IACnD,CAAC;IAED,SAAS,CACL,eAAsD,EACtD,eAAsD;QACxD,IAAI,eAAe,KAAK,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE;YAC7D,eAAe,KAAK,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,EAAE,CAAC;YAClE,OAAO;QACT,CAAC;QACD,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;QACpE,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,cAAc,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;IACxD,CAAC;IAED,gBAAgB,CAAC,aAAiF;QAChG,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;IAC1D,CAAC;IAED,cAAc,CAAC,KAA6C,EAAE,GAA2C;QACvG,KAAK,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE;YAC5C,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,MAAM,CAAC,KAA6C,EAAE,GAA2C;QACvG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC;YACtB,OAAO;QACT,CAAC;QACD,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,CAAC;QACzE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;YACtD,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QAC9C,CAAC;QACD,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAC1D,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED,UAAU,CAAC,OAA6B;QACtC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAEO,aAAa;QACnB,MAAM,eAAe,GAAG,IAAI,GAAG,EAAmB,CAAC;QACnD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;YACvC,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAgB,CAAC;YACrD,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAClH,gDAAgD;YAChD,IAAI,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC;gBAClC,SAAS;YACX,CAAC;YACD,eAAe,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YACtC,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,QAAQ,GAAG,IAAI,CAAC;QACtC,CAAC;QACD,IAAI,CAAC,YAAY,CAAC,mBAAmB,EAAE,CAAC;QACxC,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IACpE,CAAC;IAED,KAAK;QACH,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;QAC9B,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;QAChC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;QAC1B,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;QAC1C,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,EAAE,CAAC;QACzB,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC5C,OAAO,CAAC,KAAK,EAAE,CAAC;QAClB,CAAC;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;QACzB,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEO,OAAO,CAAC,KAAY;QAC1B,OAAO,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IACvE,CAAC;IAEO,iBAAiB;QACvB,IAAI,CAAC,wBAAwB,yEAAqC;YAChE,SAAS,EAAE,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC;YACtE,OAAO,EAAE,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC;SACnE,CAAC,CAAC;IACL,CAAC;IAEO,eAAe,CAAC,KAA0E;QAChG,IAAI,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC7B,OAAO;QACT,CAAC;QACD,gDAAgD;QAChD,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC;YAClC,OAAO;QACT,CAAC;QAED,IAAI,CAAC,eAAe;YAChB,KAAK,CAAC,IAAI,CAAC,aAAa,KAAK,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC;QAC1G,IAAI,CAAC,aAAa;YACd,KAAK,CAAC,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;QAE7G,MAAM,WAAW,GAAG;YAClB,SAAS,EAAE,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC;YACtE,OAAO,EAAE,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC;SACnE,CAAC;QAEF,IAAI,CAAC,wBAAwB,qEAAmC,WAAW,CAAC,CAAC;IAC/E,CAAC;IAED,cAAc,CAAC,SAAiB,EAAE,OAAe;QAC/C,IAAI,SAAS,KAAK,IAAI,CAAC,eAAe,IAAI,OAAO,KAAK,IAAI,CAAC,aAAa,EAAE,CAAC;YACzE,OAAO;QACT,CAAC;QACD,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;QACjC,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC;QAC7B,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,wBAAwB,qEAAmC;YAC9D,SAAS,EAAE,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,SAAS,CAAC;YAC3D,OAAO,EAAE,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC;SACxD,CAAC,CAAC;IACL,CAAC;IAEO,YAAY;QAClB,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC;YAClC,OAAO;QACT,CAAC;QACD,MAAM,WAAW,GAAG,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,CAAC;QAC9D,MAAM,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,GAAG,WAAW,CAAC;QACzE,MAAM,WAAW,GAAG,WAAW,GAAG,CAAC,CAAC;QACpC,MAAM,IAAI,GAAG,WAAW,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,eAAe,GAAG,WAAW,CAAC,GAAG,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpH,MAAM,KAAK,GAAG,WAAW,IAAI,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/G,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QACzC,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;IACnC,CAAC;CACF;AAiCD,MAAM,OAAO,oBAAqB,SAAQ,EAAE,CAAC,MAAM,CAAC,IAAI;IAC9C,kBAAkB,CAAkC;IACpD,MAAM,CAAoB;IAC1B,eAAe,CAAgC;IAEvD;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAuB,CAAC;QAChF,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IACtD,CAAC;IAED,KAAK;QACH,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;IAC3B,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;IAC5B,CAAC;IAED,OAAO;QACL,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;QACvD,CAAC;QACD,OAAO,IAAI,CAAC,eAA2C,CAAC;IAC1D,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,kBAAkB,CAAC;IACjC,CAAC;IAED,MAAM;QACJ,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACrC,CAAC;IAED,OAAO;QACL,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAED,KAAK;IACL,CAAC;IAED,KAAK,CAAC,mBAAmB,CAAC,EAAU;QAClC,OAAO,IAAI,CAAC;IACd,CAAC;IAED,aAAa,CAAC,UAAsC;QAClD,IAAI,CAAC,kBAAkB,GAAG,UAAU,CAAC;IACvC,CAAC;IAED,OAAO,CAAC,MAAa;QACnB,OAAO,KAAK,CAAC;IACf,CAAC;IAED,WAAW;QACT,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;YAC7B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAC1E,CAAC;IACH,CAAC;IAED,aAAa,CAAC,KAAa,EAAE,MAAc;QACzC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC;QACpD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,GAAG,MAAM,CAAC,gBAAgB,CAAC;IACxD,CAAC;CACF;AAED,MAAM,OAAO,YAAY;IACN,aAAa,CAAU;IAChC,SAAS,CAAyB;IAClC,OAAO,CAAU;IACR,OAAO,CAAU;IAElC,YAAY,MAAe;QACzB,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;QAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,EAAE,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;QAC9C,IAAI,CAAC,SAAS,CAAC,wBAAwB,0EAAmD,CAAC;QAC3F,IAAI,CAAC,SAAS,CAAC,iBAAiB,iDAAmC,CAAC;QACpE,IAAI,CAAC,SAAS,CAAC,eAAe,iEAA0C,CAAC;QACzE,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,OAAO;aACL,8BAA8B,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE;YAC7D,OAAO,EAAE,CAAC,0BAA0B,CAAC;YACrC,cAAc,EAAE,SAAS;SAC1B,CAAC;aACD,WAAW,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;IAC1D,CAAC;IAED,KAAK,CAAC,UAAU,CAAC,cAAyC;QACxD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,MAAM,OAAO,GAAG,MAAM,cAAc,CAAC;QACrC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,OAAO;QACT,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;QAC9B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAClC,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC,CAAC;QACrE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,EAAE,CAAC;YAChC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAE,IAAI,CAAC,aAAa,CAAC,aAA0B,CAAC,CAAC;QACtE,CAAC;IACH,CAAC;IAED,IAAI;QACF,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;IACxB,CAAC;CACF","sourcesContent":["/*\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as TraceEngine from '../../../../models/trace/trace.js';\nimport * as UI from '../../legacy.js';\n\nimport {Events as OverviewGridEvents, OverviewGrid, type WindowChangedWithPositionEvent} from './OverviewGrid.js';\nimport {TimelineOverviewCalculator} from './TimelineOverviewCalculator.js';\nimport timelineOverviewInfoStyles from './timelineOverviewInfo.css.js';\n\nexport class TimelineOverviewPane extends Common.ObjectWrapper.eventMixin<EventTypes, typeof UI.Widget.VBox>(\n    UI.Widget.VBox) {\n  readonly overviewCalculator: TimelineOverviewCalculator;\n  private readonly overviewGrid: OverviewGrid;\n  private readonly cursorArea: HTMLElement;\n  private cursorElement: HTMLElement;\n  private overviewControls: TimelineOverview[];\n  private markers: Map<number, Element>;\n  private readonly overviewInfo: OverviewInfo;\n  private readonly updateThrottler: Common.Throttler.Throttler;\n  private cursorEnabled: boolean;\n  private cursorPosition: number;\n  private lastWidth: number;\n  private windowStartTime: number;\n  private windowEndTime: number;\n  private muteOnWindowChanged: boolean;\n\n  constructor(prefix: string) {\n    super();\n    this.element.id = prefix + '-overview-pane';\n\n    this.overviewCalculator = new TimelineOverviewCalculator();\n    this.overviewGrid = new OverviewGrid(prefix, this.overviewCalculator);\n    this.element.appendChild(this.overviewGrid.element);\n    this.cursorArea = this.overviewGrid.element.createChild('div', 'overview-grid-cursor-area');\n    this.cursorElement = this.overviewGrid.element.createChild('div', 'overview-grid-cursor-position');\n    this.cursorArea.addEventListener('mousemove', this.onMouseMove.bind(this), true);\n    this.cursorArea.addEventListener('mouseleave', this.hideCursor.bind(this), true);\n\n    this.overviewGrid.setResizeEnabled(false);\n    this.overviewGrid.addEventListener(OverviewGridEvents.WindowChangedWithPosition, this.onWindowChanged, this);\n    this.overviewGrid.addEventListener(OverviewGridEvents.BreadcrumbAdded, this.onBreadcrumbAdded, this);\n    this.overviewGrid.setClickHandler(this.onClick.bind(this));\n    this.overviewControls = [];\n    this.markers = new Map();\n\n    this.overviewInfo = new OverviewInfo(this.cursorElement);\n    this.updateThrottler = new Common.Throttler.Throttler(100);\n\n    this.cursorEnabled = false;\n    this.cursorPosition = 0;\n    this.lastWidth = 0;\n\n    this.windowStartTime = 0;\n    this.windowEndTime = Infinity;\n    this.muteOnWindowChanged = false;\n  }\n\n  enableCreateBreadcrumbsButton(): void {\n    const breacrumbsElement = this.overviewGrid.enableCreateBreadcrumbsButton();\n    breacrumbsElement.addEventListener('mousemove', this.onMouseMove.bind(this), true);\n    breacrumbsElement.addEventListener('mouseleave', this.hideCursor.bind(this), true);\n  }\n\n  private onMouseMove(event: Event): void {\n    if (!this.cursorEnabled) {\n      return;\n    }\n    const mouseEvent = (event as MouseEvent);\n    const target = (event.target as HTMLElement);\n    const offsetLeftRelativeToCursorArea =\n        target.getBoundingClientRect().left - this.cursorArea.getBoundingClientRect().left;\n    this.cursorPosition = mouseEvent.offsetX + offsetLeftRelativeToCursorArea;\n    this.cursorElement.style.left = this.cursorPosition + 'px';\n    this.cursorElement.style.visibility = 'visible';\n    void this.overviewInfo.setContent(this.buildOverviewInfo());\n  }\n\n  private async buildOverviewInfo(): Promise<DocumentFragment> {\n    const document = this.element.ownerDocument;\n    const x = this.cursorPosition;\n    const elements = await Promise.all(this.overviewControls.map(control => control.overviewInfoPromise(x)));\n    const fragment = document.createDocumentFragment();\n    const nonNullElements = (elements.filter(element => element !== null) as Element[]);\n    fragment.append(...nonNullElements);\n    return fragment;\n  }\n\n  private hideCursor(): void {\n    this.cursorElement.style.visibility = 'hidden';\n    this.overviewInfo.hide();\n  }\n\n  override wasShown(): void {\n    this.update();\n  }\n\n  override willHide(): void {\n    this.overviewInfo.hide();\n  }\n\n  override onResize(): void {\n    const width = this.element.offsetWidth;\n    if (width === this.lastWidth) {\n      return;\n    }\n    this.lastWidth = width;\n    this.scheduleUpdate();\n  }\n\n  setOverviewControls(overviewControls: TimelineOverview[]): void {\n    for (let i = 0; i < this.overviewControls.length; ++i) {\n      this.overviewControls[i].dispose();\n    }\n\n    for (let i = 0; i < overviewControls.length; ++i) {\n      overviewControls[i].setCalculator(this.overviewCalculator);\n      overviewControls[i].show(this.overviewGrid.element);\n    }\n    this.overviewControls = overviewControls;\n    this.update();\n  }\n\n  set showingScreenshots(isShowing: boolean) {\n    this.overviewGrid.showingScreenshots = isShowing;\n  }\n\n  setBounds(\n      minimumBoundary: TraceEngine.Types.Timing.MilliSeconds,\n      maximumBoundary: TraceEngine.Types.Timing.MilliSeconds): void {\n    if (minimumBoundary === this.overviewCalculator.minimumBoundary() &&\n        maximumBoundary === this.overviewCalculator.maximumBoundary()) {\n      return;\n    }\n    this.overviewCalculator.setBounds(minimumBoundary, maximumBoundary);\n    this.overviewGrid.setResizeEnabled(true);\n    this.cursorEnabled = true;\n    this.scheduleUpdate(minimumBoundary, maximumBoundary);\n  }\n\n  setNavStartTimes(navStartTimes: readonly TraceEngine.Types.TraceEvents.TraceEventNavigationStart[]): void {\n    this.overviewCalculator.setNavStartTimes(navStartTimes);\n  }\n\n  scheduleUpdate(start?: TraceEngine.Types.Timing.MilliSeconds, end?: TraceEngine.Types.Timing.MilliSeconds): void {\n    void this.updateThrottler.schedule(async () => {\n      this.update(start, end);\n    });\n  }\n\n  private update(start?: TraceEngine.Types.Timing.MilliSeconds, end?: TraceEngine.Types.Timing.MilliSeconds): void {\n    if (!this.isShowing()) {\n      return;\n    }\n    this.overviewCalculator.setDisplayWidth(this.overviewGrid.clientWidth());\n    for (let i = 0; i < this.overviewControls.length; ++i) {\n      this.overviewControls[i].update(start, end);\n    }\n    this.overviewGrid.updateDividers(this.overviewCalculator);\n    this.updateMarkers();\n    this.updateWindow();\n  }\n\n  setMarkers(markers: Map<number, Element>): void {\n    this.markers = markers;\n  }\n\n  getMarkers(): Map<number, Element> {\n    return this.markers;\n  }\n\n  private updateMarkers(): void {\n    const filteredMarkers = new Map<number, Element>();\n    for (const time of this.markers.keys()) {\n      const marker = this.markers.get(time) as HTMLElement;\n      const position = Math.round(this.overviewCalculator.computePosition(TraceEngine.Types.Timing.MilliSeconds(time)));\n      // Limit the number of markers to one per pixel.\n      if (filteredMarkers.has(position)) {\n        continue;\n      }\n      filteredMarkers.set(position, marker);\n      marker.style.left = position + 'px';\n    }\n    this.overviewGrid.removeEventDividers();\n    this.overviewGrid.addEventDividers([...filteredMarkers.values()]);\n  }\n\n  reset(): void {\n    this.windowStartTime = 0;\n    this.windowEndTime = Infinity;\n    this.overviewCalculator.reset();\n    this.overviewGrid.reset();\n    this.overviewGrid.setResizeEnabled(false);\n    this.cursorEnabled = false;\n    this.hideCursor();\n    this.markers = new Map();\n    for (const control of this.overviewControls) {\n      control.reset();\n    }\n    this.overviewInfo.hide();\n    this.scheduleUpdate();\n  }\n\n  private onClick(event: Event): boolean {\n    return this.overviewControls.some(control => control.onClick(event));\n  }\n\n  private onBreadcrumbAdded(): void {\n    this.dispatchEventToListeners(Events.OverviewPaneBreadcrumbAdded, {\n      startTime: TraceEngine.Types.Timing.MilliSeconds(this.windowStartTime),\n      endTime: TraceEngine.Types.Timing.MilliSeconds(this.windowEndTime),\n    });\n  }\n\n  private onWindowChanged(event: Common.EventTarget.EventTargetEvent<WindowChangedWithPositionEvent>): void {\n    if (this.muteOnWindowChanged) {\n      return;\n    }\n    // Always use first control as a time converter.\n    if (!this.overviewControls.length) {\n      return;\n    }\n\n    this.windowStartTime =\n        event.data.rawStartValue === this.overviewCalculator.minimumBoundary() ? 0 : event.data.rawStartValue;\n    this.windowEndTime =\n        event.data.rawEndValue === this.overviewCalculator.maximumBoundary() ? Infinity : event.data.rawEndValue;\n\n    const windowTimes = {\n      startTime: TraceEngine.Types.Timing.MilliSeconds(this.windowStartTime),\n      endTime: TraceEngine.Types.Timing.MilliSeconds(this.windowEndTime),\n    };\n\n    this.dispatchEventToListeners(Events.OverviewPaneWindowChanged, windowTimes);\n  }\n\n  setWindowTimes(startTime: number, endTime: number): void {\n    if (startTime === this.windowStartTime && endTime === this.windowEndTime) {\n      return;\n    }\n    this.windowStartTime = startTime;\n    this.windowEndTime = endTime;\n    this.updateWindow();\n    this.dispatchEventToListeners(Events.OverviewPaneWindowChanged, {\n      startTime: TraceEngine.Types.Timing.MilliSeconds(startTime),\n      endTime: TraceEngine.Types.Timing.MilliSeconds(endTime),\n    });\n  }\n\n  private updateWindow(): void {\n    if (!this.overviewControls.length) {\n      return;\n    }\n    const absoluteMin = this.overviewCalculator.minimumBoundary();\n    const timeSpan = this.overviewCalculator.maximumBoundary() - absoluteMin;\n    const haveRecords = absoluteMin > 0;\n    const left = haveRecords && this.windowStartTime ? Math.min((this.windowStartTime - absoluteMin) / timeSpan, 1) : 0;\n    const right = haveRecords && this.windowEndTime < Infinity ? (this.windowEndTime - absoluteMin) / timeSpan : 1;\n    this.muteOnWindowChanged = true;\n    this.overviewGrid.setWindow(left, right);\n    this.muteOnWindowChanged = false;\n  }\n}\n\nexport const enum Events {\n  OverviewPaneWindowChanged = 'OverviewPaneWindowChanged',\n  OverviewPaneBreadcrumbAdded = 'OverviewPaneBreadcrumbAdded',\n}\n\nexport interface OverviewPaneWindowChangedEvent {\n  startTime: TraceEngine.Types.Timing.MilliSeconds;\n  endTime: TraceEngine.Types.Timing.MilliSeconds;\n}\n\nexport interface OverviewPaneBreadcrumbAddedEvent {\n  startTime: TraceEngine.Types.Timing.MilliSeconds;\n  endTime: TraceEngine.Types.Timing.MilliSeconds;\n}\n\nexport type EventTypes = {\n  [Events.OverviewPaneWindowChanged]: OverviewPaneWindowChangedEvent,\n  [Events.OverviewPaneBreadcrumbAdded]: OverviewPaneBreadcrumbAddedEvent,\n};\n\nexport interface TimelineOverview {\n  show(parentElement: Element, insertBefore?: Element|null): void;\n  // if start and end are specified, data will be filtered and only data within those bound will be displayed\n  update(start?: TraceEngine.Types.Timing.MilliSeconds, end?: TraceEngine.Types.Timing.MilliSeconds): void;\n  dispose(): void;\n  reset(): void;\n  overviewInfoPromise(x: number): Promise<Element|null>;\n  onClick(event: Event): boolean;\n  setCalculator(calculator: TimelineOverviewCalculator): void;\n}\n\nexport class TimelineOverviewBase extends UI.Widget.VBox implements TimelineOverview {\n  private calculatorInternal: TimelineOverviewCalculator|null;\n  private canvas: HTMLCanvasElement;\n  private contextInternal: CanvasRenderingContext2D|null;\n\n  constructor() {\n    super();\n    this.calculatorInternal = null;\n    this.canvas = (this.element.createChild('canvas', 'fill') as HTMLCanvasElement);\n    this.contextInternal = this.canvas.getContext('2d');\n  }\n\n  width(): number {\n    return this.canvas.width;\n  }\n\n  height(): number {\n    return this.canvas.height;\n  }\n\n  context(): CanvasRenderingContext2D {\n    if (!this.contextInternal) {\n      throw new Error('Unable to retrieve canvas context');\n    }\n    return this.contextInternal as CanvasRenderingContext2D;\n  }\n\n  calculator(): TimelineOverviewCalculator|null {\n    return this.calculatorInternal;\n  }\n\n  update(): void {\n    throw new Error('Not implemented');\n  }\n\n  dispose(): void {\n    this.detach();\n  }\n\n  reset(): void {\n  }\n\n  async overviewInfoPromise(_x: number): Promise<Element|null> {\n    return null;\n  }\n\n  setCalculator(calculator: TimelineOverviewCalculator): void {\n    this.calculatorInternal = calculator;\n  }\n\n  onClick(_event: Event): boolean {\n    return false;\n  }\n\n  resetCanvas(): void {\n    if (this.element.clientWidth) {\n      this.setCanvasSize(this.element.clientWidth, this.element.clientHeight);\n    }\n  }\n\n  setCanvasSize(width: number, height: number): void {\n    this.canvas.width = width * window.devicePixelRatio;\n    this.canvas.height = height * window.devicePixelRatio;\n  }\n}\n\nexport class OverviewInfo {\n  private readonly anchorElement: Element;\n  private glassPane: UI.GlassPane.GlassPane;\n  private visible: boolean;\n  private readonly element: Element;\n\n  constructor(anchor: Element) {\n    this.anchorElement = anchor;\n    this.glassPane = new UI.GlassPane.GlassPane();\n    this.glassPane.setPointerEventsBehavior(UI.GlassPane.PointerEventsBehavior.PierceContents);\n    this.glassPane.setMarginBehavior(UI.GlassPane.MarginBehavior.Arrow);\n    this.glassPane.setSizeBehavior(UI.GlassPane.SizeBehavior.MeasureContent);\n    this.visible = false;\n    this.element = UI.UIUtils\n                       .createShadowRootWithCoreStyles(this.glassPane.contentElement, {\n                         cssFile: [timelineOverviewInfoStyles],\n                         delegatesFocus: undefined,\n                       })\n                       .createChild('div', 'overview-info');\n  }\n\n  async setContent(contentPromise: Promise<DocumentFragment>): Promise<void> {\n    this.visible = true;\n    const content = await contentPromise;\n    if (!this.visible) {\n      return;\n    }\n    this.element.removeChildren();\n    this.element.appendChild(content);\n    this.glassPane.setContentAnchorBox(this.anchorElement.boxInWindow());\n    if (!this.glassPane.isShowing()) {\n      this.glassPane.show((this.anchorElement.ownerDocument as Document));\n    }\n  }\n\n  hide(): void {\n    this.visible = false;\n    this.glassPane.hide();\n  }\n}\n"]}