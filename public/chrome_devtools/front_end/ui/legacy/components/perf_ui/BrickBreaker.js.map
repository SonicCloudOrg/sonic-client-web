{"version":3,"file":"BrickBreaker.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/perf_ui/BrickBreaker.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as WindowBounds from '../../../../services/window_bounds/window_bounds.js';\nimport * as ThemeSupport from '../../theme_support/theme_support.js';\n\nimport {type FlameChart} from './FlameChart.js';\n\nconst UIStrings = {\n  /**\n   *@description Message congratulating the user for having won a game.\n   */\n  congrats: 'Congrats, you win!',\n  /**\n   *@description A Postscript hinting the user the possibility to open the game using a keycombo.\n   */\n  ps: 'PS: You can also open the game by typing `fixme`',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/perf_ui/BrickBreaker.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ntype Brick = {\n  x: number,\n  y: number,\n  width: number,\n};\n\nconst MAX_DELTA = 16;\nconst MIN_DELTA = 10;\nconst MAX_PADDLE_LENGTH = 150;\nconst MIN_PADDLE_LENGTH = 85;\nconst PADDLE_HEIGHT = 15;\nconst BALL_RADIUS = 10;\n\ninterface ColorPalette {\n  light: string;\n  mediumLighter: string;\n  mediumDarker: string;\n  dark: string;\n}\n\nconst colorPallettes: ColorPalette[] = [\n  // blues\n  {\n    light: 'rgb(224,240,255)',\n    mediumLighter: 'rgb(176,208,255)',\n    mediumDarker: 'rgb(112,160,221)',\n    dark: 'rgb(0,92,153)',\n  },\n  // pinks\n  {\n    light: 'rgb(253, 216, 229)',\n    mediumLighter: 'rgb(250, 157, 188)',\n    mediumDarker: 'rgb(249, 98, 154)',\n    dark: 'rgb(254, 5, 105)',\n  },\n  // pastel pinks\n  {\n    light: 'rgb(254, 234, 234)',\n    mediumLighter: 'rgb(255, 216, 216)',\n    mediumDarker: 'rgb(255, 195, 195)',\n    dark: 'rgb(235, 125, 138)',\n  },\n  // purples\n  {\n    light: 'rgb(226,183,206)',\n    mediumLighter: 'rgb(219,124,165)',\n    mediumDarker: 'rgb(146,60,129)',\n    dark: 'rgb(186, 85, 255)',\n  },\n  // greens\n  {\n    light: 'rgb(206,255,206)',\n    mediumLighter: 'rgb(128,255,128)',\n    mediumDarker: 'rgb(0,246,0)',\n    dark: 'rgb(0,187,0)',\n  },\n  // reds\n  {\n    light: 'rgb(255, 188, 181)',\n    mediumLighter: 'rgb(254, 170, 170)',\n    mediumDarker: 'rgb(215, 59, 43)',\n    dark: 'rgb(187, 37, 23)',\n  },\n  // aqua\n  {\n    light: 'rgb(236, 254, 250)',\n    mediumLighter: 'rgb(204, 255, 245)',\n    mediumDarker: 'rgb(164, 240, 233)',\n    dark: 'rgb(72,189,144)',\n  },\n  // yellow/pink\n  {\n    light: 'rgb(255, 225, 185)',\n    mediumLighter: 'rgb(255, 204, 141)',\n    mediumDarker: 'rgb(240, 140, 115)',\n    dark: 'rgb(211, 96, 117)',\n  },\n  // ocean breeze\n  {\n    light: 'rgb(218, 255, 248)',\n    mediumLighter: 'rgb(177, 235, 236)',\n    mediumDarker: 'rgb(112, 214, 214)',\n    dark: 'rgb(34, 205, 181)',\n  },\n];\n\n/* eslint-disable rulesdir/check_component_naming, rulesdir/custom_element_definitions_location, rulesdir/no_underscored_properties, rulesdir/ban_style_tags_in_lit_html, rulesdir/ban_a_tags_in_lit_html, rulesdir/lit_html_host_this */\nexport class BrickBreaker extends HTMLElement {\n  #canvas: HTMLCanvasElement;\n  #ctx: CanvasRenderingContext2D;\n\n  #helperCanvas: HTMLCanvasElement;\n  #helperCanvasCtx: CanvasRenderingContext2D;\n  #scorePanel: HTMLElement;\n  #trackTimelineOffset: number = 0;\n  #visibleEntries: Set<number> = new Set();\n  #brokenBricks: Map<number, Brick> = new Map();\n  #keyDownHandlerBound = this.#keyDownHandler.bind(this);\n  #keyUpHandlerBound = this.#keyUpHandler.bind(this);\n  #keyPressHandlerBound = this.#keyPressHandler.bind(this);\n  #closeGameBound = this.#closeGame.bind(this);\n  #mouseMoveHandlerBound = this.#mouseMoveHandler.bind(this);\n  #boundingElement = WindowBounds.WindowBoundsService.WindowBoundsServiceImpl.instance().getDevToolsBoundingElement();\n  // Value by which we moved the game up relative to the viewport\n  #gameViewportOffset: number = 0;\n  #running = false;\n  #initialDPR = devicePixelRatio;\n  #ballX = 0;\n  #ballY = 0;\n  #ballDx = 0;\n  #ballDy = 0;\n  #paddleX = 0;\n  #rightPressed = false;\n  #leftPressed = false;\n  #brickHeight = 0;\n  #lives = 0;\n  #blockCount = 0;\n  #paddleLength = MAX_PADDLE_LENGTH;\n  #minScreenHeight = 150;\n  #maxScreenHeight = 1500;\n  #screenHeightDiff = this.#maxScreenHeight - this.#minScreenHeight;\n  // Value from 0.1 to 1 that multiplies speed depending on the screen height\n  #deltaMultiplier = 0;\n  #deltaVectorLength = 0;\n  #currentPalette: ColorPalette;\n  constructor(private timelineFlameChart: FlameChart) {\n    super();\n    this.#canvas = (this.createChild('canvas', 'fill') as HTMLCanvasElement);\n    this.#ctx = this.#canvas.getContext('2d') as CanvasRenderingContext2D;\n    this.#helperCanvas = document.createElement('canvas');\n    this.#helperCanvasCtx = this.#helperCanvas.getContext('2d') as CanvasRenderingContext2D;\n    const randomPaletteIndex = Math.floor(Math.random() * colorPallettes.length);\n    this.#currentPalette = colorPallettes[randomPaletteIndex];\n    this.#scorePanel = (this.createChild('div') as HTMLElement);\n    this.#scorePanel.classList.add('scorePanel');\n    this.#scorePanel.style.borderImage =\n        'linear-gradient(' + this.#currentPalette.mediumDarker + ',' + this.#currentPalette.dark + ') 1';\n    this.initButton();\n  }\n\n  initButton(): void {\n    const button = (this.createChild('div') as HTMLElement);\n    button.classList.add('game-close-button');\n    button.innerHTML = '<b><span style=\\'font-size: 1.2em; color: white\\'>x</span></b>';\n    button.style.background = this.#currentPalette.dark;\n    button.style.boxShadow = this.#currentPalette.dark + ' 1px 1px, ' + this.#currentPalette.mediumDarker +\n        ' 3px 3px, ' + this.#currentPalette.mediumLighter + ' 5px 5px';\n    button.addEventListener('click', this.#closeGame.bind(this));\n    this.appendChild(button);\n  }\n\n  connectedCallback(): void {\n    this.#running = true;\n    this.#setUpNewGame();\n    this.#boundingElement.addEventListener('keydown', this.#keyDownHandlerBound);\n    document.addEventListener('keydown', this.#keyDownHandlerBound, false);\n    document.addEventListener('keyup', this.#keyUpHandlerBound, false);\n    document.addEventListener('keypress', this.#keyPressHandlerBound, false);\n    window.addEventListener('resize', this.#closeGameBound);\n    document.addEventListener('mousemove', this.#mouseMoveHandlerBound, false);\n    this.tabIndex = 1;\n    this.focus();\n  }\n\n  disconnectedCallback(): void {\n    this.#boundingElement.removeEventListener('keydown', this.#keyDownHandlerBound);\n    window.removeEventListener('resize', this.#closeGameBound);\n    document.removeEventListener('keydown', this.#keyDownHandlerBound, false);\n    document.removeEventListener('keyup', this.#keyUpHandlerBound, false);\n    window.removeEventListener('resize', this.#closeGameBound);\n    document.removeEventListener('keypress', this.#keyPressHandlerBound, false);\n    document.removeEventListener('mousemove', this.#mouseMoveHandlerBound, false);\n  }\n\n  #resetCanvas(): void {\n    const dPR = window.devicePixelRatio;\n    const height = Math.round(this.offsetHeight * dPR);\n    const width = Math.round(this.offsetWidth * dPR);\n    this.#canvas.height = height;\n    this.#canvas.width = width;\n    this.#canvas.style.height = (height / dPR) + 'px';\n    this.#canvas.style.width = (width / dPR) + 'px';\n  }\n\n  #closeGame(): void {\n    this.#running = false;\n    this.remove();\n  }\n\n  #setUpNewGame(): void {\n    this.#resetCanvas();\n    this.#deltaMultiplier = Math.max(0.1, (this.offsetHeight - this.#minScreenHeight) / this.#screenHeightDiff);\n    this.#deltaVectorLength = MIN_DELTA * this.#deltaMultiplier;\n    const trackData = this.timelineFlameChart.drawTrackOnCanvas('Main', this.#ctx, BALL_RADIUS);\n    if (trackData === null || trackData.visibleEntries.size === 0) {\n      console.error('Could not draw game');\n      this.#closeGame();\n      return;\n    }\n    this.#trackTimelineOffset = trackData.top;\n    this.#visibleEntries = trackData.visibleEntries;\n    this.#gameViewportOffset = this.#trackTimelineOffset +\n        this.timelineFlameChart.getCanvas().getBoundingClientRect().top - this.timelineFlameChart.getScrollOffset();\n\n    requestAnimationFrame(() => this.#animateFlameChartTopPositioning(trackData.top, trackData.height));\n  }\n\n  #animateFlameChartTopPositioning(currentOffset: number, flameChartHeight: number): void {\n    if (currentOffset === 0) {\n      this.#createGame();\n      return;\n    }\n    const dPR = window.devicePixelRatio;\n    const currentOffsetOnDPR = Math.round(currentOffset * dPR);\n    const newOffset = Math.max(currentOffset - 4, 0);\n    const newOffsetOnDPR = Math.round(newOffset * dPR);\n    const baseCanvas = this.#canvas;\n    this.#helperCanvas.height = baseCanvas.height;\n    this.#helperCanvas.width = baseCanvas.width;\n    this.#helperCanvas.style.height = baseCanvas.style.height;\n    this.#helperCanvas.style.width = baseCanvas.style.width;\n\n    this.#helperCanvasCtx.drawImage(\n        baseCanvas, 0, currentOffsetOnDPR, baseCanvas.width, flameChartHeight * dPR, 0, newOffsetOnDPR,\n        baseCanvas.width, flameChartHeight * dPR);\n    this.#resetCanvas();\n    this.#ctx.drawImage(this.#helperCanvas, 0, 0);\n    requestAnimationFrame(() => this.#animateFlameChartTopPositioning(newOffset, flameChartHeight));\n  }\n\n  #keyUpHandler(event: KeyboardEvent): void {\n    if (event.key === 'Right' || event.key === 'ArrowRight' || event.key === 'd') {\n      this.#rightPressed = false;\n      event.preventDefault();\n    } else if (event.key === 'Left' || event.key === 'ArrowLeft' || event.key === 'a') {\n      this.#leftPressed = false;\n      event.preventDefault();\n    } else {\n      event.stopImmediatePropagation();\n    }\n  }\n\n  #keyPressHandler(e: Event): void {\n    e.stopImmediatePropagation();\n    e.preventDefault();\n  }\n\n  #keyDownHandler(event: KeyboardEvent): void {\n    if (event.key === 'Escape') {\n      this.#closeGame();\n      event.stopImmediatePropagation();\n    } else if (event.key === 'Right' || event.key === 'ArrowRight' || event.key === 'd') {\n      this.#rightPressed = true;\n      event.preventDefault();\n    } else if (event.key === 'Left' || event.key === 'ArrowLeft' || event.key === 'a') {\n      this.#leftPressed = true;\n      event.preventDefault();\n    } else {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    }\n  }\n\n  #mouseMoveHandler(e: MouseEvent): void {\n    this.#paddleX = Math.max(e.offsetX - this.#paddleLength / 2, 0);\n    this.#paddleX = Math.min(this.#paddleX, this.offsetWidth - this.#paddleLength);\n  }\n\n  #createGame(): void {\n    this.#ballX = this.offsetWidth / 2;\n    this.#ballY = this.offsetHeight - PADDLE_HEIGHT - BALL_RADIUS;\n    this.#ballDx = 0;\n    this.#ballDy = -Math.SQRT2 * this.#deltaVectorLength;\n    this.#paddleX = (this.#canvas.width - this.#paddleLength) / 2;\n    this.#rightPressed = false;\n    this.#leftPressed = false;\n    this.#brickHeight = this.timelineFlameChart.getBarHeight();\n    this.#blockCount = this.#visibleEntries.size;\n    this.#lives = Math.max(Math.round(this.#blockCount / 17), 2);\n    this.#draw();\n  }\n\n  #restartBall(): void {\n    this.#ballX = this.offsetWidth / 2;\n    this.#ballY = this.offsetHeight - PADDLE_HEIGHT - BALL_RADIUS;\n    this.#ballDx = 0;\n    this.#ballDy = -Math.SQRT2 * this.#deltaVectorLength;\n  }\n\n  #drawBall(): void {\n    if (!this.#ctx) {\n      return;\n    }\n    const gradient = this.#ctx.createRadialGradient(\n        this.#ballX + BALL_RADIUS / 4,  // Offset towards the left\n        this.#ballY - BALL_RADIUS / 4,  // Offset downwards\n        0,\n        this.#ballX + BALL_RADIUS / 4,\n        this.#ballY - BALL_RADIUS / 4,\n        BALL_RADIUS,\n    );\n\n    // stops for gradient\n    gradient.addColorStop(0.3, this.#currentPalette.mediumLighter);\n    gradient.addColorStop(0.6, this.#currentPalette.mediumDarker);\n    gradient.addColorStop(1, this.#currentPalette.dark);\n\n    this.#ctx.beginPath();\n    this.#ctx.arc(this.#ballX, this.#ballY, BALL_RADIUS, 0, Math.PI * 2);\n    this.#ctx.fillStyle = gradient;\n    this.#ctx.fill();\n    this.#ctx.closePath();\n  }\n\n  #drawPaddle(): void {\n    if (!this.#ctx) {\n      return;\n    }\n\n    const gradient = this.#ctx.createRadialGradient(\n        this.#paddleX + this.#paddleLength / 3,\n        this.offsetHeight - PADDLE_HEIGHT - PADDLE_HEIGHT / 4,\n        0,\n        this.#paddleX + this.#paddleLength / 3,\n        this.offsetHeight - PADDLE_HEIGHT - PADDLE_HEIGHT / 4,\n        this.#paddleLength / 2,\n    );\n\n    gradient.addColorStop(0.3, this.#currentPalette.dark);        // Paddle color\n    gradient.addColorStop(1, this.#currentPalette.mediumDarker);  // Lighter color\n\n    this.#ctx.beginPath();\n    this.#ctx.rect(this.#paddleX, this.offsetHeight - PADDLE_HEIGHT, this.#paddleLength, PADDLE_HEIGHT);\n    this.#ctx.fillStyle = gradient;\n    this.#ctx.fill();\n    this.#ctx.closePath();\n  }\n\n  #patchBrokenBricks(): void {\n    if (!this.#ctx) {\n      return;\n    }\n    for (const brick of this.#brokenBricks.values()) {\n      this.#ctx.beginPath();\n      // Extend the patch width an extra 0.5 px to ensure the\n      // entry is completely covered.\n      this.#ctx.rect(brick.x, brick.y, brick.width + 0.5, this.#brickHeight + 0.5);\n      this.#ctx.fillStyle =\n          ThemeSupport.ThemeSupport.instance().getComputedValue('--sys-color-neutral-container', this);\n      this.#ctx.fill();\n      this.#ctx.closePath();\n    }\n  }\n\n  #draw(): void {\n    if (this.#initialDPR !== devicePixelRatio) {\n      this.#running = false;\n    }\n    if (this.#lives === 0) {\n      window.alert('GAME OVER');\n      this.#closeGame();\n      return;\n    }\n    if (this.#blockCount === 0) {\n      this.#party();\n      return;\n    }\n    this.#ctx.clearRect(0, 0, this.#canvas.width, this.#canvas.height);\n    this.#ctx.drawImage(this.#helperCanvas, 0, 0);\n    this.#ctx.save();\n    this.#ctx.scale(devicePixelRatio, devicePixelRatio);\n    this.#helperCanvasCtx.save();\n    this.#helperCanvasCtx.scale(devicePixelRatio, devicePixelRatio);\n    this.#patchBrokenBricks();\n    this.#drawBall();\n    this.#drawPaddle();\n    this.#brickCollisionDetection();\n\n    const lives = `<div><b><span style='font-size: 1.3em; color:  ${this.#currentPalette.dark}'>&#x2764;&#xfe0f; ${\n        this.#lives}</span></b></div>`;\n    const blocks = `<div><b><span style='font-size: 1.3em; color: ${this.#currentPalette.dark}'> 🧱 ${\n        this.#blockCount}</span></b></div>`;\n    this.#scorePanel.innerHTML = lives + blocks;\n\n    this.#blockCount = this.#visibleEntries.size - this.#brokenBricks.size;\n    this.#deltaVectorLength =\n        (MIN_DELTA + (MAX_DELTA - MIN_DELTA) * this.#brokenBricks.size / this.#visibleEntries.size) *\n        this.#deltaMultiplier;\n\n    this.#paddleLength = MAX_PADDLE_LENGTH -\n        (MAX_PADDLE_LENGTH - MIN_PADDLE_LENGTH) * this.#brokenBricks.size / this.#visibleEntries.size;\n\n    if (this.#ballX + this.#ballDx > this.offsetWidth - BALL_RADIUS || this.#ballX + this.#ballDx < BALL_RADIUS) {\n      // Ball bounces on a side wall.\n      this.#ballDx = -this.#ballDx;\n    }\n    if (this.#ballY + this.#ballDy < BALL_RADIUS) {\n      // Ball bounces on the top.\n      this.#ballDy = -this.#ballDy;\n    } else if (this.#ballY + this.#ballDy > this.offsetHeight - BALL_RADIUS && this.#ballDy > 0) {\n      // Ball is at the bottom, either on the paddle or in the\n      // void.\n      if (this.#ballX > (this.#paddleX - BALL_RADIUS) &&\n          this.#ballX < this.#paddleX + this.#paddleLength + BALL_RADIUS) {\n        // Ball bounces on the paddle, calculate this.ballDx and this.ballDy so that\n        // the speed remains constant.\n        // speed^2 = dx^2 + dy^2 = MAX_DELTA^2 + MAX_DELTA^2\n        // -> speed = MAX_DELTA * sqrt(2)\n        // (speed is measured in pixels / frame)\n\n        // The bouncing angle is determined by the portion of the\n        // paddle's length on which it falls and by the restriction\n        // -MAX_DELTA < this.ballDx < MAX_DELTA\n\n        // Since we allow for some margin of error (BALL_RADIUS), we need to\n        // round the ball x to be within the paddle.\n        let roundedBallX = Math.min(this.#ballX, this.#paddleX + this.#paddleLength);\n        roundedBallX = Math.max(roundedBallX, this.#paddleX);\n        const paddleLenghtPortion = (roundedBallX - this.#paddleX) * this.#deltaVectorLength * 2 / this.#paddleLength;\n        this.#ballDx = -this.#deltaVectorLength + paddleLenghtPortion;\n        // Solve for this.ballDy given the above equation and bounce up.\n        this.#ballDy = -Math.sqrt(2 * Math.pow(this.#deltaVectorLength, 2) - Math.pow(this.#ballDx, 2));\n      } else {\n        // Ball fell into oblivion, restart.\n        this.#restartBall();\n        this.#paddleX = (this.offsetWidth - this.#paddleLength) / 2;\n        this.#lives--;\n      }\n    }\n    const keyDelta = Math.round(this.clientWidth / 60);\n    if (this.#rightPressed && this.#paddleX < this.offsetWidth - this.#paddleLength) {\n      this.#paddleX += keyDelta;\n    } else if (this.#leftPressed && this.#paddleX > 0) {\n      this.#paddleX -= keyDelta;\n    }\n\n    this.#ballX += Math.round(this.#ballDx);\n    this.#ballY += Math.round(this.#ballDy);\n    this.#ctx.restore();\n    this.#helperCanvasCtx.restore();\n    if (this.#running) {\n      requestAnimationFrame(this.#draw.bind(this));\n    }\n  }\n  #brickCollisionDetection(): void {\n    // coordinatesToEntryIndex expects coordinates relative to the timeline canvas.\n    const timelineCanvasOffset = this.timelineFlameChart.getCanvas().getBoundingClientRect();\n\n    // Check collision if there is an entry on the top, bottom, left and right of the ball\n    const ballYRelativeToGame = this.#ballY + this.#gameViewportOffset - timelineCanvasOffset.top;\n    const entryIndexTop =\n        this.timelineFlameChart.coordinatesToEntryIndex(this.#ballX, ballYRelativeToGame + BALL_RADIUS);\n    const entryIndexBottom =\n        this.timelineFlameChart.coordinatesToEntryIndex(this.#ballX, ballYRelativeToGame - BALL_RADIUS);\n    const entryIndexRight =\n        this.timelineFlameChart.coordinatesToEntryIndex(this.#ballX + BALL_RADIUS, ballYRelativeToGame);\n    const entryIndexLeft =\n        this.timelineFlameChart.coordinatesToEntryIndex(this.#ballX - BALL_RADIUS, ballYRelativeToGame);\n\n    // Points on the 45 degree corners\n    const diffBetweenCornerandCircle = BALL_RADIUS / Math.SQRT2;\n    const entryIndexRightTop = this.timelineFlameChart.coordinatesToEntryIndex(\n        this.#ballX + diffBetweenCornerandCircle, ballYRelativeToGame + diffBetweenCornerandCircle);\n    const entryIndexLeftTop = this.timelineFlameChart.coordinatesToEntryIndex(\n        this.#ballX - diffBetweenCornerandCircle, ballYRelativeToGame + diffBetweenCornerandCircle);\n    const entryIndexRightBottom = this.timelineFlameChart.coordinatesToEntryIndex(\n        this.#ballX + diffBetweenCornerandCircle, ballYRelativeToGame - diffBetweenCornerandCircle);\n    const entryIndexLeftBottom = this.timelineFlameChart.coordinatesToEntryIndex(\n        this.#ballX - diffBetweenCornerandCircle, ballYRelativeToGame - diffBetweenCornerandCircle);\n\n    const breakBrick = (entryIndex: number): void => {\n      const entryCoordinates = this.timelineFlameChart.entryIndexToCoordinates(entryIndex);\n      if (entryCoordinates) {\n        // Cap entries starting before the visibile window in the game.\n        const entryBegin = Math.max(entryCoordinates.x - timelineCanvasOffset.left, 0);\n        // Extend the patch width and height an extra 0.5 px to ensure the\n        // entry is completely covered.\n        this.#brokenBricks.set(entryIndex, {\n          x: entryBegin - 0.5,\n          y: entryCoordinates.y - this.#gameViewportOffset - 0.5,\n          width: this.timelineFlameChart.entryWidth(entryIndex),\n        });\n      }\n    };\n\n    if (entryIndexTop > -1 && !this.#brokenBricks.has(entryIndexTop) && this.#visibleEntries.has(entryIndexTop)) {\n      this.#ballDy = -this.#ballDy;\n      breakBrick(entryIndexTop);\n      return;\n    }\n\n    if (entryIndexBottom > -1 && !this.#brokenBricks.has(entryIndexBottom) &&\n        this.#visibleEntries.has(entryIndexBottom)) {\n      this.#ballDy = -this.#ballDy;\n      breakBrick(entryIndexBottom);\n      return;\n    }\n\n    if (entryIndexRight > -1 && !this.#brokenBricks.has(entryIndexRight) && this.#visibleEntries.has(entryIndexRight)) {\n      this.#ballDx = -this.#ballDx;\n      breakBrick(entryIndexRight);\n      return;\n    }\n\n    if (entryIndexLeft > -1 && !this.#brokenBricks.has(entryIndexLeft) && this.#visibleEntries.has(entryIndexLeft)) {\n      this.#ballDx = -this.#ballDx;\n      breakBrick(entryIndexLeft);\n      return;\n    }\n\n    // if the brick hits on 45 degrees, reverse both directions\n    const diagonalIndexes = [entryIndexRightTop, entryIndexLeftTop, entryIndexRightBottom, entryIndexLeftBottom];\n    for (const index of diagonalIndexes) {\n      if (index > -1 && !this.#brokenBricks.has(index) && this.#visibleEntries.has(index)) {\n        this.#ballDx = -this.#ballDx;\n        this.#ballDy = -this.#ballDy;\n        breakBrick(index);\n        return;\n      }\n    }\n  }\n\n  #random(min: number, max: number): number {\n    return Math.floor(Math.random() * (max - min) + min);\n  }\n  #party(): void {\n    this.#resetCanvas();\n    let count = 0;\n    const columnCount = 15;\n    const rowCount = 5;\n    const xSpacing = this.offsetWidth / columnCount;\n    const ySpacing = this.offsetHeight * 0.7 / columnCount;\n    const timeoutIDs: number[] = [];\n    const randomOffset = (): number => -20 + Math.random() * 40;\n    const drawConfetti = (): void => {\n      for (let i = 0; i < columnCount * rowCount; i++) {\n        const confettiContainerElement = document.createElement('span');\n        confettiContainerElement.className = 'confetti-100';\n        confettiContainerElement.append(this.#createConfettiElement(\n            (i % columnCount) * xSpacing + randomOffset(), (i % rowCount) * ySpacing + randomOffset()));\n        timeoutIDs.push(window.setTimeout(() => this.append(confettiContainerElement), Math.random() * 100));\n        timeoutIDs.push(window.setTimeout(() => {\n          confettiContainerElement.remove();\n        }, 1000));\n      }\n      if (++count < 6) {\n        setTimeout(drawConfetti, Math.random() * 100 + 400);\n        return;\n      }\n      window.alert(`${i18nString(UIStrings.congrats)}\\n${i18nString(UIStrings.ps)}`);\n\n      timeoutIDs.forEach(id => clearTimeout(id));\n      this.#closeGame();\n    };\n    drawConfetti();\n  }\n\n  #createConfettiElement(x: number, y: number): HTMLElement {\n    const maxDistance = 400;\n    const maxRotation = 3;\n    const emojies = ['💯', '🎉', '🎊'];\n    const confettiElement = document.createElement('span');\n    confettiElement.textContent = emojies[this.#random(0, emojies.length)];\n    confettiElement.className = 'confetti-100-particle';\n    confettiElement.style.setProperty('--rotation', this.#random(-maxRotation * 360, maxRotation * 360) + 'deg');\n    confettiElement.style.setProperty('--to-X', this.#random(-maxDistance, maxDistance) + 'px');\n    confettiElement.style.setProperty('--to-Y', this.#random(-maxDistance, maxDistance) + 'px');\n    confettiElement.style.left = x + 'px';\n    confettiElement.style.top = y + 'px';\n\n    return confettiElement;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'brick-breaker': BrickBreaker;\n  }\n}\n\ncustomElements.define('brick-breaker', BrickBreaker);\n"]}