{"version":3,"file":"TimelineGrid.test.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/perf_ui/TimelineGrid.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as TraceEngine from '../../../../models/trace/trace.js';\nimport {describeWithLocale} from '../../../../testing/EnvironmentHelpers.js';\n\nimport * as PerfUI from './perf_ui.js';\n\nconst {MilliSeconds} = TraceEngine.Types.Timing;\n\ndescribeWithLocale('TimelineGrid', () => {\n  it('calculates a set of dividers for the grid', async () => {\n    const calculator = new PerfUI.TimelineOverviewCalculator.TimelineOverviewCalculator();\n    calculator.setDisplayWidth(200);\n    calculator.setBounds(MilliSeconds(0), MilliSeconds(200));\n\n    const dividers = PerfUI.TimelineGrid.TimelineGrid.calculateGridOffsets(calculator);\n    assert.deepEqual(dividers, {\n      offsets: [\n        {\n\n          position: 0,\n          time: 0,\n        },\n        {\n          position: 100,\n          time: 100,\n\n        },\n        {\n          position: 200,\n          time: 200,\n        },\n      ],\n      precision: 0,\n    });\n  });\n\n  it('ups the precision if it is showing decimal values', async () => {\n    const calculator = new PerfUI.TimelineOverviewCalculator.TimelineOverviewCalculator();\n    calculator.setDisplayWidth(1000);\n    calculator.setBounds(MilliSeconds(0), MilliSeconds(2));\n\n    const dividers = PerfUI.TimelineGrid.TimelineGrid.calculateGridOffsets(calculator);\n    assert.deepEqual(dividers, {\n      offsets: [\n        {\n          position: 0,\n          time: 0,\n        },\n        {\n          position: 100,\n          time: 0.2,\n        },\n        {\n          position: 200,\n          time: 0.4,\n        },\n        {\n          position: 300,\n          time: 0.6,\n        },\n        {\n          position: 400,\n          time: 0.8,\n        },\n        {\n          position: 500,\n          time: 1,\n        },\n        {\n          position: 600,\n          time: 1.2,\n        },\n        {\n          position: 700,\n          time: 1.4,\n        },\n        {\n          position: 800,\n          time: 1.6,\n        },\n        {\n          position: 900,\n          time: 1.8,\n        },\n        {\n          position: 1000,\n          time: 2,\n        },\n      ],\n      precision: 1,\n    });\n  });\n  it('generates more dividers if there is more pixel room', async () => {\n    const calculator = new PerfUI.TimelineOverviewCalculator.TimelineOverviewCalculator();\n    calculator.setDisplayWidth(1000);\n    calculator.setBounds(MilliSeconds(0), MilliSeconds(200));\n\n    const dividers = PerfUI.TimelineGrid.TimelineGrid.calculateGridOffsets(calculator);\n    assert.deepEqual(dividers, {\n      offsets: [\n        {\n          position: 0,\n          time: 0,\n        },\n        {\n          position: 100,\n          time: 20,\n        },\n        {\n          position: 200,\n          time: 40,\n        },\n        {\n          position: 300,\n          time: 60,\n        },\n        {\n          position: 400,\n          time: 80,\n        },\n        {\n          position: 500,\n          time: 100,\n        },\n        {\n          position: 600,\n          time: 120,\n        },\n        {\n          position: 700,\n          time: 140,\n        },\n        {\n          position: 800,\n          time: 160,\n        },\n        {\n          position: 900,\n          time: 180,\n        },\n        {\n          position: 1000,\n          time: 200,\n        },\n      ],\n      precision: 0,\n    });\n  });\n});\n"]}