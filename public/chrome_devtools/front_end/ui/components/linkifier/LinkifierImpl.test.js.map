{"version":3,"file":"LinkifierImpl.test.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/linkifier/LinkifierImpl.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../../core/platform/platform.js';\nimport {describeWithLocale} from '../../../testing/EnvironmentHelpers.js';\nimport * as Coordinator from '../render_coordinator/render_coordinator.js';\n\nimport * as Linkifier from './linkifier.js';\n\nconst coordinator = Coordinator.RenderCoordinator.RenderCoordinator.instance();\n\nimport {\n  dispatchClickEvent,\n  getEventPromise,\n  renderElementIntoDOM,\n} from '../../../testing/DOMHelpers.js';\ndescribeWithLocale('Linkifier', () => {\n  it('renders a link when given a URL', async () => {\n    const component = new Linkifier.Linkifier.Linkifier();\n    component.data = {\n      url: 'https://example.com' as Platform.DevToolsPath.UrlString,\n    };\n    renderElementIntoDOM(component);\n    await coordinator.done();\n    assert.isNotNull(component.shadowRoot);\n    const link = component.shadowRoot.querySelector('a');\n    assert.instanceOf(link, HTMLAnchorElement);\n    assert.strictEqual(link.innerText, 'example.com');\n  });\n\n  it('throws when given an invalid URL', () => {\n    const component = new Linkifier.Linkifier.Linkifier();\n\n    assert.throws(() => {\n      component.data = {url: Platform.DevToolsPath.EmptyUrlString};\n    }, 'Cannot construct a Linkifier without providing a valid string URL.');\n  });\n\n  it('appends the line number to the URL if given, and adds one to deal with 0 indexing', async () => {\n    const component = new Linkifier.Linkifier.Linkifier();\n    component.data = {\n      url: 'https://example.com' as Platform.DevToolsPath.UrlString,\n      lineNumber: 1,\n    };\n    renderElementIntoDOM(component);\n    await coordinator.done();\n    assert.isNotNull(component.shadowRoot);\n    const link = component.shadowRoot.querySelector('a');\n    assert.instanceOf(link, HTMLAnchorElement);\n    assert.strictEqual(link.innerText, 'example.com:2');\n  });\n\n  it('emits an event when clicked', async () => {\n    const component = new Linkifier.Linkifier.Linkifier();\n    component.data = {\n      url: 'https://example.com' as Platform.DevToolsPath.UrlString,\n      lineNumber: 1,\n      columnNumber: 50,\n    };\n    // Suppress the event so that the link is not actually opened in the test\n    // runner by the global handler.\n    component.addEventListener('linkifieractivated', e => {\n      e.stopPropagation();\n      e.preventDefault();\n    });\n    renderElementIntoDOM(component);\n    await coordinator.done();\n    assert.isNotNull(component.shadowRoot);\n    const link = component.shadowRoot.querySelector('a');\n    assert.instanceOf(link, HTMLAnchorElement);\n\n    const clickEventPromise = getEventPromise<Linkifier.Linkifier.LinkifierClick>(component, 'linkifieractivated');\n    dispatchClickEvent(link, {\n      cancelable: true,\n    });\n    const clickEvent = await clickEventPromise;\n    assert.deepEqual(clickEvent.data, {\n      url: 'https://example.com' as Platform.DevToolsPath.UrlString,\n      lineNumber: 1,\n      columnNumber: 50,\n    });\n  });\n});\n"]}