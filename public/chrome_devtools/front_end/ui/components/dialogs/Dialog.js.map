{"version":3,"file":"Dialog.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/dialogs/Dialog.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as WindowBoundsService from '../../../services/window_bounds/window_bounds.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as Coordinator from '../../../ui/components/render_coordinator/render_coordinator.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport dialogStyles from './dialog.css.js';\n\nconst coordinator = Coordinator.RenderCoordinator.RenderCoordinator.instance();\n\nconst IS_DIALOG_SUPPORTED = 'HTMLDialogElement' in globalThis;\n\n// Height in pixels of the dialog's connector. The connector is represented as\n// as a diamond and the height corresponds to half the height of the diamond.\n// (the visible height is only half of the diamond).\nexport const CONNECTOR_HEIGHT = 10;\nconst CONNECTOR_WIDTH = 2 * CONNECTOR_HEIGHT;\n\nconst DIALOG_ANIMATION_OFFSET = 20;\n\nexport const DIALOG_SIDE_PADDING = 5;\nexport const DIALOG_VERTICAL_PADDING = 3;\n\n// If the content of the dialog cannot be completely shown because otherwise\n// the dialog would overflow the window, the dialog's max width and height are\n// set such that the dialog remains inside the visible bounds. In this cases\n// some extra, determined by this constant, is added so that the dialog's borders\n// remain clearly visible. This constant accounts for the padding of the dialog's\n// content (20 px) and a 5px gap left on each extreme of the dialog from the viewport.\nexport const DIALOG_PADDING_FROM_WINDOW = 3 * CONNECTOR_HEIGHT;\ninterface DialogData {\n  /**\n   * Position or point the dialog is shown relative to.\n   * If the dialog instance will be shown as a modal, set\n   * this property to MODAL.\n   */\n  origin: DialogOrigin;\n  position: DialogVerticalPosition;\n  /**\n   * Horizontal alignment of the dialg with respect to its origin.\n   * Center by default.\n   */\n  horizontalAlignment: DialogHorizontalAlignment;\n  /**\n   * Whether the connector from the dialog to its origin is shown.\n   */\n  showConnector: boolean;\n\n  /**\n   * Optional function used to the determine the x coordinate of the connector's\n   * end (tip of the triangle), relative to the viewport. If not defined, the x\n   * coordinate of the origin's center is used instead.\n   */\n  getConnectorCustomXPosition: (() => number)|null;\n\n  /**\n   * Optional function called when the dialog is shown.\n   */\n  dialogShownCallback: (() => unknown)|null;\n\n  /**\n   * Optional. Service that provides the window dimensions used for positioning the Dialog.\n   */\n  windowBoundsService: WindowBoundsService.WindowBoundsService.WindowBoundsService;\n  /**\n   * Whether the dialog is closed when the 'Escape' key is pressed. When true, the event is\n   * propagation is stopped.\n   */\n  closeOnESC: boolean;\n  /**\n   * Whether the dialog is closed when a scroll event is detected outside of the dialog's\n   * content. Defaults to true.\n   */\n  closeOnScroll: boolean;\n  /**\n   * Specifies a context for the visual element.\n   */\n  jslogContext: string;\n}\n\ntype DialogAnchor = HTMLElement|DOMRect|DOMPoint;\n\nexport const MODAL = 'MODAL';\n\nexport type DialogOrigin = DialogAnchor|null|(() => DialogAnchor)|typeof MODAL;\nexport class Dialog extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-dialog`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  readonly #renderBound = this.#render.bind(this);\n  readonly #forceDialogCloseInDevToolsBound = this.#forceDialogCloseInDevToolsMutation.bind(this);\n  readonly #handleScrollAttemptBound = this.#handleScrollAttempt.bind(this);\n  readonly #props: DialogData = {\n    origin: MODAL,\n    position: DialogVerticalPosition.BOTTOM,\n    horizontalAlignment: DialogHorizontalAlignment.CENTER,\n    showConnector: false,\n    getConnectorCustomXPosition: null,\n    dialogShownCallback: null,\n    windowBoundsService: WindowBoundsService.WindowBoundsService.WindowBoundsServiceImpl.instance(),\n    closeOnESC: true,\n    closeOnScroll: true,\n    jslogContext: '',\n  };\n\n  #dialog: HTMLDialogElement|null = null;\n  #isPendingShowDialog = false;\n  #isPendingCloseDialog = false;\n  #hitArea = new DOMRect(0, 0, 0, 0);\n  #dialogClientRect = new DOMRect(0, 0, 0, 0);\n  #bestVerticalPositionInternal: DialogVerticalPosition|null = null;\n  #bestHorizontalAlignment: DialogHorizontalAlignment|null = null;\n  readonly #devtoolsMutationObserver = new MutationObserver(this.#forceDialogCloseInDevToolsBound);\n  readonly #dialogResizeObserver = new ResizeObserver(this.#updateDialogBounds.bind(this));\n  #devToolsBoundingElement = this.windowBoundsService.getDevToolsBoundingElement();\n\n  // We bind here because we have to listen to keydowns on the entire window,\n  // not on the Dialog element itself. This is because if the user has the\n  // dialog open, but their focus is elsewhere, and they hit ESC, we should\n  // still close the dialog.\n  #onKeyDownBound = this.#onKeyDown.bind(this);\n\n  get showConnector(): boolean {\n    return this.#props.showConnector;\n  }\n\n  set showConnector(showConnector: boolean) {\n    this.#props.showConnector = showConnector;\n    this.#onStateChange();\n  }\n\n  get origin(): DialogOrigin {\n    return this.#props.origin;\n  }\n\n  set origin(origin: DialogOrigin) {\n    this.#props.origin = origin;\n    this.#onStateChange();\n  }\n\n  get position(): DialogVerticalPosition {\n    return this.#props.position;\n  }\n\n  set position(position: DialogVerticalPosition) {\n    this.#props.position = position;\n    this.#onStateChange();\n  }\n\n  get horizontalAlignment(): DialogHorizontalAlignment {\n    return this.#props.horizontalAlignment;\n  }\n\n  set horizontalAlignment(alignment: DialogHorizontalAlignment) {\n    this.#props.horizontalAlignment = alignment;\n    this.#onStateChange();\n  }\n\n  get windowBoundsService(): WindowBoundsService.WindowBoundsService.WindowBoundsService {\n    return this.#props.windowBoundsService;\n  }\n\n  set windowBoundsService(windowBoundsService: WindowBoundsService.WindowBoundsService.WindowBoundsService) {\n    this.#props.windowBoundsService = windowBoundsService;\n    this.#devToolsBoundingElement = this.windowBoundsService.getDevToolsBoundingElement();\n    this.#onStateChange();\n  }\n\n  get bestVerticalPosition(): DialogVerticalPosition|null {\n    return this.#bestVerticalPositionInternal;\n  }\n\n  get bestHorizontalAlignment(): DialogHorizontalAlignment|null {\n    return this.#bestHorizontalAlignment;\n  }\n  get getConnectorCustomXPosition(): (() => number)|null {\n    return this.#props.getConnectorCustomXPosition;\n  }\n\n  set getConnectorCustomXPosition(connectorXPosition: (() => number)|null) {\n    this.#props.getConnectorCustomXPosition = connectorXPosition;\n    this.#onStateChange();\n  }\n\n  get dialogShownCallback(): (() => unknown)|null {\n    return this.#props.dialogShownCallback;\n  }\n\n  get jslogContext(): string {\n    return this.#props.jslogContext;\n  }\n\n  set dialogShownCallback(dialogShownCallback: (() => unknown)|null) {\n    this.#props.dialogShownCallback = dialogShownCallback;\n    this.#onStateChange();\n  }\n\n  set closeOnESC(closeOnESC: boolean) {\n    this.#props.closeOnESC = closeOnESC;\n    this.#onStateChange();\n  }\n\n  set closeOnScroll(closeOnScroll: boolean) {\n    this.#props.closeOnScroll = closeOnScroll;\n    this.#onStateChange();\n  }\n\n  set jslogContext(jslogContext: string) {\n    this.#props.jslogContext = jslogContext;\n    this.#onStateChange();\n  }\n\n  #updateDialogBounds(): void {\n    this.#dialogClientRect = this.#getDialog().getBoundingClientRect();\n  }\n\n  #onStateChange(): void {\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#renderBound);\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [dialogStyles];\n\n    window.addEventListener('resize', this.#forceDialogCloseInDevToolsBound);\n    document.body.addEventListener('keydown', this.#onKeyDownBound);\n    this.#devtoolsMutationObserver.observe(this.#devToolsBoundingElement, {childList: true, subtree: true});\n    this.#devToolsBoundingElement.addEventListener('wheel', this.#handleScrollAttemptBound);\n    this.style.setProperty('--dialog-padding', '0');\n    this.style.setProperty('--override-content-box-shadow', 'none');\n    this.style.setProperty('--dialog-display', IS_DIALOG_SUPPORTED ? 'block' : 'none');\n    this.style.setProperty('--override-dialog-content-border', `${CONNECTOR_HEIGHT}px solid transparent`);\n    this.style.setProperty('--dialog-padding', `${DIALOG_VERTICAL_PADDING}px ${DIALOG_SIDE_PADDING}px`);\n  }\n\n  disconnectedCallback(): void {\n    window.removeEventListener('resize', this.#forceDialogCloseInDevToolsBound);\n    document.body.removeEventListener('keydown', this.#onKeyDownBound);\n    this.#devToolsBoundingElement.removeEventListener('wheel', this.#handleScrollAttemptBound);\n    this.#devtoolsMutationObserver.disconnect();\n    this.#dialogResizeObserver.disconnect();\n  }\n\n  #getDialog(): HTMLDialogElement {\n    if (!this.#dialog) {\n      this.#dialog = this.#shadow.querySelector('dialog');\n      if (!this.#dialog) {\n        throw new Error('Dialog not found');\n      }\n      this.#dialogResizeObserver.observe(this.#dialog);\n    }\n    return this.#dialog;\n  }\n\n  getHitArea(): DOMRect {\n    return this.#hitArea;\n  }\n\n  async setDialogVisible(show: boolean): Promise<void> {\n    if (show) {\n      await this.#showDialog();\n      return;\n    }\n    this.#closeDialog();\n  }\n\n  async #handlePointerEvent(evt: MouseEvent|PointerEvent): Promise<void> {\n    evt.stopPropagation();\n    // If the user uses the keyboard to interact with an element within the\n    // dialog, it will trigger a pointer event (for example, the user might use\n    // their spacebar to \"click\" on a form input element). In that case the\n    // pointerType will be an empty string, rather than `mouse`, `pen` or\n    // `touch`. In this instance, we early return, because we only need to\n    // worry about clicks outside of the dialog. Once the dialog is open, the\n    // user can only use the keyboard to navigate within the dialog; so we\n    // don't have to concern ourselves with keyboard events that occur outside\n    // the dialog's bounds.\n    if (evt instanceof PointerEvent && evt.pointerType === '') {\n      return;\n    }\n\n    const eventWasInDialogContent = this.#mouseEventWasInDialogContent(evt);\n    const eventWasInHitArea = this.#mouseEventWasInHitArea(evt);\n    if (eventWasInDialogContent) {\n      return;\n    }\n    if (evt.type === 'pointermove') {\n      if (eventWasInHitArea) {\n        return;\n      }\n      this.dispatchEvent(new PointerLeftDialogEvent());\n      return;\n    }\n    this.dispatchEvent(new ClickOutsideDialogEvent());\n  }\n\n  #mouseEventWasInDialogContent(evt: MouseEvent): boolean {\n    const dialogBounds = this.#dialogClientRect;\n    const animationOffSetValue = this.bestVerticalPosition === DialogVerticalPosition.BOTTOM ?\n        DIALOG_ANIMATION_OFFSET :\n        -1 * DIALOG_ANIMATION_OFFSET;\n    const eventWasDialogContentX =\n        evt.pageX >= dialogBounds.left && evt.pageX <= dialogBounds.left + dialogBounds.width;\n    const eventWasDialogContentY = evt.pageY >= dialogBounds.top + animationOffSetValue &&\n        evt.pageY <= dialogBounds.top + dialogBounds.height + animationOffSetValue;\n\n    return eventWasDialogContentX && eventWasDialogContentY;\n  }\n\n  #mouseEventWasInHitArea(evt: MouseEvent): boolean {\n    const hitAreaBounds = this.#hitArea;\n    const eventWasInHitAreaX = evt.pageX >= hitAreaBounds.left && evt.pageX <= hitAreaBounds.left + hitAreaBounds.width;\n    const eventWasInHitAreaY = evt.pageY >= hitAreaBounds.top && evt.pageY <= hitAreaBounds.top + hitAreaBounds.height;\n\n    return eventWasInHitAreaX && eventWasInHitAreaY;\n  }\n\n  #getCoordinatesFromDialogOrigin(origin: DialogOrigin): AnchorBounds {\n    if (!origin || origin === MODAL) {\n      throw new Error('Dialog origin is null');\n    }\n    const anchor = origin instanceof Function ? origin() : origin;\n    if (anchor instanceof DOMPoint) {\n      return {top: anchor.y, bottom: anchor.y, left: anchor.x, right: anchor.x};\n    }\n    if (anchor instanceof HTMLElement) {\n      return anchor.getBoundingClientRect();\n    }\n    return anchor;\n  }\n\n  #getBestHorizontalAlignment(anchorBounds: AnchorBounds, devtoolsBounds: DOMRect): DialogHorizontalAlignment {\n    if (devtoolsBounds.right - anchorBounds.left > anchorBounds.right - devtoolsBounds.left) {\n      return DialogHorizontalAlignment.LEFT;\n    }\n    return DialogHorizontalAlignment.RIGHT;\n  }\n\n  #getBestVerticalPosition(originBounds: AnchorBounds, dialogHeight: number, devtoolsBounds: DOMRect):\n      DialogVerticalPosition {\n    // If the dialog's full height doesn't fit at the bottom attempt to\n    // position it at the top. If it doesn't fit at the top either\n    // position it at the bottom and make the overflow scrollable.\n    if (originBounds.bottom + dialogHeight > devtoolsBounds.height &&\n        originBounds.top - dialogHeight > devtoolsBounds.top) {\n      return DialogVerticalPosition.TOP;\n    }\n    return DialogVerticalPosition.BOTTOM;\n  }\n\n  #positionDialog(): void {\n    if (!this.#props.origin) {\n      return;\n    }\n\n    this.#isPendingShowDialog = true;\n    void coordinator.read(() => {\n      // Fixed elements are positioned relative to the window, regardless if\n      // DevTools is docked. As such, if DevTools is docked we must account for\n      // its offset relative to the window when positioning fixed elements.\n      // DevTools' effective offset can be determined using\n      // this.#devToolsBoundingElement.\n      const devtoolsBounds = this.#devToolsBoundingElement.getBoundingClientRect();\n      const devToolsWidth = devtoolsBounds.width;\n      const devToolsHeight = devtoolsBounds.height;\n      const devToolsLeft = devtoolsBounds.left;\n      const devToolsTop = devtoolsBounds.top;\n      const devToolsRight = devtoolsBounds.right;\n      if (this.#props.origin === MODAL) {\n        void coordinator.write(() => {\n          this.style.setProperty('--dialog-top', `${devToolsTop}px`);\n          this.style.setProperty('--dialog-left', `${devToolsLeft}px`);\n          this.style.setProperty('--dialog-margin', 'auto');\n          this.style.setProperty('--dialog-margin-left', 'auto');\n          this.style.setProperty('--dialog-margin-bottom', 'auto');\n          this.style.setProperty('--dialog-max-height', `${devToolsHeight - DIALOG_PADDING_FROM_WINDOW}px`);\n          this.style.setProperty('--dialog-max-width', `${devToolsWidth - DIALOG_PADDING_FROM_WINDOW}px`);\n          this.style.setProperty('--dialog-right', `${document.body.clientWidth - devToolsRight}px`);\n        });\n        return;\n      }\n      const anchor = this.#props.origin;\n      const absoluteAnchorBounds = this.#getCoordinatesFromDialogOrigin(anchor);\n      const {top: anchorTop, right: anchorRight, bottom: anchorBottom, left: anchorLeft} = absoluteAnchorBounds;\n      const originCenterX = (anchorLeft + anchorRight) / 2;\n      const hitAreaWidth = anchorRight - anchorLeft + CONNECTOR_HEIGHT;\n      const windowWidth = document.body.clientWidth;\n      const connectorFixedXValue =\n          this.#props.getConnectorCustomXPosition ? this.#props.getConnectorCustomXPosition() : originCenterX;\n      void coordinator.write(() => {\n        this.style.setProperty('--dialog-top', '0');\n\n        // Start by showing the dialog hidden to allow measuring its width.\n        const dialog = this.#getDialog();\n        dialog.style.visibility = 'hidden';\n        if (this.#isPendingShowDialog && !dialog.hasAttribute('open')) {\n          dialog.showModal();\n          this.setAttribute('open', '');\n          this.#isPendingShowDialog = false;\n        }\n        const {width: dialogWidth, height: dialogHeight} = dialog.getBoundingClientRect();\n        this.#bestHorizontalAlignment = this.#props.horizontalAlignment === DialogHorizontalAlignment.AUTO ?\n            this.#getBestHorizontalAlignment(absoluteAnchorBounds, devtoolsBounds) :\n            this.#props.horizontalAlignment;\n\n        this.#bestVerticalPositionInternal = this.#props.position === DialogVerticalPosition.AUTO ?\n            this.#getBestVerticalPosition(absoluteAnchorBounds, dialogHeight, devtoolsBounds) :\n            this.#props.position;\n        if (this.#bestHorizontalAlignment === DialogHorizontalAlignment.AUTO ||\n            this.#bestVerticalPositionInternal === DialogVerticalPosition.AUTO) {\n          return;\n        }\n        this.#hitArea.height = anchorBottom - anchorTop + (CONNECTOR_HEIGHT * (this.showConnector ? 2 : 1));\n        this.#hitArea.width = hitAreaWidth;\n        let connectorRelativeXValue = 0;\n        // If the connector is to be shown, the dialog needs a minimum width such that it covers\n        // the connector's width.\n        this.style.setProperty(\n            '--content-min-width',\n            `${connectorFixedXValue - anchorLeft + CONNECTOR_WIDTH + DIALOG_SIDE_PADDING * 2}px`);\n        this.style.setProperty('--dialog-left', 'auto');\n        this.style.setProperty('--dialog-right', 'auto');\n        this.style.setProperty('--dialog-margin', '0');\n        const offsetToCoverConnector = this.showConnector ? CONNECTOR_WIDTH * 3 / 4 : 0;\n        switch (this.#bestHorizontalAlignment) {\n          case DialogHorizontalAlignment.LEFT: {\n            // Position the dialog such that its left border is in line with that of its anchor.\n            // If this means the dialog's left border is out of DevTools bounds, move it to the right.\n            // Cap its width as needed so that the right border doesn't overflow.\n            const dialogLeft = Math.max(anchorLeft - offsetToCoverConnector, devToolsLeft);\n            const devtoolsRightBorderToDialogLeft = devToolsRight - dialogLeft;\n            const dialogMaxWidth = devtoolsRightBorderToDialogLeft - DIALOG_PADDING_FROM_WINDOW;\n            connectorRelativeXValue = connectorFixedXValue - dialogLeft - DIALOG_SIDE_PADDING;\n            this.style.setProperty('--dialog-left', `${dialogLeft}px`);\n            this.#hitArea.x = anchorLeft;\n            this.style.setProperty('--dialog-max-width', `${dialogMaxWidth}px`);\n            break;\n          }\n          case DialogHorizontalAlignment.RIGHT: {\n            // Position the dialog such that its right border is in line with that of its anchor.\n            // If this means the dialog's right border is out of DevTools bounds, move it to the left.\n            // Cap its width as needed so that the left border doesn't overflow.\n            const windowRightBorderToAnchorRight = windowWidth - anchorRight;\n            const windowRightBorderToDevToolsRight = windowWidth - devToolsRight;\n            const windowRightBorderToDialogRight =\n                Math.max(windowRightBorderToAnchorRight - offsetToCoverConnector, windowRightBorderToDevToolsRight);\n\n            const dialogRight = windowWidth - windowRightBorderToDialogRight;\n            const devtoolsLeftBorderToDialogRight = dialogRight - devToolsLeft;\n            const dialogMaxWidth = devtoolsLeftBorderToDialogRight - DIALOG_PADDING_FROM_WINDOW;\n            const dialogCappedWidth = Math.min(dialogMaxWidth, dialogWidth);\n\n            const dialogLeft = dialogRight - dialogCappedWidth;\n            connectorRelativeXValue = connectorFixedXValue - dialogLeft;\n\n            this.#hitArea.x = windowWidth - windowRightBorderToDialogRight - hitAreaWidth;\n            this.style.setProperty('--dialog-right', `${windowRightBorderToDialogRight}px`);\n            this.style.setProperty('--dialog-max-width', `${dialogMaxWidth}px`);\n            break;\n          }\n          case DialogHorizontalAlignment.CENTER: {\n            // Position the dialog aligned with its anchor's center as long as its borders don't overlap\n            // with those of DevTools. In case one border overlaps, move the dialog to the opposite side.\n            // In case both borders overlap, reduce its width to that of DevTools.\n            const dialogCappedWidth = Math.min(devToolsWidth - DIALOG_PADDING_FROM_WINDOW, dialogWidth);\n\n            let dialogLeft = Math.max(originCenterX - dialogCappedWidth * 0.5, devToolsLeft);\n            dialogLeft = Math.min(dialogLeft, devToolsRight - dialogCappedWidth);\n            connectorRelativeXValue = connectorFixedXValue - dialogLeft - DIALOG_SIDE_PADDING;\n            this.style.setProperty('--dialog-left', `${dialogLeft}px`);\n            this.#hitArea.x = originCenterX - hitAreaWidth * 0.5;\n            this.style.setProperty('--dialog-max-width', `${devToolsWidth - DIALOG_PADDING_FROM_WINDOW}px`);\n            break;\n          }\n          default:\n            Platform.assertNever(\n                this.#bestHorizontalAlignment, `Unknown alignment type: ${this.#bestHorizontalAlignment}`);\n        }\n        const visibleConnectorHeight = this.showConnector ? CONNECTOR_HEIGHT : 0;\n        const clipPathConnectorStartX = connectorRelativeXValue - CONNECTOR_WIDTH / 2;\n        const clipPathConnectorEndX = connectorRelativeXValue + CONNECTOR_WIDTH / 2;\n        let [p1, p2, p3, p4, p5, p6, p7, p8, p9] = ['', '', '', '', '', '', '', '', '', ''];\n\n        const PSEUDO_BORDER_RADIUS = 2;\n        switch (this.#bestVerticalPositionInternal) {\n          case DialogVerticalPosition.TOP: {\n            //  p1                              p2\n            //   *-----------------------------*\n            //   |                             |\n            //   |                             |\n            // p9|                             |\n            //    \\__________________p7  p5____/ p3 <-- A pseudo curve is added to the clip path to\n            //  p8                     \\/      p4        imitate a curved boder.\n            //                         p6\n            //   |-connectorRelativeX--|\n            const clipPathBottom = `calc(100% - ${CONNECTOR_HEIGHT}px)`;\n            if (this.#props.showConnector) {\n              p1 = '0 0';\n              p2 = '100% 0';\n              p3 = `100% calc(${clipPathBottom} - ${PSEUDO_BORDER_RADIUS}px)`;\n              p4 = `calc(100% - ${PSEUDO_BORDER_RADIUS}px) ${clipPathBottom}`;\n              p5 = `${clipPathConnectorStartX}px ${clipPathBottom}`;\n              p6 = `${connectorRelativeXValue}px 100%`;\n              p7 = `${clipPathConnectorEndX}px ${clipPathBottom}`;\n              p8 = `${PSEUDO_BORDER_RADIUS}px ${clipPathBottom}`;\n              p9 = `0 calc(${clipPathBottom} - ${PSEUDO_BORDER_RADIUS}px)`;\n            }\n\n            this.style.setProperty(\n                '--content-padding-bottom',\n                `${CONNECTOR_HEIGHT + (this.#props.showConnector ? CONNECTOR_HEIGHT : 0)}px`);\n            this.style.setProperty('--content-padding-top', `${CONNECTOR_HEIGHT}px`);\n            this.style.setProperty('--dialog-top', '0');\n            this.style.setProperty('--dialog-margin', 'auto');\n            this.style.setProperty('--dialog-margin-bottom', `${innerHeight - anchorTop}px`);\n            this.#hitArea.y = anchorTop - 2 * CONNECTOR_HEIGHT;\n            this.style.setProperty('--dialog-offset-y', `${DIALOG_ANIMATION_OFFSET}px`);\n            this.style.setProperty(\n                '--dialog-max-height',\n                `${\n                    devToolsHeight - (innerHeight - anchorTop) - DIALOG_PADDING_FROM_WINDOW -\n                    visibleConnectorHeight}px`);\n            break;\n          }\n          case DialogVerticalPosition.BOTTOM: {\n            //                p4\n            //     p2_________/\\_________p6\n            //     /        p3  p5        \\\n            // p1 |                        | p7\n            //    |                        |\n            // p9 *________________________* p8\n\n            if (this.#props.showConnector) {\n              p1 = `0 ${CONNECTOR_HEIGHT + PSEUDO_BORDER_RADIUS}px`;\n              p2 = `${PSEUDO_BORDER_RADIUS}px ${CONNECTOR_HEIGHT}px`;\n              p3 = `${clipPathConnectorStartX}px ${CONNECTOR_HEIGHT}px`;\n              p4 = `${connectorRelativeXValue}px 0`;\n              p5 = `${clipPathConnectorEndX}px ${CONNECTOR_HEIGHT}px`;\n              p6 = `calc(100% - ${PSEUDO_BORDER_RADIUS}px) ${CONNECTOR_HEIGHT}px`;\n              p7 = `100% ${CONNECTOR_HEIGHT + PSEUDO_BORDER_RADIUS}px`;\n              p8 = '100% 100%';\n              p9 = '0 100%';\n            }\n            this.style.setProperty(\n                '--content-padding-top', `${CONNECTOR_HEIGHT + (this.#props.showConnector ? CONNECTOR_HEIGHT : 0)}px`);\n            this.style.setProperty('--content-padding-bottom', `${CONNECTOR_HEIGHT}px`);\n            this.style.setProperty('--dialog-top', `${anchorBottom}px`);\n            this.#hitArea.y = anchorTop;\n            this.style.setProperty('--dialog-offset-y', `-${DIALOG_ANIMATION_OFFSET}px`);\n            this.style.setProperty(\n                '--dialog-max-height',\n                `${\n                    devToolsHeight - (anchorBottom - devToolsTop) - DIALOG_PADDING_FROM_WINDOW -\n                    visibleConnectorHeight}px`);\n            break;\n          }\n          default:\n            Platform.assertNever(\n                this.#bestVerticalPositionInternal, `Unknown position type: ${this.#bestVerticalPositionInternal}`);\n        }\n\n        const clipPath = [p1, p2, p3, p4, p5, p6, p7, p8, p9].join();\n\n        this.style.setProperty('--content-clip-path', clipPath);\n        dialog.close();\n        dialog.style.visibility = '';\n      });\n    });\n  }\n\n  async #showDialog(): Promise<void> {\n    if (!IS_DIALOG_SUPPORTED) {\n      return;\n    }\n\n    if (this.#isPendingShowDialog || this.hasAttribute('open')) {\n      return;\n    }\n    this.#isPendingShowDialog = true;\n    this.#positionDialog();\n    // Allow the CSS variables to be set before showing.\n    await coordinator.done();\n    this.#isPendingShowDialog = false;\n    const dialog = this.#getDialog();\n    // Make the dialog visible now.\n    if (!dialog.hasAttribute('open')) {\n      dialog.showModal();\n    }\n    if (this.#props.dialogShownCallback) {\n      await this.#props.dialogShownCallback();\n    }\n    this.#updateDialogBounds();\n  }\n\n  #handleScrollAttempt(event: WheelEvent): void {\n    if (this.#mouseEventWasInDialogContent(event) || !this.#props.closeOnScroll ||\n        !this.#getDialog().hasAttribute('open')) {\n      return;\n    }\n    this.#closeDialog();\n    this.dispatchEvent(new ForcedDialogClose());\n  }\n\n  #onKeyDown(event: KeyboardEvent): void {\n    if (!this.#getDialog().hasAttribute('open') || !this.#props.closeOnESC) {\n      return;\n    }\n\n    if (event.key !== Platform.KeyboardUtilities.ESCAPE_KEY) {\n      return;\n    }\n    event.stopPropagation();\n    event.preventDefault();\n    this.#closeDialog();\n    this.dispatchEvent(new ForcedDialogClose());\n  }\n\n  #onCancel(event: Event): void {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.#getDialog().hasAttribute('open') || !this.#props.closeOnESC) {\n      return;\n    }\n    this.dispatchEvent(new ForcedDialogClose());\n  }\n\n  #forceDialogCloseInDevToolsMutation(): void {\n    if (!this.#dialog?.hasAttribute('open')) {\n      return;\n    }\n    if (this.#devToolsBoundingElement === document.body) {\n      // Do not close if running in test environment.\n      return;\n    }\n    this.#closeDialog();\n    this.dispatchEvent(new ForcedDialogClose());\n  }\n\n  #closeDialog(): void {\n    if (this.#isPendingCloseDialog || !this.#getDialog().hasAttribute('open')) {\n      return;\n    }\n    this.#isPendingCloseDialog = true;\n    void coordinator.write(() => {\n      this.#hitArea.width = 0;\n      this.removeAttribute('open');\n      this.#getDialog().close();\n      this.#isPendingCloseDialog = false;\n    });\n  }\n\n  getDialogBounds(): DOMRect {\n    return this.#dialogClientRect;\n  }\n\n  #render(): void {\n    if (!ComponentHelpers.ScheduledRender.isScheduledRender(this)) {\n      throw new Error('Dialog render was not scheduled');\n    }\n\n    if (!IS_DIALOG_SUPPORTED) {\n      // To make sure that light dom content passed into this component doesn't show up,\n      // we have to explicitly render a slot and hide it with CSS.\n      LitHtml.render(\n          // clang-format off\n      LitHtml.html`\n        <slot></slot>\n      `,  this.#shadow, {host: this});\n      // clang-format on\n      return;\n    }\n\n    // clang-format off\n    LitHtml.render(LitHtml.html`\n      <dialog @click=${this.#handlePointerEvent} @pointermove=${this.#handlePointerEvent} @cancel=${this.#onCancel}\n              jslog=${VisualLogging.dialog(this.#props.jslogContext).track({resize: true, keydown: 'Escape'}).parent('mapped')}>\n        <div id=\"content-wrap\">\n          <div id=\"content\">\n            <slot></slot>\n          </div>\n        </div>\n      </dialog>\n    `, this.#shadow, { host: this });\n    VisualLogging.setMappedParent(this.#getDialog(), this.parentElementOrShadowHost() as HTMLElement);\n    // clang-format on\n  }\n}\n\ncustomElements.define('devtools-dialog', Dialog);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-dialog': Dialog;\n  }\n}\n\nexport class PointerLeftDialogEvent extends Event {\n  static readonly eventName = 'pointerleftdialog';\n\n  constructor() {\n    super(PointerLeftDialogEvent.eventName, {bubbles: true, composed: true});\n  }\n}\n\nexport class ClickOutsideDialogEvent extends Event {\n  static readonly eventName = 'clickoutsidedialog';\n\n  constructor() {\n    super(ClickOutsideDialogEvent.eventName, {bubbles: true, composed: true});\n  }\n}\n\nexport class ForcedDialogClose extends Event {\n  static readonly eventName = 'forceddialogclose';\n  constructor() {\n    super(ForcedDialogClose.eventName, {bubbles: true, composed: true});\n  }\n}\n\nexport const enum DialogVerticalPosition {\n  TOP = 'top',\n  BOTTOM = 'bottom',\n  AUTO = 'auto',\n}\n\nexport const enum DialogHorizontalAlignment {\n  // Dialog and anchor are aligned on their left borders.\n  LEFT = 'left',\n  // Dialog and anchor are aligned on their right borders.\n  RIGHT = 'right',\n  CENTER = 'center',\n  // This option allows to set the alignment\n  // automatically to LEFT or RIGHT depending\n  // on whether the dialog overflows the\n  // viewport if it's aligned to the left.\n  AUTO = 'auto',\n}\n\ntype AnchorBounds = {\n  top: number,\n  bottom: number,\n  left: number,\n  right: number,\n};\n"]}