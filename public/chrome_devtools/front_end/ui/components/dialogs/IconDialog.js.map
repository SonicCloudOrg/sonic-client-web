{"version":3,"file":"IconDialog.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/dialogs/IconDialog.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport {\n  Dialog as DialogElement,\n  type DialogHorizontalAlignment,\n  type DialogVerticalPosition,\n} from './Dialog.js';\nimport iconDialogStyles from './iconDialog.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of close button for the shortcuts dialog.\n   */\n  close: 'Close',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('ui/components/dialogs/IconDialog.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-icon-dialog': IconDialog;\n  }\n}\n\nexport class ShowDialog extends Event {\n  static readonly eventName = 'showdialog';\n\n  constructor() {\n    super(ShowDialog.eventName);\n  }\n}\n\nexport interface IconDialogData {\n  iconData: IconButton.Icon.IconData;\n  closeButton: boolean;\n  // The below are parts of DialogData. See comments of DialogData.\n  position: DialogVerticalPosition;\n  horizontalAlignment: DialogHorizontalAlignment;\n  closeOnESC: boolean;\n  closeOnScroll: boolean;\n}\n\n// This class provides a shorthand for a typical use case of Dialog,\n// i.e. Dialog on an icon.\nexport class IconDialog extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-icon-dialog`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  readonly #renderBound = this.#render.bind(this);\n\n  #data: IconDialogData|null = null;\n\n  #dialog: DialogElement|null = null;\n  #icon: IconButton.Icon.Icon|null = null;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [iconDialogStyles];\n  }\n\n  set data(data: IconDialogData) {\n    this.#data = data;\n\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#renderBound);\n  }\n\n  #showDialog(): void {\n    if (!this.#dialog) {\n      throw new Error('Dialog not found');\n    }\n    void this.#dialog.setDialogVisible(true);\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#renderBound);\n    this.dispatchEvent(new ShowDialog());\n  }\n\n  #closeDialog(): void {\n    if (!this.#dialog) {\n      throw new Error('Dialog not found');\n    }\n    void this.#dialog.setDialogVisible(false);\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#renderBound);\n  }\n\n  #render(): void {\n    if (this.#data === null) {\n      throw new Error('IconDialog.data is not set');\n    }\n\n    if (!ComponentHelpers.ScheduledRender.isScheduledRender(this)) {\n      throw new Error('IconDialog render was not scheduled');\n    }\n\n    let maybeCloseButton: LitHtml.LitTemplate = LitHtml.nothing;\n    if (this.#data.closeButton) {\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      maybeCloseButton = LitHtml.html`\n        <div id='close-button-container'>\n          <div id='close-button-right-aligner'>\n            <${IconButton.Icon.Icon.litTagName}\n              @click=${this.#closeDialog}\n              .data=${{\n                iconName: 'cross',\n                color: 'var(--icon-default-hover)',\n                width: '16px',\n                height: '16px',\n              } as IconButton.Icon.IconWithName}\n              jslog=${VisualLogging.close().track({click: true})}\n              title=${i18nString(UIStrings.close)}\n            ></${IconButton.Icon.Icon.litTagName}>\n          </div>\n        </div>\n      `;\n      // clang-format on\n    }\n\n    // clang-format off\n    LitHtml.render(LitHtml.html`\n      <${IconButton.Icon.Icon.litTagName}\n        @click=${this.#showDialog}\n        on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n          this.#icon = node as IconButton.Icon.Icon;\n        })}\n        .data=${this.#data.iconData as IconButton.Icon.IconWithName}\n      ></${IconButton.Icon.Icon.litTagName}>\n      <${DialogElement.litTagName}\n        @clickoutsidedialog=${this.#closeDialog}\n        .showConnector=${true}\n        .origin=${() => {\n          if (!this.#icon) {\n            throw new Error('Icon not found');\n          }\n          return this.#icon;\n        }}\n        .position=${this.#data.position}\n        .horizontalAlignment=${this.#data.horizontalAlignment}\n        .closeOnESC=${this.#data.closeOnESC}\n        .closeOnScroll=${this.#data.closeOnScroll}\n        on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n          this.#dialog = node as DialogElement;\n        })}\n      >\n        ${maybeCloseButton}\n        <div id='slot-container'>\n          <slot></slot>\n        </div>\n      </${DialogElement.litTagName}>\n    `, this.#shadow, {host: this});\n    // clang-format on\n  }\n}\n\ncustomElements.define('devtools-icon-dialog', IconDialog);\n"]}