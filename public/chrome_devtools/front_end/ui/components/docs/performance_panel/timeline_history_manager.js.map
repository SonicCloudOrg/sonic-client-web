{"version":3,"file":"timeline_history_manager.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/components/docs/performance_panel/timeline_history_manager.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,WAAW,MAAM,mCAAmC,CAAC;AACjE,OAAO,KAAK,QAAQ,MAAM,yCAAyC,CAAC;AACpE,OAAO,KAAK,eAAe,MAAM,2CAA2C,CAAC;AAC7E,OAAO,KAAK,WAAW,MAAM,oCAAoC,CAAC;AAClE,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAChD,OAAO,KAAK,cAAc,MAAM,0BAA0B,CAAC;AAE3D,MAAM,eAAe,CAAC,oBAAoB,EAAE,CAAC;AAC7C,MAAM,cAAc,CAAC,oBAAoB,CAAC,KAAK,EAAE,CAAC;AAElD,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,uBAAuB;IACjC,QAAQ,sEAAkD;IAC1D,YAAY;QACV,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;IAChD,CAAC;IACD,KAAK,CAAC,kBAAkB;QACtB,OAAO,IAAI,QAAQ,CAAC,aAAa,CAAC,cAAc,EAAE,CAAC;IACrD,CAAC;CACF,CAAC,CAAC;AAEH,MAAM,gBAAgB,GAAG,MAAM,WAAW,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EAAE,8BAA8B,CAAC,CAAC;AACzG,WAAW,CAAC,WAAW,CAAC,sBAAsB,CAAC,gBAAgB,CAAC,CAAC;AAEjE,IAAI,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,EAAE,CAAC,YAAY,CAAC;IACxE,IAAI,EAAE;QACJ,mBAAmB,EAAE,CAAC;KACvB;IACD,mBAAmB,EAAE,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,CAAC,gBAAgB,CAAC;IACjF,eAAe,EAAE,gBAAgB;IACjC,SAAS,EAAE,IAAI;CAChB,CAAC,CAAC;AAEH,MAAM,gBAAgB,GAAG,MAAM,WAAW,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;AAC5F,WAAW,CAAC,WAAW,CAAC,sBAAsB,CAAC,gBAAgB,CAAC,CAAC;AACjE,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;AACvD,IAAI,CAAC,SAAS,EAAE,CAAC;IACf,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;AAC9C,CAAC;AAED,IAAI,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,EAAE,CAAC,YAAY,CAAC;IACxE,IAAI,EAAE;QACJ,mBAAmB,EAAE,CAAC;KACvB;IACD,mBAAmB,EAAE,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,CAAC,gBAAgB,CAAC;IACjF,eAAe,EAAE,gBAAgB;IACjC,SAAS,EAAE,IAAI;CAChB,CAAC,CAAC;AACH,MAAM,QAAQ,CAAC,sBAAsB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as TraceEngine from '../../../../models/trace/trace.js';\nimport * as Timeline from '../../../../panels/timeline/timeline.js';\nimport * as FrontendHelpers from '../../../../testing/EnvironmentHelpers.js';\nimport * as TraceLoader from '../../../../testing/TraceLoader.js';\nimport * as UI from '../../../legacy/legacy.js';\nimport * as ComponentSetup from '../../helpers/helpers.js';\n\nawait FrontendHelpers.initializeGlobalVars();\nawait ComponentSetup.ComponentServerSetup.setup();\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'timeline.show-history',\n  category: UI.ActionRegistration.ActionCategory.PERFORMANCE,\n  contextTypes() {\n    return [Timeline.TimelinePanel.TimelinePanel];\n  },\n  async loadActionDelegate() {\n    return new Timeline.TimelinePanel.ActionDelegate();\n  },\n});\n\nconst traceParsedData1 = await TraceLoader.TraceLoader.traceEngine(null, 'multiple-navigations.json.gz');\nTraceLoader.TraceLoader.initTraceBoundsManager(traceParsedData1);\n\nnew Timeline.TimelineHistoryManager.TimelineHistoryManager().addRecording({\n  data: {\n    traceParseDataIndex: 0,\n  },\n  filmStripForPreview: TraceEngine.Extras.FilmStrip.fromTraceData(traceParsedData1),\n  traceParsedData: traceParsedData1,\n  startTime: null,\n});\n\nconst traceParsedData2 = await TraceLoader.TraceLoader.traceEngine(null, 'web-dev.json.gz');\nTraceLoader.TraceLoader.initTraceBoundsManager(traceParsedData2);\nconst container = document.querySelector('.container');\nif (!container) {\n  throw new Error('could not find container');\n}\n\nnew Timeline.TimelineHistoryManager.TimelineHistoryManager().addRecording({\n  data: {\n    traceParseDataIndex: 1,\n  },\n  filmStripForPreview: TraceEngine.Extras.FilmStrip.fromTraceData(traceParsedData2),\n  traceParsedData: traceParsedData2,\n  startTime: null,\n});\nawait Timeline.TimelineHistoryManager.DropDown.show([0, 1], 1, container);\n"]}