{"version":3,"file":"overview.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/components/docs/performance_panel/overview.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as TraceEngine from '../../../../models/trace/trace.js';\nimport * as Timeline from '../../../../panels/timeline/timeline.js';\nimport * as TraceBounds from '../../../../services/trace_bounds/trace_bounds.js';\nimport * as EnvironmentHelpers from '../../../../testing/EnvironmentHelpers.js';\nimport * as TraceLoader from '../../../../testing/TraceLoader.js';\nimport * as ComponentSetup from '../../helpers/helpers.js';\n\nawait EnvironmentHelpers.initializeGlobalVars();\nawait ComponentSetup.ComponentServerSetup.setup();\nconst container = document.querySelector<HTMLElement>('div.container');\nif (!container) {\n  throw new Error('could not find container');\n}\n\nconst params = new URLSearchParams(window.location.search);\nconst fileName = (params.get('trace') || 'web-dev') + '.json.gz';\nconst customStartWindowTime = params.get('windowStart');\nconst customEndWindowTime = params.get('windowEnd');\n\nasync function renderMiniMap(containerSelector: string, options: {showMemory: boolean}) {\n  const container = document.querySelector<HTMLElement>(containerSelector);\n  if (!container) {\n    throw new Error('could not find container');\n  }\n  const traceParsedData = await TraceLoader.TraceLoader.traceEngine(null, fileName);\n\n  const mainThread =\n      TraceEngine.Handlers.Threads.threadsInRenderer(traceParsedData.Renderer, traceParsedData.AuctionWorklets)\n          .find(t => t.type === TraceEngine.Handlers.Threads.ThreadType.MAIN_THREAD);\n  if (!mainThread) {\n    throw new Error('Could not find main thread.');\n  }\n  const minimap = new Timeline.TimelineMiniMap.TimelineMiniMap();\n  minimap.markAsRoot();\n  minimap.show(container);\n  TraceBounds.TraceBounds.BoundsManager.instance().resetWithNewBounds(traceParsedData.Meta.traceBounds);\n\n  const zoomedWindow = TraceEngine.Extras.MainThreadActivity.calculateWindow(\n      traceParsedData.Meta.traceBounds,\n      mainThread.entries,\n  );\n  TraceBounds.TraceBounds.BoundsManager.instance().setTimelineVisibleWindow(zoomedWindow);\n\n  minimap.setData({\n    traceParsedData: traceParsedData,\n    settings: {\n      showMemory: options.showMemory,\n      showScreenshots: true,\n    },\n  });\n  if (customStartWindowTime && customEndWindowTime) {\n    TraceBounds.TraceBounds.BoundsManager.instance().setTimelineVisibleWindow(\n        TraceEngine.Helpers.Timing.traceWindowFromMilliSeconds(\n            TraceEngine.Types.Timing.MilliSeconds(Number(customStartWindowTime)),\n            TraceEngine.Types.Timing.MilliSeconds(Number(customEndWindowTime)),\n            ),\n    );\n  }\n}\n\nawait renderMiniMap('.container', {showMemory: false});\nawait renderMiniMap('.container-with-memory', {showMemory: true});\n"]}