{"version":3,"file":"DevToolsLocale.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/i18n/DevToolsLocale.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from './i18n.js';\n\ndescribe('DevToolsLocale', () => {\n  // For tests, we assume DevTools supports all locales we throw at it.\n  // Finding the closes supported locale is implemented in the i18n lib and tested as part of that lib.\n  const identity = (locale: string) => locale;\n\n  after(() => {\n    // Reset the singleton after the test suite for other tests.\n    const data: i18n.DevToolsLocale.DevToolsLocaleData = {\n      settingLanguage: 'en-US',\n      navigatorLanguage: '',\n      lookupClosestDevToolsLocale: identity,\n    };\n    i18n.DevToolsLocale.DevToolsLocale.instance({create: true, data});\n  });\n\n  it('chooses navigator.language if setting is \"browserLanguage\"', () => {\n    const data: i18n.DevToolsLocale.DevToolsLocaleData = {\n      settingLanguage: 'browserLanguage',\n      navigatorLanguage: 'en-GB',\n      lookupClosestDevToolsLocale: identity,\n    };\n    const devToolsLocale = i18n.DevToolsLocale.DevToolsLocale.instance({create: true, data});\n\n    assert.strictEqual(devToolsLocale.locale, 'en-GB');\n  });\n\n  it('chooses setting language if setting has any other value than \"browserLanguage\"', () => {\n    const data: i18n.DevToolsLocale.DevToolsLocaleData = {\n      settingLanguage: 'zh',\n      navigatorLanguage: 'en-GB',\n      lookupClosestDevToolsLocale: identity,\n    };\n    const devToolsLocale = i18n.DevToolsLocale.DevToolsLocale.instance({create: true, data});\n\n    assert.strictEqual(devToolsLocale.locale, 'zh');\n  });\n\n  it('falls back to en-US should navigator.language be empty', () => {\n    const data: i18n.DevToolsLocale.DevToolsLocaleData = {\n      settingLanguage: 'browserLanguage',\n      navigatorLanguage: '',\n      lookupClosestDevToolsLocale: identity,\n    };\n    const devToolsLocale = i18n.DevToolsLocale.DevToolsLocale.instance({create: true, data});\n\n    assert.strictEqual(devToolsLocale.locale, 'en-US');\n  });\n\n  it('chooses the closest supported language', () => {\n    const data: i18n.DevToolsLocale.DevToolsLocaleData = {\n      settingLanguage: 'zh-HK',\n      navigatorLanguage: '',\n      lookupClosestDevToolsLocale: () => 'zh',\n    };\n    const devToolsLocale = i18n.DevToolsLocale.DevToolsLocale.instance({create: true, data});\n\n    assert.strictEqual(devToolsLocale.locale, 'zh');\n  });\n\n  describe('forceFallbackLocale', () => {\n    it('sets locale to English', () => {\n      const data: i18n.DevToolsLocale.DevToolsLocaleData = {\n        settingLanguage: 'browserLanguage',\n        navigatorLanguage: 'en-GB',\n        lookupClosestDevToolsLocale: identity,\n      };\n      const devToolsLocale = i18n.DevToolsLocale.DevToolsLocale.instance({create: true, data});\n      assert.strictEqual(devToolsLocale.locale, 'en-GB');\n\n      devToolsLocale.forceFallbackLocale();\n      assert.strictEqual(devToolsLocale.locale, 'en-US');\n    });\n  });\n\n  describe('languageIsSupportedByDevTools', () => {\n    it('returns true if the locale is supported, false otherwise', () => {\n      const data: i18n.DevToolsLocale.DevToolsLocaleData = {\n        settingLanguage: 'zh-HK',\n        navigatorLanguage: '',\n        lookupClosestDevToolsLocale: () => 'zh',\n      };\n      const devToolsLocale = i18n.DevToolsLocale.DevToolsLocale.instance({create: true, data});\n\n      assert.isTrue(devToolsLocale.languageIsSupportedByDevTools('zh-HK'));\n      assert.isFalse(devToolsLocale.languageIsSupportedByDevTools('de-DE'));\n    });\n  });\n});\n\ndescribe('localeLanguagesMatch', () => {\n  it('returns true if the language part of a locale matches, false otherwise', () => {\n    assert.isTrue(i18n.DevToolsLocale.localeLanguagesMatch('de-DE', 'de-AT'));\n    assert.isTrue(i18n.DevToolsLocale.localeLanguagesMatch('de-DE', 'de'));\n\n    assert.isFalse(i18n.DevToolsLocale.localeLanguagesMatch('de', 'en'));\n    assert.isFalse(i18n.DevToolsLocale.localeLanguagesMatch('de-AT', 'en-US'));\n  });\n});\n"]}