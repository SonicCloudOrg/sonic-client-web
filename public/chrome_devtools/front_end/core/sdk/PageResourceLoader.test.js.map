{"version":3,"file":"PageResourceLoader.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/PageResourceLoader.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport {\n  createTarget,\n  describeWithEnvironment,\n  describeWithLocale,\n} from '../../testing/EnvironmentHelpers.js';\nimport {\n  describeWithMockConnection,\n  setMockConnectionResponseHandler,\n} from '../../testing/MockConnection.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\n\nimport * as SDK from './sdk.js';\n\ninterface LoadResult {\n  success: boolean;\n  content: string;\n  errorDescription: Host.ResourceLoader.LoadErrorDescription;\n}\n\nconst initiator = {\n  target: null,\n  frameId: '123' as Protocol.Page.FrameId,\n  initiatorUrl: Platform.DevToolsPath.EmptyUrlString,\n};\n\ndescribeWithLocale('PageResourceLoader', () => {\n  const foo1Url = 'foo1' as Platform.DevToolsPath.UrlString;\n  const foo2Url = 'foo2' as Platform.DevToolsPath.UrlString;\n  const foo3Url = 'foo3' as Platform.DevToolsPath.UrlString;\n  const loads: Array<{url: string, resolve?: {(_: LoadResult|PromiseLike<LoadResult>): void}}> = [];\n  const load = async (url: string) => {\n    loads.push({url});\n\n    return {\n      success: true,\n      content: `${url} - content`,\n      errorDescription: {message: '', statusCode: 0, netError: 0, netErrorName: '', urlValid: true},\n    };\n  };\n\n  beforeEach(() => {\n    loads.length = 0;\n  });\n\n  it('registers extension loads', async () => {\n    const loader = SDK.PageResourceLoader.PageResourceLoader.instance(\n        {forceNew: true, loadOverride: load, maxConcurrentLoads: 500});\n\n    const initiator: SDK.PageResourceLoader.ExtensionInitiator = {\n      extensionId: '123',\n      initiatorUrl: 'www.test.com/main.wasm.dwp' as Platform.DevToolsPath.UrlString,\n      target: null,\n      frameId: null,\n    };\n    const extensionResource: SDK.PageResourceLoader.PageResource = {\n      url: 'main.wasm.dwp' as Platform.DevToolsPath.UrlString,\n      success: true,\n      initiator,\n      size: null,\n    };\n\n    loader.resourceLoadedThroughExtension(extensionResource);\n    assert.deepEqual(loader.getScopedNumberOfResources(), {loading: 0, resources: 1});\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 0, queued: 0, resources: 1});\n\n    const resources = Array.from(loader.getResourcesLoaded().values());\n\n    assert.lengthOf(resources, 1);\n    assert.isTrue(resources[0].success);\n    assert.deepEqual(resources[0].initiator, initiator);\n  });\n\n  it('loads resources correctly', async () => {\n    const loader = SDK.PageResourceLoader.PageResourceLoader.instance(\n        {forceNew: true, loadOverride: load, maxConcurrentLoads: 500});\n    const loading = [\n      loader.loadResource(foo1Url, initiator),\n      loader.loadResource(foo2Url, initiator),\n      loader.loadResource(foo3Url, initiator),\n    ];\n\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 3, queued: 0, resources: 3});\n\n    const results = await Promise.all(loading);\n    assert.deepEqual(loads.map(x => x.url), ['foo1', 'foo2', 'foo3']);\n    assert.deepEqual(results.map(x => x.content), ['foo1 - content', 'foo2 - content', 'foo3 - content']);\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 0, queued: 0, resources: 3});\n    const resources = Array.from(loader.getResourcesLoaded().values());\n    assert.isTrue(resources.every(x => x.success));\n  });\n\n  it('deals with page reloads correctly', async () => {\n    const loader =\n        SDK.PageResourceLoader.PageResourceLoader.instance({forceNew: true, loadOverride: load, maxConcurrentLoads: 1});\n    const loading = [\n      loader.loadResource(foo1Url, initiator).catch(e => e.message),\n      loader.loadResource(foo2Url, initiator).catch(e => e.message),\n      loader.loadResource(foo3Url, initiator).catch(e => e.message),\n    ];\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 3, queued: 2, resources: 3});\n\n    loader.onPrimaryPageChanged({\n      data: {\n        frame: {\n          isOutermostFrame() {\n            return true;\n          },\n          resourceTreeModel() {\n            return {\n              target() {\n                return null;\n              },\n            };\n          },\n        } as unknown as SDK.ResourceTreeModel.ResourceTreeFrame,\n        type: SDK.ResourceTreeModel.PrimaryPageChangeType.Navigation,\n      },\n    });\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 3, queued: 0, resources: 0});\n\n    const results = await Promise.all(loading);\n    assert.deepEqual(loads.map(x => x.url), ['foo1']);\n    assert.deepEqual(results[0].content, 'foo1 - content');\n    assert.deepEqual(results[1], 'Load canceled due to reload of inspected page');\n    assert.deepEqual(results[2], 'Load canceled due to reload of inspected page');\n  });\n\n  it('respects the max concurrent loads', async () => {\n    const loader =\n        SDK.PageResourceLoader.PageResourceLoader.instance({forceNew: true, loadOverride: load, maxConcurrentLoads: 2});\n    const loading = [\n      loader.loadResource(foo1Url, initiator),\n      loader.loadResource(foo2Url, initiator),\n      loader.loadResource(foo3Url, initiator),\n    ];\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 3, queued: 1, resources: 3});\n\n    const results = await Promise.all(loading);\n    assert.deepEqual(loads.map(x => x.url), ['foo1', 'foo2', 'foo3']);\n    assert.deepEqual(results.map(x => x.content), ['foo1 - content', 'foo2 - content', 'foo3 - content']);\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 0, queued: 0, resources: 3});\n    const resources = Array.from(loader.getResourcesLoaded().values());\n    assert.isTrue(resources.every(x => x.success));\n  });\n});\n\n// Loading via host bindings requires the settings infra to be booted.\ndescribeWithEnvironment('PageResourceLoader', () => {\n  it('blocks UNC file paths with the default setting', async () => {\n    if (!Host.Platform.isWin()) {\n      return;\n    }\n\n    const loader =\n        SDK.PageResourceLoader.PageResourceLoader.instance({forceNew: true, loadOverride: null, maxConcurrentLoads: 1});\n\n    const message =\n        await loader\n            .loadResource('file:////127.0.0.1/share/source-map.js.map' as Platform.DevToolsPath.UrlString, initiator)\n            .catch(e => e.message);\n\n    assert.include(message, 'remote file');\n  });\n\n  it('blocks remote file paths with the default setting', async () => {\n    const loader =\n        SDK.PageResourceLoader.PageResourceLoader.instance({forceNew: true, loadOverride: null, maxConcurrentLoads: 1});\n\n    const message =\n        await loader.loadResource('file://host/source-map.js.map' as Platform.DevToolsPath.UrlString, initiator)\n            .catch(e => e.message);\n\n    assert.include(message, 'remote file');\n  });\n\n  it('blocks UNC file paths with a backslash on Windows with the default setting', async () => {\n    if (!Host.Platform.isWin()) {\n      return;\n    }\n\n    const loader =\n        SDK.PageResourceLoader.PageResourceLoader.instance({forceNew: true, loadOverride: null, maxConcurrentLoads: 1});\n\n    const message =\n        await loader\n            .loadResource('file:///\\\\127.0.0.1/share/source-map.js.map' as Platform.DevToolsPath.UrlString, initiator)\n            .catch(e => e.message);\n\n    assert.include(message, 'remote file');\n  });\n\n  it('allows remote file paths with the setting enabled', async () => {\n    const loader =\n        SDK.PageResourceLoader.PageResourceLoader.instance({forceNew: true, loadOverride: null, maxConcurrentLoads: 1});\n    sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'loadNetworkResource')\n        .callsFake((_url, _headers, streamId, callback) => {\n          Host.ResourceLoader.streamWrite(streamId, 'content of the source map');\n          callback({statusCode: 200});\n        });\n\n    Common.Settings.Settings.instance().moduleSetting('network.enable-remote-file-loading').set(true);\n    const response =\n        await loader.loadResource('file://host/source-map.js.map' as Platform.DevToolsPath.UrlString, initiator);\n\n    assert.strictEqual(response.content, 'content of the source map');\n  });\n\n  it('allows UNC paths on Windows with the setting enabled', async () => {\n    if (!Host.Platform.isWin()) {\n      return;\n    }\n\n    const loader =\n        SDK.PageResourceLoader.PageResourceLoader.instance({forceNew: true, loadOverride: null, maxConcurrentLoads: 1});\n    sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'loadNetworkResource')\n        .callsFake((_url, _headers, streamId, callback) => {\n          Host.ResourceLoader.streamWrite(streamId, 'content of the source map');\n          callback({statusCode: 200});\n        });\n\n    Common.Settings.Settings.instance().moduleSetting('network.enable-remote-file-loading').set(true);\n    const response = await loader.loadResource(\n        'file:////127.0.0.1/share/source-map.js.map' as Platform.DevToolsPath.UrlString, initiator);\n\n    assert.strictEqual(response.content, 'content of the source map');\n  });\n});\n\ndescribeWithMockConnection('PageResourceLoader', () => {\n  describe('loadResource', () => {\n    const stream = 'STREAM_ID' as Protocol.IO.StreamHandle;\n    const initiatorUrl = 'htp://example.com' as Platform.DevToolsPath.UrlString;\n    const url = `${initiatorUrl}/test.txt` as Platform.DevToolsPath.UrlString;\n\n    function setupLoadingSourceMapsAsNetworkResource(): Promise<Protocol.Network.LoadNetworkResourceRequest> {\n      return new Promise(resolve => {\n        let contentToRead: string|null = 'foo';\n        setMockConnectionResponseHandler('IO.read', () => {\n          const data = contentToRead;\n          contentToRead = null;\n          return {data};\n        });\n        setMockConnectionResponseHandler('IO.close', () => ({}));\n        setMockConnectionResponseHandler('Network.loadNetworkResource', request => {\n          resolve(request);\n          return {resource: {success: true, stream, statusCode: 200}};\n        });\n      });\n    }\n\n    for (const disableCache of [true, false]) {\n      it(`loads with ${disableCache ? 'disabled' : 'enabled'} cache based on the setting`, async () => {\n        Common.Settings.Settings.instance().moduleSetting('cache-disabled').set(disableCache);\n        const target = createTarget();\n        const initiator = {target, frameId: null, initiatorUrl};\n        const loader = SDK.PageResourceLoader.PageResourceLoader.instance();\n        const [{options}, {content}] = await Promise.all([\n          setupLoadingSourceMapsAsNetworkResource(),\n          loader.loadResource(url, initiator),\n        ]);\n        // Check that we loaded the resources with appropriately enabled caching.\n        assert.strictEqual(options.disableCache, disableCache);\n        // Sanity check on the content.\n        assert.deepEqual(content, 'foo');\n      });\n    }\n  });\n});\n\ndescribeWithMockConnection('PageResourceLoader', () => {\n  const initiatorUrl = 'htp://example.com' as Platform.DevToolsPath.UrlString;\n  const foo1Url = 'foo1' as Platform.DevToolsPath.UrlString;\n  const foo2Url = 'foo2' as Platform.DevToolsPath.UrlString;\n  const foo3Url = 'foo3' as Platform.DevToolsPath.UrlString;\n\n  it('handles scoped resources', async () => {\n    const target = createTarget({id: 'main' as Protocol.Target.TargetID});\n    const prerenderTarget = createTarget({id: 'prerender' as Protocol.Target.TargetID});\n    const initiator = {target, frameId: null, initiatorUrl};\n    const prerenderInitiator = {target: prerenderTarget, frameId: null, initiatorUrl};\n    const load = async () => {\n      await new Promise(() => {});\n      return {\n        success: true,\n        content: 'content',\n        errorDescription: {message: '', statusCode: 0, netError: 0, netErrorName: '', urlValid: true},\n      };\n    };\n    const loader = SDK.PageResourceLoader.PageResourceLoader.instance(\n        {forceNew: true, loadOverride: load, maxConcurrentLoads: 500});\n\n    void loader.loadResource(foo1Url, initiator);\n    void loader.loadResource(foo2Url, initiator);\n    void loader.loadResource(foo3Url, prerenderInitiator);\n\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 3, queued: 0, resources: 3});\n    assert.deepEqual(loader.getScopedNumberOfResources(), {loading: 2, resources: 2});\n\n    let resources = loader.getScopedResourcesLoaded();\n    let resourceUrls = [...resources.values()].map(x => x.url);\n    assert.deepEqual(resourceUrls, [foo1Url, foo2Url]);\n\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(prerenderTarget);\n    assert.deepEqual(loader.getScopedNumberOfResources(), {loading: 1, resources: 1});\n\n    resources = loader.getScopedResourcesLoaded();\n    resourceUrls = [...resources.values()].map(x => x.url);\n    assert.deepEqual(resourceUrls, [foo3Url]);\n  });\n\n  it('handles prerender activation', async () => {\n    const target = createTarget({id: 'main' as Protocol.Target.TargetID});\n    const prerenderTarget = createTarget({id: 'prerender' as Protocol.Target.TargetID});\n    const initiator = {target, frameId: null, initiatorUrl};\n    const prerenderInitiator = {target: prerenderTarget, frameId: null, initiatorUrl};\n\n    const load = async (url: string) => {\n      return {\n        success: true,\n        content: `${url} - content`,\n        errorDescription: {message: '', statusCode: 0, netError: 0, netErrorName: '', urlValid: true},\n      };\n    };\n    const loader = SDK.PageResourceLoader.PageResourceLoader.instance(\n        {forceNew: true, loadOverride: load, maxConcurrentLoads: 500});\n\n    await Promise.all([\n      loader.loadResource(foo1Url, initiator),\n      loader.loadResource(foo2Url, initiator),\n      loader.loadResource(foo3Url, prerenderInitiator),\n    ]);\n\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 0, queued: 0, resources: 3});\n    assert.deepEqual(loader.getScopedNumberOfResources(), {loading: 0, resources: 2});\n\n    let resources = loader.getScopedResourcesLoaded();\n    let resourceUrls = [...resources.values()].map(x => x.url);\n    assert.deepEqual(resourceUrls, [foo1Url, foo2Url]);\n\n    loader.onPrimaryPageChanged({\n      data: {\n        frame: {\n          isOutermostFrame() {\n            return true;\n          },\n          resourceTreeModel() {\n            return {\n              target() {\n                return prerenderTarget;\n              },\n            };\n          },\n        } as unknown as SDK.ResourceTreeModel.ResourceTreeFrame,\n        type: SDK.ResourceTreeModel.PrimaryPageChangeType.Activation,\n      },\n    });\n    assert.deepEqual(loader.getNumberOfResources(), {loading: 0, queued: 0, resources: 1});\n\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(prerenderTarget);\n    assert.deepEqual(loader.getScopedNumberOfResources(), {loading: 0, resources: 1});\n\n    resources = loader.getScopedResourcesLoaded();\n    resourceUrls = [...resources.values()].map(x => x.url);\n    assert.deepEqual(resourceUrls, [foo3Url]);\n  });\n});\n"]}