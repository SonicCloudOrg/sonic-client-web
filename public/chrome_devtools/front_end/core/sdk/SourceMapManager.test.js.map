{"version":3,"file":"SourceMapManager.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/SourceMapManager.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Protocol from '../../generated/protocol.js';\nimport {createTarget} from '../../testing/EnvironmentHelpers.js';\nimport {describeWithMockConnection} from '../../testing/MockConnection.js';\nimport {setupPageResourceLoaderForSourceMap} from '../../testing/SourceMapHelpers.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport * as SDK from './sdk.js';\n\nconst content = JSON.stringify({\n  'version': 3,\n  'file': '/script.js',\n  'mappings': '',\n  'sources': [\n    '/original-script.js',\n  ],\n});\n\ndescribeWithMockConnection('SourceMapManager', () => {\n  it('uses url for a worker\\'s source maps from frame', async () => {\n    setupPageResourceLoaderForSourceMap(content);\n    const frameUrl = 'https://frame-host/index.html' as Platform.DevToolsPath.UrlString;\n    const scriptUrl = 'https://script-host/script.js' as Platform.DevToolsPath.UrlString;\n    const sourceUrl = 'script.js' as Platform.DevToolsPath.UrlString;\n    const sourceMapUrl = 'script.js.map' as Platform.DevToolsPath.UrlString;\n\n    const mainTarget =\n        createTarget({id: 'main' as Protocol.Target.TargetID, name: 'main', type: SDK.Target.Type.Frame});\n    mainTarget.setInspectedURL(frameUrl);\n\n    const workerTarget = createTarget({\n      id: 'worker' as Protocol.Target.TargetID,\n      name: 'worker',\n      type: SDK.Target.Type.Worker,\n      parentTarget: mainTarget,\n    });\n\n    const debuggerModel = workerTarget.model(SDK.DebuggerModel.DebuggerModel);\n    assert.isNotNull(debuggerModel);\n    const sourceMapManager = debuggerModel.sourceMapManager();\n\n    const script = new SDK.Script.Script(\n        debuggerModel, '1' as Protocol.Runtime.ScriptId, scriptUrl, 0, 0, 0, 0, 0, '', false, false, sourceMapUrl,\n        false, 0, null, null, null, null, null, null);\n\n    sourceMapManager.attachSourceMap(script, sourceUrl, sourceMapUrl);\n\n    const sourceMap = await sourceMapManager.sourceMapForClientPromise(script);\n    // Check that the URLs are resolved relative to the frame.\n    assert.strictEqual(sourceMap?.url(), 'https://frame-host/script.js.map' as Platform.DevToolsPath.UrlString);\n    assert.deepEqual(\n        sourceMap?.sourceURLs(), ['https://frame-host/original-script.js' as Platform.DevToolsPath.UrlString]);\n  });\n\n  it('can handle source maps in a data URL frame', async () => {\n    setupPageResourceLoaderForSourceMap(content);\n    const sourceUrl = 'script.js' as Platform.DevToolsPath.UrlString;\n    const sourceMapUrl = `data:test/html;base64,${btoa(content)}` as Platform.DevToolsPath.UrlString;\n    const frameSource =\n        '<script>0\\n//# sourceURL=' + sourceUrl + '\\n//# sourceMappingURL=' + sourceMapUrl + '</script>';\n    const frameUrl = `data:test/html;base64,${btoa(frameSource)}` as Platform.DevToolsPath.UrlString;\n    const scriptUrl = 'https://script-host/script.js' as Platform.DevToolsPath.UrlString;\n\n    const mainTarget =\n        createTarget({id: 'main' as Protocol.Target.TargetID, name: 'main', type: SDK.Target.Type.Frame});\n    mainTarget.setInspectedURL(frameUrl);\n\n    const debuggerModel = mainTarget.model(SDK.DebuggerModel.DebuggerModel);\n    assert.isNotNull(debuggerModel);\n    const sourceMapManager = debuggerModel.sourceMapManager();\n\n    const script = new SDK.Script.Script(\n        debuggerModel, '1' as Protocol.Runtime.ScriptId, scriptUrl, 0, 0, 0, 0, 0, '', false, false, sourceMapUrl,\n        false, 0, null, null, null, null, null, null);\n\n    sourceMapManager.attachSourceMap(script, sourceUrl, sourceMapUrl);\n\n    const sourceMap = await sourceMapManager.sourceMapForClientPromise(script);\n    assert.deepEqual(sourceMap?.sourceURLs(), ['/original-script.js' as Platform.DevToolsPath.UrlString]);\n  });\n});\n\ndescribe('SourceMapManager', () => {\n  const sourceURL = 'http://localhost/foo.js' as Platform.DevToolsPath.UrlString;\n  const sourceMappingURL = `${sourceURL}.map`;\n\n  beforeEach(() => {\n    SDK.TargetManager.TargetManager.instance({forceNew: true});\n    SDK.PageResourceLoader.PageResourceLoader.instance({forceNew: true, loadOverride: null, maxConcurrentLoads: 1});\n  });\n\n  afterEach(() => {\n    SDK.PageResourceLoader.PageResourceLoader.removeInstance();\n    SDK.TargetManager.TargetManager.removeInstance();\n  });\n\n  const createTarget = () => {\n    const target = sinon.createStubInstance(SDK.Target.Target);\n    target.type.returns(SDK.Target.Type.Frame);\n    return target;\n  };\n\n  class MockClient implements SDK.FrameAssociated.FrameAssociated {\n    constructor(private target: SDK.Target.Target) {\n    }\n\n    createPageResourceLoadInitiator(): SDK.PageResourceLoader.PageResourceLoadInitiator {\n      return {target: this.target, frameId: null, initiatorUrl: null};\n    }\n  }\n\n  describe('attachSourceMap', () => {\n    it('catches attempts to attach twice for the same client', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').resolves({content});\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      assert.throws(() => sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL));\n      await sourceMapManager.sourceMapForClientPromise(client);\n    });\n\n    it('triggers the correct lifecycle events when loading succeeds', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      const sourceMapWillAttach = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapWillAttach, sourceMapWillAttach);\n      const sourceMapAttached = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapAttached, sourceMapAttached);\n      sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').resolves({content});\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      assert.strictEqual(sourceMapWillAttach.callCount, 1, 'SourceMapWillAttach events');\n      assert.isTrue(sourceMapWillAttach.calledWith(sinon.match.hasNested('data.client', client)));\n      const sourceMap = await sourceMapManager.sourceMapForClientPromise(client);\n      assert.strictEqual(sourceMapAttached.callCount, 1, 'SourceMapAttached events');\n      assert.isTrue(sourceMapAttached.calledWith(sinon.match.hasNested('data.client', client)));\n      assert.isTrue(sourceMapAttached.calledWith(sinon.match.hasNested('data.sourceMap', sourceMap)));\n      assert.isTrue(sourceMapAttached.calledAfter(sourceMapWillAttach));\n    });\n\n    it('triggers the correct lifecycle events when loading fails', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      const sourceMapWillAttach = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapWillAttach, sourceMapWillAttach);\n      const sourceMapFailedToAttach = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapFailedToAttach, sourceMapFailedToAttach);\n      sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').rejects('Error');\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      assert.strictEqual(sourceMapWillAttach.callCount, 1, 'SourceMapWillAttach events');\n      assert.isTrue(sourceMapWillAttach.calledWith(sinon.match.hasNested('data.client', client)));\n      await sourceMapManager.sourceMapForClientPromise(client);\n      assert.strictEqual(sourceMapFailedToAttach.callCount, 1, 'SourceMapFailedToAttach events');\n      assert.isTrue(sourceMapFailedToAttach.calledWith(sinon.match.hasNested('data.client', client)));\n      assert.isTrue(sourceMapFailedToAttach.calledAfter(sourceMapWillAttach));\n    });\n\n    it('correctly handles the case where sourcemap reattaches immediately', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      const sourceMapAttached = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapAttached, sourceMapAttached);\n      const sourceMapFailedToAttach = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapFailedToAttach, sourceMapFailedToAttach);\n      sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').resolves({content});\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      sourceMapManager.detachSourceMap(client);\n      assert.isTrue(sourceMapFailedToAttach.calledWith(sinon.match.hasNested('data.client', client)));\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      await sourceMapManager.sourceMapForClientPromise(client);\n      assert.strictEqual(sourceMapAttached.callCount, 1, 'SourceMapAttached events');\n      assert.isTrue(sourceMapAttached.calledWith(sinon.match.hasNested('data.client', client)));\n      assert.isTrue(sourceMapAttached.calledAfter(sourceMapFailedToAttach));\n    });\n\n    it('correctly handles separate clients with same sourceURL and sourceMappingURL', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client1 = new MockClient(target);\n      const client2 = new MockClient(target);\n      sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').resolves({content});\n      sourceMapManager.attachSourceMap(client1, sourceURL, sourceMappingURL);\n      sourceMapManager.attachSourceMap(client2, sourceURL, sourceMappingURL);\n      const [sourceMap1, sourceMap2] = await Promise.all([\n        sourceMapManager.sourceMapForClientPromise(client1),\n        sourceMapManager.sourceMapForClientPromise(client2),\n      ]);\n      assert.notStrictEqual(sourceMap1, sourceMap2);\n    });\n\n    it('defers loading sourcemaps while disabled', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      sourceMapManager.setEnabled(false);\n      const client = new MockClient(target);\n      const loadResource = sinon.spy(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource');\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      assert.strictEqual(loadResource.callCount, 0, 'loadResource calls');\n      assert.isUndefined(sourceMapManager.sourceMapForClient(client));\n      assert.isUndefined(await sourceMapManager.sourceMapForClientPromise(client));\n      sourceMapManager.setEnabled(true);\n      assert.strictEqual(loadResource.callCount, 1, 'loadResource calls');\n      await sourceMapManager.sourceMapForClientPromise(client);\n    });\n\n    it('does not attempt to load when attach is cancelled', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      sourceMapManager.addEventListener(\n          SDK.SourceMapManager.Events.SourceMapWillAttach,\n          ({data: {client}}) => sourceMapManager.cancelAttachSourceMap(client));\n      const sourceMapFailedToAttach = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapFailedToAttach, sourceMapFailedToAttach);\n      const loadResource = sinon.spy(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource');\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      assert.strictEqual(loadResource.callCount, 0, 'loadResource calls');\n      await sourceMapManager.sourceMapForClientPromise(client);\n      assert.strictEqual(sourceMapFailedToAttach.callCount, 1, 'SourceMapFailedToAttach events');\n      assert.isTrue(sourceMapFailedToAttach.calledWith(sinon.match.hasNested('data.client', client)));\n    });\n  });\n\n  describe('detachSourceMap', () => {\n    it('silently ignores unknown clients', () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      sourceMapManager.detachSourceMap(client);\n    });\n\n    it('triggers the correct lifecycle events', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      const sourceMapDetached = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapDetached, sourceMapDetached);\n      sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').resolves({content});\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      const sourceMap = await sourceMapManager.sourceMapForClientPromise(client);\n      sourceMapManager.detachSourceMap(client);\n      assert.strictEqual(sourceMapDetached.callCount, 1, 'SourceMapDetached events');\n      assert.isTrue(sourceMapDetached.calledWith(sinon.match.hasNested('data.client', client)));\n      assert.isTrue(sourceMapDetached.calledWith(sinon.match.hasNested('data.sourceMap', sourceMap)));\n    });\n\n    it('triggers the correct lifecycle events when disabled', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      sourceMapManager.setEnabled(false);\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      const sourceMapFailedToAttach = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapFailedToAttach, sourceMapFailedToAttach);\n      const sourceMapDetached = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapDetached, sourceMapDetached);\n\n      sourceMapManager.detachSourceMap(client);\n\n      assert.strictEqual(sourceMapFailedToAttach.callCount, 0, 'SourceMapFailedToAttach events');\n      assert.strictEqual(sourceMapDetached.callCount, 0, 'SourceMapDetached events');\n    });\n  });\n\n  describe('setEnabled', () => {\n    it('triggers the correct lifecycle events when disabling while attaching', () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').returns(new Promise(() => {}));\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      const sourceMapFailedToAttach = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapFailedToAttach, sourceMapFailedToAttach);\n\n      sourceMapManager.setEnabled(false);\n\n      assert.strictEqual(sourceMapFailedToAttach.callCount, 1, 'SourceMapFailedToAttach events');\n      assert.isTrue(sourceMapFailedToAttach.calledWith(sinon.match.hasNested('data.client', client)));\n    });\n\n    it('triggers the correct lifecycle events when disabling once attached', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').resolves({content});\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      const sourceMap = await sourceMapManager.sourceMapForClientPromise(client);\n      const sourceMapDetached = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapDetached, sourceMapDetached);\n\n      sourceMapManager.setEnabled(false);\n\n      assert.strictEqual(sourceMapDetached.callCount, 1, 'SourceMapDetached events');\n      assert.isTrue(sourceMapDetached.calledWith(sinon.match.hasNested('data.client', client)));\n      assert.isTrue(sourceMapDetached.calledWith(sinon.match.hasNested('data.sourceMap', sourceMap)));\n    });\n\n    it('triggers the correct lifecycle events when re-enabling', async () => {\n      const target = createTarget();\n      const sourceMapManager = new SDK.SourceMapManager.SourceMapManager(target);\n      const client = new MockClient(target);\n      sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').resolves({content});\n      sourceMapManager.attachSourceMap(client, sourceURL, sourceMappingURL);\n      await sourceMapManager.sourceMapForClientPromise(client);\n      sourceMapManager.setEnabled(false);\n      const sourceMapDetached = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapDetached, sourceMapDetached);\n      const sourceMapWillAttach = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapWillAttach, sourceMapWillAttach);\n      const sourceMapFailedToAttach = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapFailedToAttach, sourceMapFailedToAttach);\n      const sourceMapAttached = sinon.spy();\n      sourceMapManager.addEventListener(SDK.SourceMapManager.Events.SourceMapAttached, sourceMapAttached);\n\n      sourceMapManager.setEnabled(true);\n\n      const sourceMap = await sourceMapManager.sourceMapForClientPromise(client);\n      assert.strictEqual(sourceMapDetached.callCount, 0, 'SourceMapDetached events');\n      assert.strictEqual(sourceMapFailedToAttach.callCount, 0, 'SourceMapFailedToAttach events');\n      assert.strictEqual(sourceMapWillAttach.callCount, 1, 'SourceMapWillAttach events');\n      assert.isTrue(sourceMapWillAttach.calledWith(sinon.match.hasNested('data.client', client)));\n      assert.isTrue(sourceMapAttached.calledAfter(sourceMapWillAttach));\n      assert.strictEqual(sourceMapAttached.callCount, 1, 'SourceMapAttached events');\n      assert.isTrue(sourceMapAttached.calledWith(sinon.match.hasNested('data.client', client)));\n      assert.isTrue(sourceMapAttached.calledWith(sinon.match.hasNested('data.sourceMap', sourceMap)));\n    });\n  });\n});\n"]}