{"version":3,"file":"ConsoleModel.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/ConsoleModel.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAG7B,OAAO,EACL,YAAY,GACb,MAAM,qCAAqC,CAAC;AAC7C,OAAO,EACL,0BAA0B,GAC3B,MAAM,iCAAiC,CAAC;AACzC,OAAO,EACL,SAAS,EACT,+BAA+B,EAC/B,YAAY,EACZ,QAAQ,GACT,MAAM,sCAAsC,CAAC;AAC9C,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC;AAG9C,OAAO,KAAK,GAAG,MAAM,UAAU,CAAC;AAEhC,0BAA0B,CAAC,gBAAgB,EAAE,GAAG,EAAE;IAChD,MAAM,SAAS,GAAG,GAAgC,CAAC;IACnD,MAAM,SAAS,GAAG,GAAgC,CAAC;IAEnD,SAAS,UAAU,CAAC,EAClB,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,qBAAqB,CAAC,UAAU,EACxD,OAAO,GAAG,SAAS,EACnB,GAAG,EACH,QAAQ,EACR,kBAAkB,EAClB,UAAU,GAQX;QACC,OAAO,IAAI,GAAG,CAAC,YAAY,CAAC,cAAc,CACtC,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,EAAC,GAAG,EAAE,kBAAkB,EAAE,QAAQ,EAAE,UAAU,EAAC,CAAC,CAAC;IACpF,CAAC;IAED,EAAE,CAAC,wBAAwB,EAAE,GAAG,EAAE;QAChC,MAAM,CAAC,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,CAAC,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,CAAC,GAAG,UAAU,CAAC,EAAC,OAAO,EAAE,kBAAkB,EAAC,CAAC,CAAC;QACpD,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,uBAAuB,EAAE,GAAG,EAAE;QAC/B,MAAM,CAAC,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,CAAC,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,CAAC,GAAG,UAAU,CAAC,EAAC,MAAM,EAAE,MAAM,CAAC,OAAO,CAAC,qBAAqB,CAAC,GAAG,EAAC,CAAC,CAAC;QACzE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAC5B,MAAM,CAAC,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,CAAC,GAAG,UAAU,CAAC,EAAC,GAAG,EAAE,cAAiD,EAAC,CAAC,CAAC;QAC/E,MAAM,CAAC,GAAG,UAAU,CAAC,EAAC,GAAG,EAAE,cAAiD,EAAC,CAAC,CAAC;QAC/E,MAAM,CAAC,GAAG,UAAU,CAAC,EAAC,GAAG,EAAE,cAAiD,EAAC,CAAC,CAAC;QAC/E,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,gDAAgD,EAAE,GAAG,EAAE;QACxD,MAAM,CAAC,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,CAAC,GAAG,UAAU,CAAC,EAAC,kBAAkB,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAC,CAAC,CAAC;QACnE,MAAM,CAAC,GAAG,UAAU,CAAC,EAAC,kBAAkB,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAC,CAAC,CAAC;QACnE,MAAM,CAAC,GAAG,UAAU,CAAC,EAAC,kBAAkB,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAC,CAAC,CAAC;QACnE,MAAM,CAAC,GAAG,UAAU,CAAC,EAAC,kBAAkB,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAC,CAAC,CAAC;QACnE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,2CAA2C,EAAE,GAAG,EAAE;QACnD,MAAM,YAAY,GAAG,KAAK,CAAC;QAC3B,MAAM,GAAG,GAAG,yBAAyB,CAAC;QACtC,MAAM,UAAU,GAAG,CAAC,CAAC;QACrB,MAAM,YAAY,GAAG,CAAC,CAAC;QACvB,MAAM,CAAC,GACH,UAAU,CAAC,EAAC,UAAU,EAAE,EAAC,UAAU,EAAE,CAAC,EAAC,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,EAAE,UAAU,EAAE,YAAY,EAAC,CAAC,EAAC,EAAC,CAAC,CAAC;QACjH,MAAM,CAAC,GACH,UAAU,CAAC,EAAC,UAAU,EAAE,EAAC,UAAU,EAAE,CAAC,EAAC,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,EAAE,UAAU,EAAE,YAAY,EAAC,CAAC,EAAC,EAAC,CAAC,CAAC;QACjH,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,yCAAyC,EAAE,KAAK,IAAI,EAAE;QACvD,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACpF,MAAM,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,KAAK,CAAC,CAAC;QACvE,MAAM,SAAS,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAC,CAAC,CAAC;QAC5D,MAAM,eAAe,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,SAAS,EAAC,CAAC,CAAC;QAC7F,MAAM,cAAc,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,eAAe,EAAC,CAAC,CAAC;QAClG,MAAM,+BAA+B,CAAC,cAAc,CAAC,CAAC;QACtD,QAAQ,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAEpC,MAAM,+BAA+B,CAAC,eAAe,CAAC,CAAC;QACvD,QAAQ,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACrC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,CAAC,gBAAgB,SAAS,EAAE,CAAC,CAAC,CAAC;IACxE,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qDAAqD,EAAE,KAAK,IAAI,EAAE;QACnE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACpF,MAAM,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,KAAK,CAAC,CAAC;QACvE,MAAM,SAAS,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAC,CAAC,CAAC;QAC5D,MAAM,eAAe,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,SAAS,EAAC,CAAC,CAAC;QAC7F,MAAM,cAAc,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,eAAe,EAAC,CAAC,CAAC;QAClG,MAAM,+BAA+B,CAAC,cAAc,CAAC,CAAC;QACtD,QAAQ,CAAC,YAAY,CAAC,cAAc,CAAC,EAAE,EAAE,uFAAuD,CAAC;QACjG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAEpC,MAAM,+BAA+B,CAAC,eAAe,CAAC,CAAC;QACvD,QAAQ,CAAC,YAAY,CAAC,eAAe,CAAC,EAAE,EAAE,uFAAuD,CAAC;QAClG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACrC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,CACnC,iBAAiB,SAAS,sEAAsE,CAAC,CAAC,CAAC;IACzG,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,+DAA+D,EAAE,KAAK,IAAI,EAAE;QAC7E,MAAM,MAAM,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAC,CAAC,CAAC;QAC3D,MAAM,YAAY,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;QACjE,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5B,MAAM,iBAAiB,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;QAChF,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACjC,MAAM,YAAY,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;QACjE,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5B,MAAM,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;QACzD,iBAAiB,CAAC,wBAAwB,CAAC,GAAG,CAAC,iBAAiB,CAAC,MAAM,CAAC,qBAAqB,EAAE,iBAAiB,CAAC,CAAC;QAElH,MAAM,cAAc,GAAG;YACrB,IAAI,4DAAgD;YACpD,IAAI,EAAE,CAAC,EAAC,IAAI,yDAA0C,EAAE,KAAK,EAAE,QAAQ,EAAC,CAAC;YACzE,kBAAkB,EAAE,CAAC;YACrB,SAAS,EAAE,UAAU;SACtB,CAAC;QAEF,YAAY,CAAC,wBAAwB,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,gBAAgB,EAAE,cAAc,CAAC,CAAC;QAChG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACrC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,EAAC,WAAW,EAAE,QAAQ,EAAC,CAAC,CAAC,CAAC,CAAC;QAE/E,YAAY,CAAC,wBAAwB,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,gBAAgB,EAAE,cAAc,CAAC,CAAC;QAChG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QAErC,YAAY,CAAC,wBAAwB,CACjC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,gBAAgB,EAAE,EAAC,GAAG,cAAc,EAAE,SAAS,EAAE,UAAU,EAAC,CAAC,CAAC;QAC1F,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;QACtC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,EAAC,WAAW,EAAE,QAAQ,EAAC,CAAC,CAAC,CAAC,CAAC;IACxF,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;QAC5D,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrF,MAAM,SAAS,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAC,CAAC,CAAC;QAC5D,MAAM,eAAe,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,SAAS,EAAC,CAAC,CAAC;QAC7F,MAAM,cAAc,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,eAAe,EAAC,CAAC,CAAC;QAClG,MAAM,yBAAyB,GAAG,CAAC,MAAyB,EAAE,EAAE;YAC9D,MAAM,iBAAiB,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;YAChF,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;YACjC,iBAAiB,CAAC,wBAAwB,CAAC,GAAG,CAAC,iBAAiB,CAAC,MAAM,CAAC,qBAAqB,EAAE,iBAAiB,CAAC,CAAC;YAElH,MAAM,aAAa,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;YACpE,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YAC7B,aAAa,CAAC,wBAAwB,CAAC,GAAG,CAAC,aAAa,CAAC,MAAM,CAAC,mBAAmB,EAAE,aAAa,CAAC,CAAC;QACtG,CAAC,CAAC;QAEF,IAAI,2BAA2B,GAAG,CAAC,CAAC;QACpC,IAAI,iCAAiC,GAAG,CAAC,CAAC;QAC1C,IAAI,gCAAgC,GAAG,CAAC,CAAC;QACzC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC;YAC1C,EAAE,gBAAgB,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,EAAE,CAAC,EAAE,2BAA2B,CAAC,CAAC;QACpG,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC;YAChD,EAAE,gBAAgB,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,EAAE,CAAC,EAAE,iCAAiC,CAAC,CAAC;QAC1G,cAAc,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC;YAC/C,EAAE,gBAAgB,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,EAAE,CAAC,EAAE,gCAAgC,CAAC,CAAC;QAEzG,yBAAyB,CAAC,cAAc,CAAC,CAAC;QAC1C,MAAM,CAAC,WAAW,CAAC,2BAA2B,EAAE,CAAC,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,iCAAiC,EAAE,CAAC,CAAC,CAAC;QACzD,MAAM,CAAC,WAAW,CAAC,gCAAgC,EAAE,CAAC,CAAC,CAAC;QAExD,yBAAyB,CAAC,eAAe,CAAC,CAAC;QAC3C,MAAM,CAAC,WAAW,CAAC,2BAA2B,EAAE,CAAC,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,iCAAiC,EAAE,CAAC,CAAC,CAAC;QACzD,MAAM,CAAC,WAAW,CAAC,gCAAgC,EAAE,CAAC,CAAC,CAAC;IAC1D,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport {\n  createTarget,\n} from '../../testing/EnvironmentHelpers.js';\nimport {\n  describeWithMockConnection,\n} from '../../testing/MockConnection.js';\nimport {\n  FRAME_URL,\n  getInitializedResourceTreeModel,\n  getMainFrame,\n  navigate,\n} from '../../testing/ResourceTreeHelpers.js';\nimport * as Common from '../common/common.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport * as SDK from './sdk.js';\n\ndescribeWithMockConnection('ConsoleMessage', () => {\n  const scriptId1 = '1' as Protocol.Runtime.ScriptId;\n  const scriptId2 = '2' as Protocol.Runtime.ScriptId;\n\n  function newMessage({\n    source = Common.Console.FrontendMessageSource.ConsoleAPI,\n    message = 'Message',\n    url,\n    scriptId,\n    executionContextId,\n    stackTrace,\n  }: {\n    source?: SDK.ConsoleModel.MessageSource,\n    message?: string,\n    url?: Platform.DevToolsPath.UrlString,\n    scriptId?: Protocol.Runtime.ScriptId,\n    executionContextId?: number,\n    stackTrace?: Protocol.Runtime.StackTrace,\n  }) {\n    return new SDK.ConsoleModel.ConsoleMessage(\n        null, source, null, message, {url, executionContextId, scriptId, stackTrace});\n  }\n\n  it('compares using message', () => {\n    const a = newMessage({});\n    const b = newMessage({});\n    const c = newMessage({message: 'DifferentMessage'});\n    assert.isTrue(a.isEqual(b));\n    assert.isFalse(b.isEqual(c));\n    assert.isFalse(c.isEqual(a));\n    assert.isTrue(c.isEqual(c));\n  });\n\n  it('compares using source', () => {\n    const a = newMessage({});\n    const b = newMessage({});\n    const c = newMessage({source: Common.Console.FrontendMessageSource.CSS});\n    assert.isTrue(a.isEqual(b));\n    assert.isFalse(b.isEqual(c));\n    assert.isFalse(c.isEqual(a));\n  });\n\n  it('compares using url', () => {\n    const a = newMessage({});\n    const b = newMessage({url: 'http://a.b/c' as Platform.DevToolsPath.UrlString});\n    const c = newMessage({url: 'http://a.b/c' as Platform.DevToolsPath.UrlString});\n    const d = newMessage({url: 'http://a.b/d' as Platform.DevToolsPath.UrlString});\n    assert.isFalse(a.isEqual(b));\n    assert.isTrue(b.isEqual(c));\n    assert.isFalse(c.isEqual(d));\n    assert.isFalse(d.isEqual(a));\n  });\n\n  it('compares using execution context and script id', () => {\n    const a = newMessage({});\n    const b = newMessage({executionContextId: 5, scriptId: scriptId1});\n    const c = newMessage({executionContextId: 5, scriptId: scriptId1});\n    const d = newMessage({executionContextId: 6, scriptId: scriptId1});\n    const e = newMessage({executionContextId: 5, scriptId: scriptId2});\n    assert.isFalse(a.isEqual(b));\n    assert.isFalse(b.isEqual(a));\n    assert.isTrue(b.isEqual(c));\n    assert.isFalse(c.isEqual(d));\n    assert.isFalse(c.isEqual(e));\n  });\n\n  it('compares using script ids in stack traces', () => {\n    const functionName = 'foo';\n    const url = 'http://localhost/foo.js';\n    const lineNumber = 1;\n    const columnNumber = 1;\n    const a =\n        newMessage({stackTrace: {callFrames: [{functionName, scriptId: scriptId1, url, lineNumber, columnNumber}]}});\n    const b =\n        newMessage({stackTrace: {callFrames: [{functionName, scriptId: scriptId2, url, lineNumber, columnNumber}]}});\n    assert.isFalse(a.isEqual(b));\n  });\n\n  it('logs a message on main frame navigation', async () => {\n    Common.Settings.Settings.instance().moduleSetting('preserve-console-log').set(true);\n    const consoleLog = sinon.spy(Common.Console.Console.instance(), 'log');\n    const tabTarget = createTarget({type: SDK.Target.Type.Tab});\n    const mainFrameTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: tabTarget});\n    const subframeTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: mainFrameTarget});\n    await getInitializedResourceTreeModel(subframeTarget);\n    navigate(getMainFrame(subframeTarget));\n    assert.isTrue(consoleLog.notCalled);\n\n    await getInitializedResourceTreeModel(mainFrameTarget);\n    navigate(getMainFrame(mainFrameTarget));\n    assert.isTrue(consoleLog.calledOnce);\n    assert.isTrue(consoleLog.calledOnceWith(`Navigated to ${FRAME_URL}`));\n  });\n\n  it('logs a message on main frame navigation via bfcache', async () => {\n    Common.Settings.Settings.instance().moduleSetting('preserve-console-log').set(true);\n    const consoleLog = sinon.spy(Common.Console.Console.instance(), 'log');\n    const tabTarget = createTarget({type: SDK.Target.Type.Tab});\n    const mainFrameTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: tabTarget});\n    const subframeTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: mainFrameTarget});\n    await getInitializedResourceTreeModel(subframeTarget);\n    navigate(getMainFrame(subframeTarget), {}, Protocol.Page.NavigationType.BackForwardCacheRestore);\n    assert.isTrue(consoleLog.notCalled);\n\n    await getInitializedResourceTreeModel(mainFrameTarget);\n    navigate(getMainFrame(mainFrameTarget), {}, Protocol.Page.NavigationType.BackForwardCacheRestore);\n    assert.isTrue(consoleLog.calledOnce);\n    assert.isTrue(consoleLog.calledOnceWith(\n        `Navigation to ${FRAME_URL} was restored from back/forward cache (see https://web.dev/bfcache/)`));\n  });\n\n  it('discards duplicate console messages with identical timestamps', async () => {\n    const target = createTarget({type: SDK.Target.Type.Frame});\n    const runtimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n    assert.exists(runtimeModel);\n    const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    assert.exists(resourceTreeModel);\n    const consoleModel = target.model(SDK.ConsoleModel.ConsoleModel);\n    assert.exists(consoleModel);\n    const addMessage = sinon.spy(consoleModel, 'addMessage');\n    resourceTreeModel.dispatchEventToListeners(SDK.ResourceTreeModel.Events.CachedResourcesLoaded, resourceTreeModel);\n\n    const consoleAPICall = {\n      type: Protocol.Runtime.ConsoleAPICalledEventType.Log,\n      args: [{type: Protocol.Runtime.RemoteObjectType.String, value: 'log me'}],\n      executionContextId: 1,\n      timestamp: 123456.789,\n    };\n\n    runtimeModel.dispatchEventToListeners(SDK.RuntimeModel.Events.ConsoleAPICalled, consoleAPICall);\n    assert.isTrue(addMessage.calledOnce);\n    assert.isTrue(addMessage.calledOnceWith(sinon.match({messageText: 'log me'})));\n\n    runtimeModel.dispatchEventToListeners(SDK.RuntimeModel.Events.ConsoleAPICalled, consoleAPICall);\n    assert.isTrue(addMessage.calledOnce);\n\n    runtimeModel.dispatchEventToListeners(\n        SDK.RuntimeModel.Events.ConsoleAPICalled, {...consoleAPICall, timestamp: 123457.000});\n    assert.isTrue(addMessage.calledTwice);\n    assert.isTrue(addMessage.secondCall.calledWith(sinon.match({messageText: 'log me'})));\n  });\n\n  it('clears when main frame global object cleared', async () => {\n    Common.Settings.Settings.instance().moduleSetting('preserve-console-log').set(false);\n    const tabTarget = createTarget({type: SDK.Target.Type.Tab});\n    const mainFrameTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: tabTarget});\n    const subframeTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: mainFrameTarget});\n    const clearGlobalObjectOnTarget = (target: SDK.Target.Target) => {\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      assert.exists(resourceTreeModel);\n      resourceTreeModel.dispatchEventToListeners(SDK.ResourceTreeModel.Events.CachedResourcesLoaded, resourceTreeModel);\n\n      const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n      assert.exists(debuggerModel);\n      debuggerModel.dispatchEventToListeners(SDK.DebuggerModel.Events.GlobalObjectCleared, debuggerModel);\n    };\n\n    let consoleClearEventsTabTarget = 0;\n    let consoleClearEventsMainFrameTarget = 0;\n    let consoleClearEventsSubframeTarget = 0;\n    tabTarget.model(SDK.ConsoleModel.ConsoleModel)\n        ?.addEventListener(SDK.ConsoleModel.Events.ConsoleCleared, () => ++consoleClearEventsTabTarget);\n    mainFrameTarget.model(SDK.ConsoleModel.ConsoleModel)\n        ?.addEventListener(SDK.ConsoleModel.Events.ConsoleCleared, () => ++consoleClearEventsMainFrameTarget);\n    subframeTarget.model(SDK.ConsoleModel.ConsoleModel)\n        ?.addEventListener(SDK.ConsoleModel.Events.ConsoleCleared, () => ++consoleClearEventsSubframeTarget);\n\n    clearGlobalObjectOnTarget(subframeTarget);\n    assert.strictEqual(consoleClearEventsTabTarget, 0);\n    assert.strictEqual(consoleClearEventsMainFrameTarget, 0);\n    assert.strictEqual(consoleClearEventsSubframeTarget, 0);\n\n    clearGlobalObjectOnTarget(mainFrameTarget);\n    assert.strictEqual(consoleClearEventsTabTarget, 0);\n    assert.strictEqual(consoleClearEventsMainFrameTarget, 1);\n    assert.strictEqual(consoleClearEventsSubframeTarget, 0);\n  });\n});\n"]}