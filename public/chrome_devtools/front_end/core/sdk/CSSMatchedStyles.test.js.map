{"version":3,"file":"CSSMatchedStyles.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/CSSMatchedStyles.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport {createTarget} from '../../testing/EnvironmentHelpers.js';\nimport {describeWithMockConnection} from '../../testing/MockConnection.js';\n\nimport * as SDK from './sdk.js';\n\nfunction ruleMatch(\n    selector: string, cssProperties: Protocol.CSS.CSSProperty[], range?: Protocol.CSS.SourceRange,\n    styleSheetId = '0' as Protocol.CSS.StyleSheetId): Protocol.CSS.RuleMatch {\n  return {\n    rule: {\n      selectorList: {selectors: [{text: selector}], text: selector},\n      origin: Protocol.CSS.StyleSheetOrigin.Regular,\n      style: {\n        cssProperties,\n        styleSheetId,\n        range,\n        shorthandEntries: [],\n      },\n    },\n    matchingSelectors: [0],\n  };\n}\n\nfunction createMatchedStyles(payload: Partial<SDK.CSSMatchedStyles.CSSMatchedStylesPayload>) {\n  return SDK.CSSMatchedStyles.CSSMatchedStyles.create({\n    cssModel: sinon.createStubInstance(SDK.CSSModel.CSSModel),\n    node: sinon.createStubInstance(SDK.DOMModel.DOMNode),\n    inlinePayload: null,\n    attributesPayload: null,\n    matchedPayload: [],\n    pseudoPayload: [],\n    inheritedPayload: [],\n    inheritedPseudoPayload: [],\n    animationsPayload: [],\n    parentLayoutNodeId: undefined,\n    positionFallbackRules: [],\n    positionTryRules: [],\n    propertyRules: [],\n    cssPropertyRegistrations: [],\n    fontPaletteValuesRule: undefined,\n    ...payload,\n  });\n}\n\ndescribe('CSSMatchedStyles', () => {\n  describe('computeCSSVariable', () => {\n    const testCssValueEquals = async (text: string, expectedValue: unknown) => {\n      const node = sinon.createStubInstance(SDK.DOMModel.DOMNode);\n      node.id = 1 as Protocol.DOM.NodeId;\n\n      const matchedStyles = await createMatchedStyles({\n        node,\n        matchedPayload: [\n          ruleMatch(\n              'div',\n              [\n                {name: '--foo', value: 'active-foo'},\n                {name: '--baz', value: 'active-baz !important', important: true},\n                {name: '--baz', value: 'passive-baz'},\n                {name: '--dark', value: 'darkgrey'},\n                {name: '--light', value: 'lightgrey'},\n                {name: '--theme', value: 'var(--dark)'},\n                {name: '--shadow', value: '1px var(--theme)'},\n                {name: '--width', value: '1px'},\n                {name: '--a', value: 'a'},\n                {name: '--b', value: 'var(--a)'},\n                {name: '--valid-fallback', value: 'var(--non-existent, fallback-value)'},\n                {name: '--var-reference-in-fallback', value: 'var(--non-existent, var(--foo))'},\n                {name: '--itself', value: 'var(--itself)'},\n                {name: '--itself-complex', value: '10px var(--itself-complex)'},\n                {name: '--cycle-1', value: 'var(--cycle-2)'},\n                {name: '--cycle-2', value: 'var(--cycle-1)'},\n                {name: '--cycle-a', value: 'var(--cycle-b, 50px)'},\n                {name: '--cycle-b', value: 'var(--cycle-a)'},\n                {name: '--cycle-in-fallback', value: 'var(--non-existent, var(--cycle-a))'},\n                {name: '--non-existent-fallback', value: 'var(--non-existent, var(--another-non-existent))'},\n                {name: '--out-of-cycle', value: 'var(--cycle-2, 20px)'},\n                {name: '--non-inherited', value: 'var(--inherited)'},\n                {name: '--also-inherited-overloaded', value: 'this is overloaded here'},\n              ]),\n          ruleMatch(\n              'html',\n              [\n                {name: '--inherited', value: 'var(--also-inherited-overloaded)'},\n                {name: '--also-inherited-overloaded', value: 'inherited and overloaded'},\n              ]),\n        ],\n      });\n\n      const actualValue = matchedStyles.computeCSSVariable(matchedStyles.nodeStyles()[0], text)?.value ?? null;\n      assert.strictEqual(actualValue, expectedValue);\n    };\n\n    it('should correctly compute the value of an expression that uses a variable', async () => {\n      await testCssValueEquals('--foo', 'active-foo');\n      await testCssValueEquals('--baz', 'active-baz !important');\n      await testCssValueEquals('--does-not-exist', null);\n      await testCssValueEquals('--dark', 'darkgrey');\n      await testCssValueEquals('--light', 'lightgrey');\n      await testCssValueEquals('--theme', 'darkgrey');\n      await testCssValueEquals('--shadow', '1px darkgrey');\n      await testCssValueEquals('--width', '1px');\n    });\n\n    it('correctly resolves the declaration', async () => {\n      const node = sinon.createStubInstance(SDK.DOMModel.DOMNode);\n      node.id = 1 as Protocol.DOM.NodeId;\n      node.parentNode = sinon.createStubInstance(SDK.DOMModel.DOMNode);\n      node.parentNode.id = 2 as Protocol.DOM.NodeId;\n      node.parentNode.parentNode = sinon.createStubInstance(SDK.DOMModel.DOMNode);\n      node.parentNode.parentNode.id = 3 as Protocol.DOM.NodeId;\n      node.parentNode.parentNode.parentNode = sinon.createStubInstance(SDK.DOMModel.DOMNode);\n      node.parentNode.parentNode.parentNode.id = 4 as Protocol.DOM.NodeId;\n\n      const matchedStyles = await createMatchedStyles({\n        node,\n        matchedPayload: [ruleMatch('div', [{name: '--foo', value: 'foo1'}])],  // styleFoo1\n        inheritedPayload: [\n          {\n            matchedCSSRules: [ruleMatch('div', [{name: '--bar', value: 'bar'}, {name: '--foo', value: 'foo2'}])],\n          },                                                                        // styleFoo2\n          {matchedCSSRules: [ruleMatch('div', [{name: '--baz', value: 'baz'}])]},   // styleBaz\n          {matchedCSSRules: [ruleMatch('div', [{name: '--foo', value: 'foo3'}])]},  // styleFoo3\n        ],\n        propertyRules: [{\n          origin: Protocol.CSS.StyleSheetOrigin.Regular,\n          style: {\n            cssProperties: [\n              {name: 'syntax', value: '*'},\n              {name: 'inherits', value: 'true'},\n              {name: 'initial-value', value: 'bar0'},\n            ],\n            shorthandEntries: [],\n          },\n          propertyName: {text: '--bar'},\n        }],\n      });\n\n      // Compute the variable value as it is visible to `startingCascade` and compare with the expectation\n      const testComputedVariableValueEquals =\n          (name: string, startingCascade: SDK.CSSStyleDeclaration.CSSStyleDeclaration, expectedValue: string,\n           expectedDeclaration: SDK.CSSProperty.CSSProperty|SDK.CSSMatchedStyles.CSSRegisteredProperty) => {\n            const {value, declaration} = matchedStyles.computeCSSVariable(startingCascade, name)!;\n            assert.strictEqual(value, expectedValue);\n            assert.strictEqual(declaration, expectedDeclaration);\n          };\n\n      const styles = matchedStyles.nodeStyles();\n      const styleFoo1 = styles.find(style => style.allProperties().find(p => p.value === 'foo1'));\n      const styleFoo2 = styles.find(style => style.allProperties().find(p => p.value === 'foo2'));\n      const styleFoo3 = styles.find(style => style.allProperties().find(p => p.value === 'foo3'));\n      const styleBaz = styles.find(style => style.allProperties().find(p => p.value === 'baz'));\n      assert.exists(styleFoo1);\n      assert.exists(styleFoo2);\n      assert.exists(styleFoo3);\n      assert.exists(styleBaz);\n\n      testComputedVariableValueEquals('--foo', styleFoo1, 'foo1', styleFoo1.leadingProperties()[0]);\n      testComputedVariableValueEquals('--bar', styleFoo1, 'bar', styleFoo2.leadingProperties()[0]);\n      testComputedVariableValueEquals('--foo', styleFoo2, 'foo2', styleFoo2.leadingProperties()[1]);\n      testComputedVariableValueEquals('--bar', styleFoo3, 'bar0', matchedStyles.registeredProperties()[0]);\n      testComputedVariableValueEquals('--foo', styleBaz, 'foo3', styleFoo3.leadingProperties()[0]);\n    });\n\n    describe('cyclic references', () => {\n      it('should return `null` when the variable references itself', async () => {\n        await testCssValueEquals('--itself', null);\n        await testCssValueEquals('--itself-complex', null);\n      });\n\n      it('should return `null` when there is a simple cycle (1->2->1)', async () => {\n        await testCssValueEquals('--cycle-1', null);\n      });\n\n      // TODO(ergunsh): These are valid `var()` reference cases that we currently\n      // don't handle correctly.\n      it.skip('[crbug.com/329626445] should return `null` if the var reference is inside the cycle', async () => {\n        await testCssValueEquals('--cycle-a', null);\n      });\n\n      it('should return fallback value if the expression is not inside the cycle', async () => {\n        await testCssValueEquals('--out-of-cycle', '20px');\n      });\n    });\n\n    describe('var references inside fallback', () => {\n      it('should resolve a `var()` reference inside fallback value too', async () => {\n        await testCssValueEquals('--var-reference-in-fallback', 'active-foo');\n      });\n\n      // TODO(ergunsh): These are valid `var()` reference cases that we currently\n      // don't handle correctly.\n      it.skip(\n          '[crbug.com/329626445] should return null when the fallback value contains a cyclic reference', async () => {\n            await testCssValueEquals('--cycle-in-fallback', null);\n          });\n\n      it('should return null when the fallback value is non existent too', async () => {\n        await testCssValueEquals('--non-existent-fallback', null);\n      });\n    });\n\n    it('should resolve a `var()` reference with nothing else', async () => {\n      await testCssValueEquals('--a', 'a');\n    });\n\n    it('should resolve a `var()` reference until no `var()` references left', async () => {\n      await testCssValueEquals('--b', 'a');\n    });\n\n    it('should resolve to fallback if the referenced variable does not exist', async () => {\n      await testCssValueEquals('--valid-fallback', 'fallback-value');\n    });\n\n    it('should correctly resolve the `var()` reference for complex inheritance case', async () => {\n      await testCssValueEquals('--non-inherited', 'inherited and overloaded');\n    });\n  });\n\n  it('does not hide inherited rules that also apply directly to the node if it contains custom properties',\n     async () => {\n       const parentNode = sinon.createStubInstance(SDK.DOMModel.DOMNode);\n       parentNode.id = 0 as Protocol.DOM.NodeId;\n       const node = sinon.createStubInstance(SDK.DOMModel.DOMNode);\n       node.parentNode = parentNode;\n       node.id = 1 as Protocol.DOM.NodeId;\n       const startColumn = 0, endColumn = 1;\n       const matchedPayload = [\n         ruleMatch('body', [{name: '--var', value: 'blue'}], {startLine: 0, startColumn, endLine: 0, endColumn}),\n         ruleMatch('*', [{name: 'color', value: 'var(--var)'}], {startLine: 1, startColumn, endLine: 1, endColumn}),\n         ruleMatch('*', [{name: '--var', value: 'red'}], {startLine: 2, startColumn, endLine: 2, endColumn}),\n       ];\n       const inheritedPayload = [{matchedCSSRules: matchedPayload.slice(1)}];\n       const matchedStyles = await createMatchedStyles({\n         node,\n         matchedPayload,\n         inheritedPayload,\n       });\n\n       assert.deepStrictEqual(\n           matchedStyles.nodeStyles().map(style => style.allProperties().map(prop => prop.propertyText)), [\n             ['--var: red;'],\n             ['color: var(--var);'],\n             ['--var: blue;'],\n             ['--var: red;'],\n           ]);\n     });\n});\n\ndescribeWithMockConnection('NodeCascade', () => {\n  it('correctly marks custom properties as Overloaded if they are registered as inherits: false', async () => {\n    const target = createTarget();\n    const cssModel = new SDK.CSSModel.CSSModel(target);\n    const parentNode = sinon.createStubInstance(SDK.DOMModel.DOMNode);\n    parentNode.id = 0 as Protocol.DOM.NodeId;\n    const node = sinon.createStubInstance(SDK.DOMModel.DOMNode);\n    node.parentNode = parentNode;\n    node.id = 1 as Protocol.DOM.NodeId;\n    const inheritablePropertyPayload: Protocol.CSS.CSSProperty = {name: '--inheritable', value: 'green'};\n    const nonInheritablePropertyPayload: Protocol.CSS.CSSProperty = {name: '--non-inheritable', value: 'green'};\n    const matchedCSSRules: Protocol.CSS.RuleMatch[] = [{\n      matchingSelectors: [0],\n      rule: {\n        selectorList: {selectors: [{text: 'div'}], text: 'div'},\n        origin: Protocol.CSS.StyleSheetOrigin.Regular,\n        style: {\n          cssProperties: [inheritablePropertyPayload, nonInheritablePropertyPayload],\n          shorthandEntries: [],\n        },\n      },\n    }];\n    const cssPropertyRegistrations = [\n      {\n        propertyName: inheritablePropertyPayload.name,\n        initialValue: {text: 'blue'},\n        inherits: true,\n        syntax: '<color>',\n      },\n      {\n        propertyName: nonInheritablePropertyPayload.name,\n        initialValue: {text: 'red'},\n        inherits: false,\n        syntax: '<color>',\n      },\n    ];\n    const matchedStyles = await createMatchedStyles({\n      cssModel,\n      node,\n      matchedPayload: [\n        ruleMatch('div', []),\n      ],\n      inheritedPayload: [{matchedCSSRules}],\n      cssPropertyRegistrations,\n    });\n\n    const style = matchedStyles.nodeStyles()[1];\n    const [inheritableProperty, nonInheritableProperty] = style.allProperties();\n\n    assert.strictEqual(\n        matchedStyles.propertyState(nonInheritableProperty), SDK.CSSMatchedStyles.PropertyState.Overloaded);\n    assert.strictEqual(matchedStyles.propertyState(inheritableProperty), SDK.CSSMatchedStyles.PropertyState.Active);\n  });\n\n  it('correctly computes active properties for nested at-rules', async () => {\n    const outerRule = ruleMatch('a', [{name: 'color', value: 'var(--inner)'}]);\n    const nestedRule = ruleMatch('&', [{name: '--inner', value: 'red'}]);\n    nestedRule.rule.nestingSelectors = ['a'];\n    nestedRule.rule.selectorList = {selectors: [], text: '&'};\n    nestedRule.rule.supports = [{\n      'text': '(--var:s)',\n      'active': true,\n      styleSheetId: nestedRule.rule.styleSheetId,\n    }];\n    const matchedStyles = await createMatchedStyles({\n      matchedPayload: [outerRule, nestedRule],\n    });\n\n    assert.deepEqual(matchedStyles.availableCSSVariables(matchedStyles.nodeStyles()[0]), ['--inner']);\n  });\n});\n"]}