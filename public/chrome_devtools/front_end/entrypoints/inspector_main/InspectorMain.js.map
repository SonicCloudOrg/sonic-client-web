{"version":3,"file":"InspectorMain.js","sourceRoot":"","sources":["../../../../../../front_end/entrypoints/inspector_main/InspectorMain.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as MobileThrottling from '../../panels/mobile_throttling/mobile_throttling.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport nodeIconStyles from './nodeIcon.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text that refers to the main target. The main target is the primary webpage that\n   * DevTools is connected to. This text is used in various places in the UI as a label/name to inform\n   * the user which target/webpage they are currently connected to, as DevTools may connect to multiple\n   * targets at the same time in some scenarios.\n   */\n  main: 'Main',\n  /**\n   * @description Text that refers to the tab target. The tab target is the Chrome tab that\n   * DevTools is connected to. This text is used in various places in the UI as a label/name to inform\n   * the user which target they are currently connected to, as DevTools may connect to multiple\n   * targets at the same time in some scenarios.\n   */\n  tab: 'Tab',\n  /**\n   * @description A warning shown to the user when JavaScript is disabled on the webpage that\n   * DevTools is connected to.\n   */\n  javascriptIsDisabled: 'JavaScript is disabled',\n  /**\n   * @description A message that prompts the user to open devtools for a specific environment (Node.js)\n   */\n  openDedicatedTools: 'Open dedicated DevTools for `Node.js`',\n};\nconst str_ = i18n.i18n.registerUIStrings('entrypoints/inspector_main/InspectorMain.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet inspectorMainImplInstance: InspectorMainImpl;\n\nexport class InspectorMainImpl implements Common.Runnable.Runnable {\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): InspectorMainImpl {\n    const {forceNew} = opts;\n    if (!inspectorMainImplInstance || forceNew) {\n      inspectorMainImplInstance = new InspectorMainImpl();\n    }\n\n    return inspectorMainImplInstance;\n  }\n\n  async run(): Promise<void> {\n    let firstCall = true;\n    await SDK.Connections.initMainConnection(async () => {\n      const type = Root.Runtime.Runtime.queryParam('v8only') ?\n          SDK.Target.Type.Node :\n          (Root.Runtime.Runtime.queryParam('targetType') === 'tab' ? SDK.Target.Type.Tab : SDK.Target.Type.Frame);\n      // TODO(crbug.com/1348385): support waiting for debugger with tab target.\n      const waitForDebuggerInPage =\n          type === SDK.Target.Type.Frame && Root.Runtime.Runtime.queryParam('panel') === 'sources';\n      const name = type === SDK.Target.Type.Frame ? i18nString(UIStrings.main) : i18nString(UIStrings.tab);\n      const target = SDK.TargetManager.TargetManager.instance().createTarget(\n          'main', name, type, null, undefined, waitForDebuggerInPage);\n\n      const waitForPrimaryPageTarget = (): Promise<SDK.Target.Target> => {\n        return new Promise(resolve => {\n          const targetManager = SDK.TargetManager.TargetManager.instance();\n          targetManager.observeTargets({\n            targetAdded: (target: SDK.Target.Target): void => {\n              if (target === targetManager.primaryPageTarget()) {\n                target.setName(i18nString(UIStrings.main));\n                resolve(target);\n              }\n            },\n            targetRemoved: (_: unknown): void => {},\n          });\n        });\n      };\n      await waitForPrimaryPageTarget();\n\n      // Only resume target during the first connection,\n      // subsequent connections are due to connection hand-over,\n      // there is no need to pause in debugger.\n      if (!firstCall) {\n        return;\n      }\n      firstCall = false;\n\n      if (waitForDebuggerInPage) {\n        const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n        if (debuggerModel) {\n          if (!debuggerModel.isReadyToPause()) {\n            await debuggerModel.once(SDK.DebuggerModel.Events.DebuggerIsReadyToPause);\n          }\n          debuggerModel.pause();\n        }\n      }\n\n      if (type !== SDK.Target.Type.Tab) {\n        void target.runtimeAgent().invoke_runIfWaitingForDebugger();\n      }\n    }, Components.TargetDetachedDialog.TargetDetachedDialog.webSocketConnectionLost);\n\n    new SourcesPanelIndicator();\n    new BackendSettingsSync();\n    new MobileThrottling.NetworkPanelIndicator.NetworkPanelIndicator();\n\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n        Host.InspectorFrontendHostAPI.Events.ReloadInspectedPage, ({data: hard}) => {\n          SDK.ResourceTreeModel.ResourceTreeModel.reloadAllPages(hard);\n        });\n  }\n}\n\nCommon.Runnable.registerEarlyInitializationRunnable(InspectorMainImpl.instance);\n\nexport class ReloadActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, actionId: string): boolean {\n    switch (actionId) {\n      case 'inspector-main.reload':\n        SDK.ResourceTreeModel.ResourceTreeModel.reloadAllPages(false);\n        return true;\n      case 'inspector-main.hard-reload':\n        SDK.ResourceTreeModel.ResourceTreeModel.reloadAllPages(true);\n        return true;\n    }\n    return false;\n  }\n}\n\nexport class FocusDebuggeeActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    const mainTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    if (!mainTarget) {\n      return false;\n    }\n    void mainTarget.pageAgent().invoke_bringToFront();\n    return true;\n  }\n}\n\nlet nodeIndicatorInstance: NodeIndicator;\n\nexport class NodeIndicator implements UI.Toolbar.Provider {\n  readonly #element: Element;\n  readonly #button: UI.Toolbar.ToolbarItem;\n  private constructor() {\n    const element = document.createElement('div');\n    const shadowRoot =\n        UI.UIUtils.createShadowRootWithCoreStyles(element, {cssFile: [nodeIconStyles], delegatesFocus: undefined});\n    this.#element = shadowRoot.createChild('div', 'node-icon');\n    element.addEventListener(\n        'click', () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.openNodeFrontend(), false);\n    this.#button = new UI.Toolbar.ToolbarItem(element);\n    this.#button.setTitle(i18nString(UIStrings.openDedicatedTools));\n    SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.AvailableTargetsChanged, event => this.#update(event.data));\n    this.#button.setVisible(false);\n    this.#update([]);\n  }\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): NodeIndicator {\n    const {forceNew} = opts;\n    if (!nodeIndicatorInstance || forceNew) {\n      nodeIndicatorInstance = new NodeIndicator();\n    }\n\n    return nodeIndicatorInstance;\n  }\n\n  #update(targetInfos: Protocol.Target.TargetInfo[]): void {\n    const hasNode = Boolean(targetInfos.find(target => target.type === 'node' && !target.attached));\n    this.#element.classList.toggle('inactive', !hasNode);\n    if (hasNode) {\n      this.#button.setVisible(true);\n    }\n  }\n\n  item(): UI.Toolbar.ToolbarItem|null {\n    return this.#button;\n  }\n}\n\nexport class SourcesPanelIndicator {\n  constructor() {\n    Common.Settings.Settings.instance()\n        .moduleSetting('java-script-disabled')\n        .addChangeListener(javaScriptDisabledChanged);\n    javaScriptDisabledChanged();\n\n    function javaScriptDisabledChanged(): void {\n      const warnings = [];\n      if (Common.Settings.Settings.instance().moduleSetting('java-script-disabled').get()) {\n        warnings.push(i18nString(UIStrings.javascriptIsDisabled));\n      }\n      UI.InspectorView.InspectorView.instance().setPanelWarnings('sources', warnings);\n    }\n  }\n}\n\nexport class BackendSettingsSync implements SDK.TargetManager.Observer {\n  readonly #autoAttachSetting: Common.Settings.Setting<boolean>;\n  readonly #adBlockEnabledSetting: Common.Settings.Setting<boolean>;\n  readonly #emulatePageFocusSetting: Common.Settings.Setting<boolean>;\n\n  constructor() {\n    this.#autoAttachSetting = Common.Settings.Settings.instance().moduleSetting('auto-attach-to-created-pages');\n    this.#autoAttachSetting.addChangeListener(this.#updateAutoAttach, this);\n    this.#updateAutoAttach();\n\n    this.#adBlockEnabledSetting = Common.Settings.Settings.instance().moduleSetting('network.ad-blocking-enabled');\n    this.#adBlockEnabledSetting.addChangeListener(this.#update, this);\n\n    this.#emulatePageFocusSetting = Common.Settings.Settings.instance().moduleSetting('emulate-page-focus');\n    this.#emulatePageFocusSetting.addChangeListener(this.#update, this);\n\n    SDK.TargetManager.TargetManager.instance().observeTargets(this);\n  }\n\n  #updateTarget(target: SDK.Target.Target): void {\n    if (target.type() !== SDK.Target.Type.Frame || target.parentTarget()?.type() === SDK.Target.Type.Frame) {\n      return;\n    }\n    void target.pageAgent().invoke_setAdBlockingEnabled({enabled: this.#adBlockEnabledSetting.get()});\n    void target.emulationAgent().invoke_setFocusEmulationEnabled({enabled: this.#emulatePageFocusSetting.get()});\n  }\n\n  #updateAutoAttach(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.setOpenNewWindowForPopups(this.#autoAttachSetting.get());\n  }\n\n  #update(): void {\n    for (const target of SDK.TargetManager.TargetManager.instance().targets()) {\n      this.#updateTarget(target);\n    }\n  }\n\n  targetAdded(target: SDK.Target.Target): void {\n    this.#updateTarget(target);\n  }\n\n  targetRemoved(_target: SDK.Target.Target): void {\n  }\n}\n\nSDK.ChildTargetManager.ChildTargetManager.install();\n"]}