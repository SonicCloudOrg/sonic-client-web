{"version":3,"file":"MainImpl.test.js","sourceRoot":"","sources":["../../../../../../front_end/entrypoints/main/MainImpl.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../../core/sdk/sdk.js';\nimport {createTarget, stubNoopSettings} from '../../testing/EnvironmentHelpers.js';\nimport {\n  describeWithMockConnection,\n} from '../../testing/MockConnection.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport * as Main from './main.js';\n\ndescribeWithMockConnection('MainMenuItem', () => {\n  beforeEach(async () => {\n    stubNoopSettings();\n    sinon.stub(UI.ShortcutRegistry.ShortcutRegistry, 'instance').returns({\n      shortcutTitleForAction: () => {},\n      shortcutsForAction: () => [],\n    } as unknown as UI.ShortcutRegistry.ShortcutRegistry);\n    const tabTaget = createTarget({type: SDK.Target.Type.Tab});\n    createTarget({parentTarget: tabTaget, subtype: 'prerender'});\n    createTarget({parentTarget: tabTaget});\n\n    sinon.stub(UI.ActionRegistry.ActionRegistry.instance(), 'hasAction')\n        .withArgs(sinon.match(/inspector-main.focus-debuggee|main.toggle-drawer/))\n        .returns(true);\n    sinon.stub(UI.ActionRegistry.ActionRegistry.instance(), 'getAction')\n        .withArgs(sinon.match(/inspector-main.focus-debuggee|main.toggle-drawer/))\n        .returns(sinon.createStubInstance(UI.ActionRegistration.Action));\n  });\n\n  it('includes focus debuggee item when undocked', async () => {\n    UI.DockController.DockController.instance().setDockSide(UI.DockController.DockState.UNDOCKED);\n\n    const item = Main.MainImpl.MainMenuItem.instance({forceNew: true}).item() as UI.Toolbar.ToolbarMenuButton;\n    assert.exists(item);\n\n    const contextMenuShow = sinon.stub(UI.ContextMenu.ContextMenu.prototype, 'show').resolves();\n    item.clicked(new MouseEvent('click', {\n      bubbles: true,\n      cancelable: true,\n    }));\n\n    assert.isTrue(contextMenuShow.calledOnce);\n    assert.exists(contextMenuShow.thisValues[0].defaultSection().items.find(\n        (item: UI.ContextMenu.Item) => item.buildDescriptor().label === 'Focus page'));\n  });\n\n  it('does not include focus debuggee item when docked', async () => {\n    UI.DockController.DockController.instance().setDockSide(UI.DockController.DockState.BOTTOM);\n\n    const item = Main.MainImpl.MainMenuItem.instance({forceNew: true}).item() as UI.Toolbar.ToolbarMenuButton;\n    assert.exists(item);\n\n    const contextMenuShow = sinon.stub(UI.ContextMenu.ContextMenu.prototype, 'show').resolves();\n    item.clicked(new MouseEvent('click', {\n      bubbles: true,\n      cancelable: true,\n    }));\n\n    assert.isTrue(contextMenuShow.calledOnce);\n    assert.notExists(contextMenuShow.thisValues[0].defaultSection().items.find(\n        (item: UI.ContextMenu.Item) => item.buildDescriptor().label === 'Focus page'));\n  });\n});\n"]}